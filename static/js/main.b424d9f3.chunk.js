(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{103:function(e,t,n){e.exports={overlay:"modal-overlay_overlay__AKixE"}},109:function(e,t,n){e.exports={loader:"loader_loader__31U88",spin:"loader_spin__3GevV"}},110:function(e,t,n){e.exports={homePage:"home_homePage__3Rs05"}},112:function(e,t,n){e.exports={indredient__container:"ingredient_indredient__container__2xfzv"}},122:function(e,t,n){},205:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(34),s=n.n(a),i=n(3),o=(n(122),n(10)),l=n(11),d=n(212),u=n(113),j=n(4),b=n(103),m=n.n(b),_=n(0),g=function(e){var t=e.onClose;return Object(_.jsx)("div",{className:m.a.overlay,onClick:t,onKeyPress:t})},p=n(75),f=n.n(p),h=document.getElementById("react-portal"),O=function(e){var t=e.children,n=e.onClose;return Object(r.useEffect)((function(){var e=function(e){"Escape"===e.key&&n()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[n]),s.a.createPortal(Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(g,{onClose:n}),Object(_.jsxs)("div",{className:"".concat(f.a.modal," pt-15 pr-30 pb-15 pl-30"),children:[Object(_.jsx)("div",{className:f.a.modal__closeIcon,children:Object(_.jsx)(j.CloseIcon,{onClick:n,type:"primary"})}),t]})]}),h)},x=n(12),v=i.c,y=function(){return Object(i.b)()},k=n(213),N=n(211),w=n(54),C=n(49),R=function(e){return e.burgerConstructor.bunElement},E=function(e){return e.burgerConstructor.draggableElements},I=Object(C.a)(R,E,(function(e,t){return("bun"===e.type?2*e.price:0)+t.reduce((function(e,t){return e+t.price}),0)})),P=n(41),D=n.n(P),F=function(e){var t=e.id,n=e.image,c=e.price,a=e.name,s=e.onOpenModalWithIngredient,d=Object(i.c)(function(e){return Object(C.a)(R,E,(function(t,n){return[t].concat(Object(w.a)(n),[t]).filter((function(t){return t._id===e})).length}))}(t)),u=Object(l.h)(),b=Object(k.a)({type:"BurgerIngredient",item:{id:t},collect:function(e){return{isDragging:e.isDragging()}}},[t]),m=Object(x.a)(b,3),g=m[0].isDragging,p=m[1],f=m[2],h=Object(r.useCallback)((function(e){return s(e)}),[s]);return Object(_.jsx)(o.b,{to:{pathname:"/ingredients/".concat(t),state:{background:u}},children:Object(_.jsxs)("li",{className:"".concat(D.a.ingredient__\u0441ard," \n      ").concat(g&&D.a.ingredient__\u0441ard_isDragging," mb-8"),onClick:h,onKeyPress:h,ref:p,"data-id":t,children:[Object(_.jsx)(N.a,{src:n,connect:f}),Object(_.jsx)("img",{src:n,alt:a}),0!==d&&Object(_.jsx)(j.Counter,{count:d,size:"default"}),Object(_.jsxs)("div",{className:"".concat(D.a.ingredient__price," mt-2 mb-2"),children:[Object(_.jsx)("span",{className:"text text_type_digits-default mr-2",children:c}),Object(_.jsx)(j.CurrencyIcon,{type:"primary"})]}),Object(_.jsx)("p",{className:"".concat(D.a.ingredient__name," text text text_type_main-default"),children:a})]})})},T=c.a.memo(F),S=function(e){return e.burgerIngredients.ingredients},q=function(e){return e.burgerIngredients.ingredientToView},U=function(e){return e.burgerIngredients.ingredientsRequest},B=function(e){return e.burgerIngredients.ingredientsFailed},L=n(53),M=n.n(L),z=n(42),J=n.n(z),V=function(e){var t=e.onOpenModalWithIngredient,n=v(S),c={bun:{name:"\u0411\u0443\u043b\u043a\u0438",ref:Object(r.useRef)(null)},sauce:{name:"\u0421\u043e\u0443\u0441\u044b",ref:Object(r.useRef)(null)},main:{name:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438",ref:Object(r.useRef)(null)}},a=Object(r.useState)("\u0411\u0443\u043b\u043a\u0438"),s=Object(x.a)(a,2),i=s[0],o=s[1],l=Object(r.useCallback)((function(e){var t=e.name,n=e.ref;return function(){var e;o(t),null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})}}),[]),d=Object(r.useCallback)((function(){return Object.keys(c).map((function(e){return{name:c[e].name,items:n.filter((function(t){return t.type===e})),ref:c[e].ref}}))}),[c,n])(),u=Object(r.useCallback)((function(e){var t,n,r=e.target.scrollTop,a=null===(t=c.sauce.ref.current)||void 0===t?void 0:t.offsetTop,s=null===(n=c.main.ref.current)||void 0===n?void 0:n.offsetTop;o(a&&r+120<=a?"\u0411\u0443\u043b\u043a\u0438":s&&r+120<=s?"\u0421\u043e\u0443\u0441\u044b":"\u041d\u0430\u0447\u0438\u043d\u043a\u0438")}),[o,c.sauce.ref,c.main.ref]);return Object(_.jsxs)("section",{className:J.a.ingredients__container,children:[Object(_.jsx)("h1",{className:"text text_type_main-large mt-10 mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(_.jsx)("nav",{children:Object(_.jsx)("ul",{className:J.a.ingredients__tabContainer,children:Object.values(c).map((function(e,t){return Object(_.jsx)("li",{children:Object(_.jsx)(j.Tab,{value:e.name,active:i===e.name,onClick:l({name:e.name,ref:e.ref}),children:e.name})},t)}))})}),Object(_.jsx)("section",{children:Object(_.jsx)("ul",{className:"".concat(J.a.ingredients__list," ").concat(M.a.scroll," pr-4 pl-4"),onScroll:u,children:d.map((function(e,n){var r=e.name,c=e.items,a=e.ref;return Object(_.jsxs)("li",{children:[Object(_.jsx)("h2",{className:"text text_type_main-medium mt-6 mb-6",ref:a,children:r}),Object(_.jsx)("ul",{className:"".concat(J.a.ingredient__category," pr-4 pl-4"),children:c.map((function(e){return Object(_.jsx)(T,{id:e._id,name:e.name,price:e.price,image:e.image,onOpenModalWithIngredient:t},e._id)}))})]},n)}))})})]})},A=c.a.memo(V),K=n(5),W=n(214),H=n(23),G=n(106),Q=n.n(G),Z={bunElement:{},draggableElements:[]},$=Object(H.b)({name:"constructor",initialState:Z,reducers:{addBunElement:function(e,t){e.bunElement=t.payload},addNonBunElement:function(e,t){e.draggableElements.push(t.payload)},deleteElement:function(e,t){var n=e.draggableElements.filter((function(e){return e.uid!==t.payload}));e.draggableElements=n},udpadeElementsOrder:function(e,t){var n=t.payload,r=n.newIndex,c=n.draggableElement,a=e.draggableElements.findIndex((function(e){return e.uid===c.uid})),s=Q()(e.draggableElements,{$splice:[[a,1],[r,0,c]]});e.draggableElements=s},resetConstructor:function(){return Z}}}),X=$.actions,Y=X.addBunElement,ee=X.addNonBunElement,te=X.deleteElement,ne=X.udpadeElementsOrder,re=X.resetConstructor,ce=$.reducer,ae=n(107),se=n(108);function ie(e){var t=document.cookie.match(new RegExp("(?:^|; )".concat(e.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,"\\$1"),"=([^;]*)")));return t?decodeURIComponent(t[1]):""}function oe(e,t,n){var r=(n=n||{}).expires;if("number"===typeof r&&r){var c=new Date;c.setTime(c.getTime()+1e3*r),r=n.expires=c}r&&r instanceof Date&&(n.expires=r.toUTCString()),t=encodeURIComponent(t);var a="".concat(e,"=").concat(t);for(var s in n){a+="; ".concat(s);var i=n[s];!0!==i&&(a+="=".concat(i))}document.cookie=a}var le=function(){function e(t,n){Object(ae.a)(this,e),this.baseUrl=void 0,this.headers=void 0,this.checkResponse=function(e){return e.ok?e.json():e.json().then((function(e){return Promise.reject(e)}))},this.baseUrl=t,this.headers=n}return Object(se.a)(e,[{key:"getIngredients",value:function(){return fetch("".concat(this.baseUrl,"/ingredients"),{headers:this.headers}).then(this.checkResponse)}},{key:"postOrder",value:function(e){return fetch("".concat(this.baseUrl,"/orders"),{method:"POST",headers:this.headers,body:JSON.stringify({ingredients:e})}).then(this.checkResponse)}},{key:"postRegisterUser",value:function(e){var t=e.name,n=e.email,r=e.password;return fetch("".concat(this.baseUrl,"/auth/register"),{method:"POST",headers:this.headers,body:JSON.stringify({name:t,email:n,password:r})}).then(this.checkResponse)}},{key:"postLoginUser",value:function(e){var t=e.email,n=e.password;return fetch("".concat(this.baseUrl,"/auth/login"),{method:"POST",headers:this.headers,body:JSON.stringify({email:t,password:n})}).then(this.checkResponse)}},{key:"postLogoutUser",value:function(){var e=localStorage.getItem("refreshToken");return fetch("".concat(this.baseUrl,"/auth/logout"),{method:"POST",headers:this.headers,body:JSON.stringify({token:e})}).then(this.checkResponse)}},{key:"getUserData",value:function(){var e=this,t=ie("accessToken");return this.headers.set("authorization",t),fetch("".concat(this.baseUrl,"/auth/user"),{headers:this.headers}).then(this.checkResponse).catch((function(t){if("jwt expired"===t.message)return e.postUpdateToken().then((function(t){localStorage.setItem("refreshToken",t.refreshToken),oe("accessToken",t.accessToken),e.headers.set("authorization",t.accessToken),fetch("".concat(e.baseUrl,"/auth/user"),{headers:e.headers}).then(e.checkResponse)}))}))}},{key:"patchUserData",value:function(e){var t=e.name,n=e.email,r=e.password,c=ie("accessToken");return this.headers.set("authorization",c),fetch("".concat(this.baseUrl,"/auth/user"),{method:"PATCH",headers:this.headers,body:JSON.stringify({name:t,email:n,password:r})}).then(this.checkResponse)}},{key:"postForgotPassword",value:function(e){var t=e.email;return fetch("".concat(this.baseUrl,"/password-reset"),{method:"POST",headers:this.headers,body:JSON.stringify({email:t})}).then(this.checkResponse)}},{key:"postResetPassword",value:function(e){var t=e.password,n=e.token;return fetch("".concat(this.baseUrl,"/password-reset/reset"),{method:"POST",headers:this.headers,body:JSON.stringify({password:t,token:n})}).then(this.checkResponse)}},{key:"postUpdateToken",value:function(){var e=localStorage.getItem("refreshToken");return fetch("".concat(this.baseUrl,"/auth/token"),{method:"POST",headers:this.headers,body:JSON.stringify({token:e})}).then(this.checkResponse).then((function(e){return console.log(e),e}))}}]),e}(),de=new Headers;de.set("Content-Type","application/json");var ue=new le("https://norma.nomoreparties.space/api",de),je={orderNumber:null,orderRequest:!1,orderFailed:!1},be=Object(H.b)({name:"order",initialState:je,reducers:{postOrderRequest:function(e){e.orderRequest=!0},postOrderSuccess:function(e,t){e.orderNumber=t.payload,e.orderFailed=!1,e.orderRequest=!1},postOrderFailed:function(e){e.orderFailed=!0,e.orderRequest=!1},resetOrder:function(){return je}}}),me=be.actions,_e=me.postOrderRequest,ge=me.postOrderSuccess,pe=me.postOrderFailed,fe=me.resetOrder,he=be.reducer,Oe=function(e){return function(t){t(_e()),ue.postOrder(e).then((function(e){e&&e.success?t(ge(e.order.number)):t(pe())})).then((function(){t(re())})).catch((function(e){t(pe()),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u0430: ".concat(e))}))}},xe=n(215),ve=n(78),ye=n.n(ve),ke=function(e){var t=e.id,n=e.uid,c=e.name,a=e.price,s=e.image,i=e.onClickToIngredient,o=e.findDraggableElement,l=e.moveDraggableElement,d=y(),u=o(n).draggableElementIndex,b=Object(k.a)((function(){return{type:"DraggableItem",item:{uid:n,originalIndex:u},collect:function(e){return{isDragging:e.isDragging()}},end:function(e,t){t.didDrop()||l(n,u)}}}),[n,l,u]),m=Object(x.a)(b,3),g=m[0].isDragging,p=m[1],f=m[2],h=Object(W.a)((function(){return{accept:"DraggableItem",hover:function(e){var t=e.uid;if(t!==n){var r=o(n).draggableElementIndex;l(t,r)}}}}),[o,l]),O=Object(x.a)(h,2)[1],v=Object(r.useCallback)((function(){d(te(n))}),[n,d]);return Object(_.jsxs)("li",{className:"".concat(ye.a.draggableElement," \n      ").concat(g&&ye.a.draggableElement_isDragging," mb-4 ml-2"),onClick:i,onKeyPress:i,"data-id":t,ref:function(e){return p(O(e))},children:[Object(_.jsx)(j.DragIcon,{type:"primary"}),Object(_.jsx)(N.a,{src:s,connect:f}),Object(_.jsx)(j.ConstructorElement,{text:c,price:a,thumbnail:s,handleClose:v})]},n)},Ne=c.a.memo(ke),we=function(e){return e.order.orderRequest},Ce=function(e){return e.order.orderFailed},Re=function(e){return e.order.orderNumber},Ee=function(e){return e.auth},Ie=function(e){return e.auth.registerRequest},Pe=function(e){return e.auth.registerFailed},De=function(e){return e.auth.loginRequest},Fe=function(e){return e.auth.loginFailed},Te=function(e){return e.auth.userDataRequest},Se=function(e){return e.auth.forgotPasswordRequest},qe=function(e){return e.auth.forgotPassword},Ue=function(e){return e.auth.forgotPasswordFailed},Be=function(e){return e.auth.resetPasswordRequest},Le=function(e){return e.auth.resetPasswordFailed},Me=n(24),ze=n.n(Me),Je=function(e){var t=e.onOpenModalWithIngredient,n=v(S),c=v(R),a=v(E),s=v(we),i=v(I),o=v(Ee).user,d=Object(l.g)(),u=Object(l.h)(),b=y(),m=function(e){var t=e.id,r=n.find((function(e){return e._id===t}));"bun"===(null===r||void 0===r?void 0:r.type)?b(Y(Object(K.a)(Object(K.a)({},r),{},{uid:Object(xe.a)()}))):r&&c._id&&b(ee(Object(K.a)(Object(K.a)({},r),{},{uid:Object(xe.a)()})))},g=function(e){var t=e.id,r=n.find((function(e){return e._id===t}));return!(!c._id&&"bun"!==(null===r||void 0===r?void 0:r.type))},p=Object(W.a)({accept:"BurgerIngredient",drop:function(e){m(e)},canDrop:function(e){return g(e)},collect:function(e){return{isHover:e.isOver(),isCanDrop:e.canDrop(),isDragging:e.canDrop()&&!e.isOver()}}},[m,g]),f=Object(x.a)(p,2),h=f[0],O=h.isHover,k=h.isCanDrop,N=h.isDragging,C=f[1],P=Object(r.useCallback)((function(e){var t=a.find((function(t){return t.uid===e}));return{draggableElement:t,draggableElementIndex:t?a.findIndex((function(e){return e.uid===t.uid})):-1}}),[a]),D=Object(r.useCallback)((function(e,t){var n=P(e).draggableElement;n&&b(ne({draggableElement:n,newIndex:t}))}),[P,b]),F=Object(W.a)((function(){return{accept:"DraggableItem"}})),T=Object(x.a)(F,2)[1],q=!c._id&&!a.length,U="".concat(ze.a.constructor__elements," \n  ").concat((q||N)&&ze.a.constructor__elements_dropArea," \n  ").concat(O&&k?ze.a.constructor__elements_canDrop:"","\n  ").concat(O&&!k?ze.a.constructor__elements_canNotDrop:""),B=Object(r.useCallback)((function(e){return t(e)}),[t]);return Object(_.jsxs)("section",{className:"pt-25 pb-2 pl-4",children:[Object(_.jsxs)("ul",{className:U,ref:C,children:["bun"===c.type&&Object(_.jsx)("li",{className:"".concat(ze.a.constructor__bunElement," mr-4 mb-4"),onClick:B,onKeyPress:B,"data-id":c._id,children:Object(_.jsx)(j.ConstructorElement,{type:"top",text:"".concat(c.name," (\u0432\u0435\u0440\u0445)"),price:c.price,thumbnail:c.image,isLocked:!0})}),Object(_.jsxs)("ul",{className:"".concat(ze.a.constructor__nonBunElements," ").concat(M.a.scroll),ref:T,children:[q&&Object(_.jsx)("p",{className:"".concat(ze.a.constructor__text," mt-10\n              text text text_type_main-medium text_color_inactive"),children:"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u044d\u043b\u0435\u043c\u0435\u043d\u0442 \u0432 \u043a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440. \u0421\u043d\u0430\u0447\u0430\u043b\u0430 \u0434\u043e\u0431\u0430\u0432\u044c\u0442\u0435 \u0431\u0443\u043b\u043e\u0447\u043a\u0443"}),a.map((function(e){return Object(_.jsx)(Ne,{id:e._id,uid:e.uid,name:e.name,price:e.price,image:e.image,onClickToIngredient:B,findDraggableElement:P,moveDraggableElement:D},e.uid)}))]}),"bun"===c.type&&Object(_.jsx)("li",{className:"".concat(ze.a.constructor__bunElement," mt-4 mr-4"),onClick:B,onKeyPress:B,"data-id":c._id,children:Object(_.jsx)(j.ConstructorElement,{type:"bottom",text:"".concat(c.name," (\u043d\u0438\u0437)"),price:c.price,thumbnail:c.image,isLocked:!0})})]}),Object(_.jsxs)("div",{className:"".concat(ze.a.constructor__totalPriceContainer," mt-10 mr-4"),children:[Object(_.jsxs)("div",{className:"".concat(ze.a.constructor__totalPrice," mr-10"),children:[Object(_.jsx)("span",{className:"text text_type_digits-medium mr-2",children:i}),Object(_.jsx)(j.CurrencyIcon,{type:"primary"})]}),Object(_.jsx)(j.Button,{type:"primary",size:"medium",onClick:function(){o?b(Oe([c].concat(Object(w.a)(a)))):d.replace({pathname:"/login",state:{background:u}})},disabled:0===i,name:"orderSubmitButton",htmlType:"submit",children:s?"\u0421\u043e\u0437\u0434\u0430\u0435\u043c \u0437\u0430\u043a\u0430\u0437...":"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})]})},Ve=c.a.memo(Je),Ae=n(56),Ke=n.n(Ae),We=n.p+"static/media/done.6d4020a5.svg",He=function(){var e=v(Re);return Object(_.jsxs)("div",{className:Ke.a.order,children:[Object(_.jsx)("div",{className:"".concat(Ke.a.order__number," text text_type_digits-large pt-15 pb-8"),children:e}),Object(_.jsx)("p",{className:"text text_type_main-medium",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(_.jsx)("img",{className:"".concat(Ke.a.order__image," pt-15 pb-15"),src:We,alt:"\u0437\u0430\u043a\u0430\u0437 \u0441\u0444\u043e\u0440\u043c\u0438\u0440\u043e\u0432\u0430\u043d"}),Object(_.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(_.jsx)("p",{className:"text text_type_main-default text_color_inactive pt-2 pb-15",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},Ge=n(27),Qe=n.n(Ge),Ze=function(){var e,t,n,r,c,a,s,o=Object(i.c)(S),d=Object(i.c)(q),u=Object(l.h)();if(!d){var j=u.pathname.split("/"),b=j[j.length-1];d=o.find((function(e){return e._id===b}))}return Object(_.jsxs)("div",{className:Qe.a.ingredient,children:[Object(_.jsx)("h2",{className:"".concat(Qe.a.ingredient__title," text text_type_main-large pb-4"),children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"}),Object(_.jsx)("img",{className:"".concat(Qe.a.ingredient__image," pb-4"),src:null===(e=d)||void 0===e?void 0:e.image,alt:null===(t=d)||void 0===t?void 0:t.name}),Object(_.jsx)("p",{className:"".concat(Qe.a.ingredient__name," text text_type_main-medium pb-8"),children:null===(n=d)||void 0===n?void 0:n.name}),Object(_.jsxs)("div",{className:"".concat(Qe.a.ingredient__compounds),children:[Object(_.jsxs)("div",{className:"".concat(Qe.a.ingredient__compound),children:[Object(_.jsx)("p",{className:"text text_type_main-default text_color_inactive pb-2",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(_.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:null===(r=d)||void 0===r?void 0:r.calories})]}),Object(_.jsxs)("div",{className:"".concat(Qe.a.ingredient__compound),children:[Object(_.jsx)("p",{className:"text text_type_main-default text_color_inactive pb-2",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(_.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:null===(c=d)||void 0===c?void 0:c.proteins})]}),Object(_.jsxs)("div",{className:"".concat(Qe.a.ingredient__compound),children:[Object(_.jsx)("p",{className:"text text_type_main-default text_color_inactive pb-2",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(_.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:null===(a=d)||void 0===a?void 0:a.fat})]}),Object(_.jsxs)("div",{className:"".concat(Qe.a.ingredient__compound),children:[Object(_.jsx)("p",{className:"text text_type_main-default text_color_inactive pb-2",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(_.jsx)("span",{className:"text text_type_digits-default text_color_inactive",children:null===(s=d)||void 0===s?void 0:s.carbohydrates})]})]})]})},$e=n(109),Xe=n.n($e),Ye=function(){return Object(_.jsx)("div",{className:Xe.a.loader})},et=function(e){var t=e.isLoading,n=e.hasError,r=e.hasData,c=e.errorMessage,a=e.children,s=e.onErrorModalClose;return Object(_.jsxs)(_.Fragment,{children:[t&&Object(_.jsx)(Ye,{}),n&&Object(_.jsx)(O,{title:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430",onClose:s,children:Object(_.jsx)("p",{className:"text text_type_main-medium text_color_inactive pt-10",children:c})}),!t&&!n&&r&&a]})},tt={ingredients:[],ingredientToView:null,ingredientsRequest:!1,ingredientsFailed:!1},nt=Object(H.b)({name:"ingreduents",initialState:tt,reducers:{getIngredientsRequest:function(e){e.ingredientsRequest=!0},getIngredientsSuccess:function(e,t){e.ingredients=t.payload,e.ingredientsFailed=!1,e.ingredientsRequest=!1},getIngredientsFailed:function(e){e.ingredientsFailed=!0,e.ingredientsRequest=!1},setIngredientToView:function(e,t){e.ingredientToView=t.payload},resetIngredientToView:function(e){e.ingredientToView=null},resetIngredients:function(){return tt}}}),rt=nt.actions,ct=rt.getIngredientsRequest,at=rt.getIngredientsSuccess,st=rt.getIngredientsFailed,it=rt.setIngredientToView,ot=rt.resetIngredientToView,lt=rt.resetIngredients,dt=nt.reducer,ut=function(){return function(e){e(ct()),ue.getIngredients().then((function(t){t&&t.success?e(at(t.data)):e(st())})).catch((function(t){e(st()),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u043e\u0432: ".concat(t))}))}},jt=n(110),bt=n.n(jt),mt=function(){var e=v(S),t=v(q),n=v(U),c=v(B),a=v(Re),s=v(Ce),i=y(),o=Object(l.g)();Object(r.useEffect)((function(){i(ut())}),[i]);var j=Object(r.useCallback)((function(t){var n=t.target;if(!n.closest(".constructor-element__action")){var r,c=null===(r=n.closest("li"))||void 0===r?void 0:r.dataset.id,a=e.find((function(e){return e._id===c}));a&&i(it(a))}}),[i,e]),b=Object(r.useCallback)((function(){i(ot()),o.replace("/")}),[i,o]),m=Object(r.useCallback)((function(){i(lt())}),[i]),g=Object(r.useCallback)((function(){i(fe())}),[i]);return Object(_.jsx)("main",{className:bt.a.homePage,children:Object(_.jsxs)(et,{isLoading:n,hasError:c,hasData:Boolean(null===e||void 0===e?void 0:e.length),errorMessage:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",onErrorModalClose:m,children:[Object(_.jsxs)(d.a,{backend:u.a,children:[Object(_.jsx)(A,{onOpenModalWithIngredient:j}),Object(_.jsx)(Ve,{onOpenModalWithIngredient:j})]}),t&&Object(_.jsx)(O,{onClose:b,children:Object(_.jsx)(Ze,{})}),Object(_.jsx)(et,{hasError:s,hasData:Boolean(a),onErrorModalClose:g,errorMessage:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",children:Object(_.jsx)(O,{onClose:g,children:Object(_.jsx)(He,{})})})]})})},_t=n(26),gt={user:null,forgotPassword:!1,resetPassword:!1,registerRequest:!1,registerFailed:!1,loginRequest:!1,loginFailed:!1,userDataRequest:!1,userDataFailed:!1,forgotPasswordRequest:!1,forgotPasswordFailed:!1,resetPasswordRequest:!1,resetPasswordFailed:!1},pt=Object(H.b)({name:"auth",initialState:gt,reducers:{setUserName:function(e,t){e.user&&(e.user.name=t.payload)},setUserEmail:function(e,t){e.user&&(e.user.email=t.payload)},setUserPassword:function(e,t){e.user&&(e.user.password=t.payload)},postRegisterRequest:function(e){e.registerRequest=!0},postRegisterSuccess:function(e,t){var n=t.payload,r=n.name,c=n.email;e.user=Object(K.a)(Object(K.a)({},e.user),{},{name:r,email:c,password:""}),e.registerFailed=!1,e.registerRequest=!1},postRegisterFailed:function(e){e.registerFailed=!0,e.registerRequest=!1},postLoginRequest:function(e){e.loginRequest=!0},postLoginSuccess:function(e,t){var n=t.payload,r=n.name,c=n.email;e.user=Object(K.a)(Object(K.a)({},e.user),{},{name:r,email:c,password:""}),e.loginFailed=!1,e.loginRequest=!1},postLoginFailed:function(e){e.loginFailed=!0,e.loginRequest=!1},updateUserRequest:function(e){e.userDataRequest=!0},updateUserSuccess:function(e,t){var n=t.payload,r=n.name,c=n.email;e.user=Object(K.a)(Object(K.a)({},e.user),{},{name:r,email:c,password:""}),e.userDataFailed=!1,e.userDataRequest=!1},updateUserFailed:function(e){e.userDataFailed=!0,e.userDataRequest=!1},postForgotPasswordRequest:function(e){e.forgotPasswordRequest=!0},postForgotPasswordSuccess:function(e){e.forgotPassword=!0,e.forgotPasswordFailed=!1,e.forgotPasswordRequest=!1},postForgotPasswordFailed:function(e){e.forgotPasswordFailed=!0,e.forgotPasswordRequest=!1},postResetPasswordRequest:function(e){e.resetPasswordRequest=!0},postResetPasswordSuccess:function(e){e.resetPassword=!0,e.resetPasswordFailed=!1,e.resetPasswordRequest=!1},postResetPasswordFailed:function(e){e.registerFailed=!0,e.registerRequest=!1},resetAuth:function(){return gt}}}),ft=pt.actions,ht=ft.setUserName,Ot=ft.setUserEmail,xt=ft.setUserPassword,vt=ft.postRegisterRequest,yt=ft.postRegisterSuccess,kt=ft.postRegisterFailed,Nt=ft.postLoginRequest,wt=ft.postLoginSuccess,Ct=ft.postLoginFailed,Rt=ft.updateUserRequest,Et=ft.updateUserSuccess,It=ft.updateUserFailed,Pt=ft.postForgotPasswordRequest,Dt=ft.postForgotPasswordSuccess,Ft=ft.postForgotPasswordFailed,Tt=ft.postResetPasswordRequest,St=ft.postResetPasswordSuccess,qt=ft.postResetPasswordFailed,Ut=ft.resetAuth,Bt=pt.reducer,Lt=function(){return function(e){ue.postLogoutUser().then((function(t){t&&t.success&&(localStorage.removeItem("refreshToken"),oe("accessToken","",{expires:-1}),e(Ut()))})).catch((function(e){console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u0445\u043e\u0434\u0430 \u0438\u0437 \u0441\u0438\u0441\u0442\u0435\u043c\u044b: ".concat(e.message))}))}},Mt=function(){return function(e){e(Rt()),ue.getUserData().then((function(t){t&&t.success?e(Et(t.user)):e(It())})).catch((function(t){e(It()),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ".concat(t.message))}))}},zt=n(8),Jt=n.n(zt),Vt=function(){var e=Object(i.c)(Ee).user,t=Object(i.c)(De),n=Object(i.c)(Fe),c=Object(l.g)().location.state,a=Object(i.b)(),s=Object(r.useState)({email:"",password:""}),d=Object(x.a)(s,2),u=d[0],b=d[1],m=function(e){var t=e.target;b(Object(K.a)(Object(K.a)({},u),{},Object(_t.a)({},t.name,t.value)))},g=Object(r.useCallback)((function(e){var t;e.preventDefault(),a((t=u,function(e){e(Nt()),ue.postLoginUser(t).then((function(t){t&&t.success?(localStorage.setItem("refreshToken",t.refreshToken),oe("accessToken",t.accessToken),e(wt(t.user))):e(Ct())})).catch((function(t){e(Ct()),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438: ".concat(t.message))}))}))}),[a,u]),p=Object(r.useCallback)((function(){a(Ut())}),[a]);return e?Object(_.jsx)(l.a,{to:(null===c||void 0===c?void 0:c.from)||"/"}):Object(_.jsx)("main",{children:Object(_.jsx)("div",{className:"".concat(Jt.a.form__container),children:Object(_.jsx)(et,{hasError:n,hasData:!0,onErrorModalClose:p,errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0432\u043e\u0439\u0442\u0438 \u0432 \u043b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0434\u0430\u043d\u043d\u044b\u0445",children:Object(_.jsxs)("form",{className:"".concat(Jt.a.form),onSubmit:g,children:[Object(_.jsx)("h1",{className:"text_type_main-medium pb-6",children:"\u0412\u0445\u043e\u0434"}),Object(_.jsx)("div",{className:"".concat(Jt.a.form__field," pb-6"),children:Object(_.jsx)(j.Input,{type:"email",placeholder:"E-mail",onChange:m,value:u.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(_.jsx)("div",{className:"".concat(Jt.a.form__field," pb-6"),children:Object(_.jsx)(j.PasswordInput,{onChange:m,value:u.password,name:"password"})}),Object(_.jsx)(j.Button,{type:"primary",size:"medium",children:t?"\u0412\u0445\u043e\u0434...":"\u0412\u043e\u0439\u0442\u0438"}),Object(_.jsxs)("p",{className:"text_type_main-default text_color_inactive pt-20 pb-4",children:["\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?\xa0",Object(_.jsx)(o.b,{className:"".concat(Jt.a.form__link),to:"/register",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})]}),Object(_.jsxs)("p",{className:"text_type_main-default text_color_inactive",children:["\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0",Object(_.jsx)(o.b,{className:"".concat(Jt.a.form__link),to:"/forgot-password",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})]})]})})})})},At=n(80),Kt=n.n(At),Wt=function(e){var t,n=e.title,r=e.size,c=void 0===r?"default":r,a=e.children,s=e.onClick,i=Object(l.i)().url,d={"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440":"/","\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432":"/feed","\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442":"/profile","\u041f\u0440\u043e\u0444\u0438\u043b\u044c":"/profile","\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432":"".concat(i,"/orders"),"\u0412\u044b\u0445\u043e\u0434":"/login","\u041b\u043e\u0433\u043e":"/","\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e":"/"},u=null===(t=Object(l.i)({path:d[n],strict:!0,sensitive:!0}))||void 0===t?void 0:t.isExact,b={"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440":Object(_.jsx)(j.BurgerIcon,{type:u?"primary":"secondary"}),"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432":Object(_.jsx)(j.ListIcon,{type:u?"primary":"secondary"}),"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442":Object(_.jsx)(j.ProfileIcon,{type:u?"primary":"secondary"})};return Object(_.jsxs)(o.c,{to:{pathname:d[n]},exact:!0,className:"".concat(Kt.a.navigation__link," pt-4 pr-5 pb-4 pl-5"),activeClassName:Kt.a.navigation__link_active,onClick:s,children:[b[n],Object(_.jsx)("span",{className:"text text_type_main-".concat(c," ml-2"),children:a})]})},Ht=n(43),Gt=n.n(Ht),Qt=function(){var e=Object(i.c)(Ee).user;return Object(_.jsx)("header",{className:Gt.a.header,children:Object(_.jsx)("div",{className:"".concat(Gt.a.header__container," pt-4 pb-4"),children:Object(_.jsx)("nav",{children:Object(_.jsxs)("ul",{className:Gt.a.header__navigation,children:[Object(_.jsx)("li",{children:Object(_.jsx)(Wt,{title:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})}),Object(_.jsx)("li",{children:Object(_.jsx)(Wt,{title:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(_.jsx)("li",{className:Gt.a.header__logo,children:Object(_.jsx)(Wt,{title:"\u041b\u043e\u0433\u043e",children:Object(_.jsx)(j.Logo,{})})}),Object(_.jsx)("li",{children:Object(_.jsx)(Wt,{title:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442",children:e?null===e||void 0===e?void 0:e.name:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})})]})})})})},Zt=c.a.memo(Qt),$t=function(){var e=Object(i.c)(Ee).user,t=Object(i.c)(Ie),n=Object(i.c)(Pe),c=Object(l.g)().location.state,a=Object(i.b)(),s=Object(r.useState)({name:"",email:"",password:""}),d=Object(x.a)(s,2),u=d[0],b=d[1],m=function(e){var t=e.target;b(Object(K.a)(Object(K.a)({},u),{},Object(_t.a)({},t.name,t.value)))},g=Object(r.useCallback)((function(e){var t;e.preventDefault(),a((t=u,function(e){e(vt()),ue.postRegisterUser(t).then((function(t){t&&t.success?(localStorage.setItem("refreshToken",t.refreshToken),oe("accessToken",t.accessToken),e(yt(t.user))):e(kt())})).catch((function(t){e(kt()),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438: ".concat(t.message))}))}))}),[a,u]),p=Object(r.useCallback)((function(){a(Ut())}),[a]);return e?Object(_.jsx)(l.a,{to:(null===c||void 0===c?void 0:c.from)||"/"}):Object(_.jsx)("main",{className:"".concat(Jt.a.form__container),children:Object(_.jsx)(et,{hasError:n,hasData:!0,onErrorModalClose:p,errorMessage:"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u0441 \u0442\u0430\u043a\u0438\u043c \u043b\u043e\u0433\u0438\u043d\u043e\u043c \u0443\u0436\u0435 \u0441\u0443\u0449\u0435\u0441\u0442\u0432\u0443\u0435\u0442.",children:Object(_.jsxs)("form",{className:"".concat(Jt.a.form),onSubmit:g,children:[Object(_.jsx)("h1",{className:"text_type_main-medium pb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(_.jsx)("div",{className:"".concat(Jt.a.form__field," pb-6"),children:Object(_.jsx)(j.Input,{type:"text",placeholder:"\u0418\u043c\u044f",onChange:m,value:u.name,name:"name",error:!1,errorText:""})}),Object(_.jsx)("div",{className:"".concat(Jt.a.form__field," pb-6"),children:Object(_.jsx)(j.Input,{type:"email",placeholder:"E-mail",onChange:m,value:u.email,name:"email",error:!1,errorText:""})}),Object(_.jsx)("div",{className:"".concat(Jt.a.form__field," pb-6"),children:Object(_.jsx)(j.PasswordInput,{onChange:m,value:u.password,name:"password"})}),Object(_.jsx)(j.Button,{type:"primary",size:"medium",htmlType:"submit",name:"registerFormSubmitBtn",children:t?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f...":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"}),Object(_.jsxs)("p",{className:"text_type_main-default text_color_inactive pt-20 pb-4",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?\xa0",Object(_.jsx)(o.b,{className:"".concat(Jt.a.form__link),to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})},Xt=function(){var e=Object(i.c)(Ee).user,t=Object(i.c)(Se),n=Object(i.c)(qe),c=Object(i.c)(Ue),a=Object(i.b)(),s=Object(l.g)(),d=Object(l.h)().state,u=Object(r.useState)({email:""}),b=Object(x.a)(u,2),m=b[0],g=b[1],p=Object(r.useCallback)((function(e){e.preventDefault(),a(function(e){var t=e.email;return function(e){e(Pt()),ue.postForgotPassword({email:t}).then((function(t){t&&t.success?e(Dt()):e(Ft())})).catch((function(t){e(Ft()),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f: ".concat(t.message))}))}}(m))}),[a,m]),f=Object(r.useCallback)((function(){a(Ut())}),[a]);return e?Object(_.jsx)(l.a,{to:(null===d||void 0===d?void 0:d.from)||"/"}):n?Object(_.jsx)(l.a,{to:{pathname:"/reset-password",state:{from:s.location}}}):Object(_.jsx)("main",{className:"".concat(Jt.a.form__container),children:Object(_.jsx)(et,{hasError:c,hasData:!0,errorMessage:"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435",onErrorModalClose:f,children:Object(_.jsxs)("form",{className:"".concat(Jt.a.form),onSubmit:p,children:[Object(_.jsx)("h1",{className:"text_type_main-medium pb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(_.jsx)("div",{className:"".concat(Jt.a.form__field," pb-6"),children:Object(_.jsx)(j.Input,{type:"email",placeholder:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 e-mail",value:m.email,name:"email",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430",onChange:function(e){var t=e.target;g(Object(K.a)(Object(K.a)({},m),{},Object(_t.a)({},t.name,t.value)))}})}),Object(_.jsx)(j.Button,{type:"primary",size:"medium",children:t?"\u041e\u0442\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c \u043f\u0440\u043e\u0432\u0435\u0440\u043e\u0447\u043d\u044b\u0439 \u043a\u043e\u0434...":"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"}),Object(_.jsxs)("p",{className:"text_type_main-default text_color_inactive pt-20 pb-4",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0",Object(_.jsx)(o.b,{className:"".concat(Jt.a.form__link),to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})})},Yt=function(){var e=Object(i.c)(Ee).user,t=Object(i.c)(Be),n=Object(i.c)(Le),c=Object(l.g)().location.state,a=Object(i.b)(),s=Object(r.useState)({password:"",token:""}),d=Object(x.a)(s,2),u=d[0],b=d[1],m=function(e){var t=e.target;b(Object(K.a)(Object(K.a)({},u),{},Object(_t.a)({},t.name,t.value)))},g=Object(r.useCallback)((function(e){e.preventDefault(),a(function(e){var t=e.password,n=e.token;return function(e){e(Tt()),ue.postResetPassword({password:t,token:n}).then((function(t){t&&t.success?e(St()):e(qt())})).catch((function(t){e(qt()),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f: ".concat(t.message))}))}}(u))}),[a,u]),p=Object(r.useCallback)((function(){a(Ut())}),[a]);return e?Object(_.jsx)(l.a,{to:(null===c||void 0===c?void 0:c.from)||"/"}):e||"/forgot-password"===(null===c||void 0===c?void 0:c.from.pathname)?Object(_.jsx)("main",{className:"".concat(Jt.a.form__container),children:Object(_.jsx)(et,{hasError:n,hasData:!0,errorMessage:"\u041d\u0435 \u0443\u0434\u0430\u043b\u043e\u0441\u044c \u0441\u0431\u0440\u043e\u0441\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c. \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435",onErrorModalClose:p,children:Object(_.jsxs)("form",{className:"".concat(Jt.a.form),onSubmit:g,children:[Object(_.jsx)("h1",{className:"text_type_main-medium pb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(_.jsx)("div",{className:"".concat(Jt.a.form__field," pb-6"),children:Object(_.jsx)(j.PasswordInput,{onChange:m,value:u.password,name:"password"})}),Object(_.jsx)("div",{className:"".concat(Jt.a.form__field," pb-6"),children:Object(_.jsx)(j.Input,{type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430",onChange:m,value:u.token,name:"token",error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(_.jsx)(j.Button,{type:"primary",size:"medium",children:t?"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(_.jsxs)("p",{className:"text_type_main-default text_color_inactive pt-20",children:["\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?\xa0",Object(_.jsx)(o.b,{className:"".concat(Jt.a.form__link),to:"/login",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})})}):Object(_.jsx)(l.a,{to:"/login"})},en=n(81),tn=n.n(en),nn=function(){return Object(_.jsx)("main",{className:tn.a.notFound__container,children:Object(_.jsxs)("div",{className:tn.a.notFound__info,children:[Object(_.jsx)("h1",{className:"text text_type_digits-large  pb-4",children:"404"}),Object(_.jsx)("p",{className:"text_type_main-medium  pb-6",children:"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u0430"}),Object(_.jsx)(Wt,{title:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e",size:"medium",children:"\u041d\u0430 \u0433\u043b\u0430\u0432\u043d\u0443\u044e"})]})})},rn=n(28),cn=n.n(rn),an=function(){var e=Object(i.b)(),t=Object(i.c)(Ee).user,n=Object(i.c)(Te),c=Object(r.useState)(!0),a=Object(x.a)(c,2),s=a[0],o=a[1],d=Object(r.useRef)(null),u=Object(r.useRef)(null),b=Object(l.g)(),m=function(){o(!0)},g=Object(r.useCallback)((function(n){var r;n.preventDefault(),e((r=t,function(e){e(Rt()),ue.patchUserData(r).then((function(t){t&&t.success?e(Et(t.user)):e(It())})).catch((function(t){e(It()),console.log("\u041e\u0448\u0438\u0431\u043a\u0430 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u0434\u0430\u043d\u043d\u044b\u0445 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f: ".concat(t.message))}))}))}),[e,t]),p=Object(r.useCallback)((function(e){e.preventDefault(),b.replace({pathname:"/"})}),[b]);return Object(_.jsxs)("form",{className:"mt-30",onSubmit:g,onReset:p,children:[Object(_.jsx)("div",{className:"".concat(cn.a.profile__field),children:Object(_.jsx)(j.Input,{type:"text",placeholder:"\u0418\u043c\u044f",name:"name",value:t?t.name:"",icon:"EditIcon",onChange:function(t){var n=t.target;e(ht(n.value))},onBlur:m,onIconClick:function(){o(!1),setTimeout((function(){var e;return null===(e=d.current)||void 0===e?void 0:e.focus()}),0)},ref:d,disabled:s})}),Object(_.jsx)("div",{className:"".concat(cn.a.profile__field," pt-6"),children:Object(_.jsx)(j.EmailInput,{onChange:function(t){var n=t.target;e(Ot(n.value))},value:t?t.email:"",name:"email"})}),Object(_.jsx)("div",{className:"".concat(cn.a.profile__field," pt-6 pb-6"),children:Object(_.jsx)(j.Input,{type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",value:t?t.password:"",icon:"EditIcon",onChange:function(t){var n=t.target;e(xt(n.value))},onBlur:m,onIconClick:function(){o(!1),setTimeout((function(){var e;return null===(e=u.current)||void 0===e?void 0:e.focus()}),0)},ref:u,disabled:s,error:!1,errorText:"\u041e\u0448\u0438\u0431\u043a\u0430"})}),Object(_.jsx)(j.Button,{type:"secondary",size:"medium",name:"profileEditCancelButton",htmlType:"reset",children:"\u041e\u0442\u043c\u0435\u043d\u0430"}),Object(_.jsx)(j.Button,{type:"primary",size:"medium",name:"profileEditSubmitButton",htmlType:"submit",children:n?"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...":"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})]})},sn=function(){return Object(_.jsx)(nn,{})},on=function(){var e=Object(l.i)().path,t=Object(i.b)();Object(r.useEffect)((function(){t(Mt())}),[t]);var n=Object(r.useCallback)((function(){t(Lt())}),[t]);return Object(_.jsxs)("main",{className:"".concat(cn.a.profile__container),children:[Object(_.jsx)("nav",{children:Object(_.jsxs)("ul",{className:"".concat(cn.a.profile__navigation," mt-30"),children:[Object(_.jsx)("li",{children:Object(_.jsx)(Wt,{title:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c",size:"medium",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})}),Object(_.jsx)("li",{children:Object(_.jsx)(Wt,{title:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432",size:"medium",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})}),Object(_.jsx)("li",{children:Object(_.jsx)(Wt,{title:"\u0412\u044b\u0445\u043e\u0434",size:"medium",onClick:n,children:"\u0412\u044b\u0445\u043e\u0434"})}),Object(_.jsx)("li",{children:Object(_.jsx)("p",{className:"".concat(cn.a.profile__description," \n              text_type_main-small text_color_inactive mt-20 ml-7"),children:"\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435 \u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438\xa0\u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"})})]})}),Object(_.jsxs)(l.d,{children:[Object(_.jsx)(l.b,{path:e,exact:!0,children:Object(_.jsx)(an,{})}),Object(_.jsx)(l.b,{path:"".concat(e,"/orders"),exact:!0,children:Object(_.jsx)(sn,{})}),Object(_.jsx)(l.b,{children:Object(_.jsx)(nn,{})})]})]})},ln=n(111),dn=["children"],un=function(e){var t=e.children,n=Object(ln.a)(e,dn),r=Object(i.c)(Ee).user;return Object(_.jsx)(l.b,Object(K.a)(Object(K.a)({},n),{},{render:function(e){var n=e.location;return r?t:Object(_.jsx)(l.a,{to:{pathname:"/login",state:{from:n}}})}}))},jn=n(112),bn=n.n(jn),mn=function(){var e=v(S),t=v(U),n=v(B),c=y();Object(r.useEffect)((function(){c(ut())}),[c]);var a=Object(r.useCallback)((function(){c(lt())}),[c]);return Object(_.jsx)("main",{className:bn.a.indredient__container,children:Object(_.jsx)(et,{isLoading:t,hasError:n,hasData:Boolean(null===e||void 0===e?void 0:e.length),errorMessage:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443 \u043f\u043e\u0437\u0434\u043d\u0435\u0435",onErrorModalClose:a,children:Object(_.jsx)(Ze,{})})})},_n=function(){var e=Object(i.b)(),t=Object(l.g)(),n=Object(l.h)(),c=(null===n||void 0===n?void 0:n.state)&&n.state.background;Object(r.useEffect)((function(){e(Mt())}),[e]);var a=Object(r.useCallback)((function(){e(ot()),t.replace("/")}),[e,t]);return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Zt,{}),Object(_.jsxs)(l.d,{location:c||n,children:[Object(_.jsx)(l.b,{path:"/",exact:!0,children:Object(_.jsx)(mt,{})}),Object(_.jsx)(l.b,{path:"/login",exact:!0,children:Object(_.jsx)(Vt,{})}),Object(_.jsx)(l.b,{path:"/register",exact:!0,children:Object(_.jsx)($t,{})}),Object(_.jsx)(l.b,{path:"/forgot-password",exact:!0,children:Object(_.jsx)(Xt,{})}),Object(_.jsx)(l.b,{path:"/reset-password",exact:!0,children:Object(_.jsx)(Yt,{})}),Object(_.jsx)(un,{path:"/profile",children:Object(_.jsx)(on,{})}),Object(_.jsx)(un,{path:"/ingredients/:id",exact:!0,children:Object(_.jsx)(mn,{})}),Object(_.jsx)(l.b,{children:Object(_.jsx)(nn,{})})]}),c&&Object(_.jsx)(l.b,{path:"/ingredients:id",children:Object(_.jsx)(O,{onClose:a,children:Object(_.jsx)(Ze,{})})})]})},gn=n(40),pn=Object(H.a)({reducer:{order:he,burgerIngredients:dt,burgerConstructor:ce,auth:Bt},middleware:[gn.a],devTools:!1});s.a.render(Object(_.jsx)(c.a.StrictMode,{children:Object(_.jsx)(i.a,{store:pn,children:Object(_.jsx)(o.a,{children:Object(_.jsx)(_n,{})})})}),document.getElementById("root"))},24:function(e,t,n){e.exports={constructor__elements:"burger-constructor_constructor__elements__cuaLn",constructor__elements_dropArea:"burger-constructor_constructor__elements_dropArea__XgeNC",constructor__elements_canDrop:"burger-constructor_constructor__elements_canDrop__1Itgz",constructor__elements_canNotDrop:"burger-constructor_constructor__elements_canNotDrop__Loy8D",constructor__bunElement:"burger-constructor_constructor__bunElement__15ixT",constructor__nonBunElements:"burger-constructor_constructor__nonBunElements__3Ni4f",constructor__totalPriceContainer:"burger-constructor_constructor__totalPriceContainer__3S0-0",constructor__totalPrice:"burger-constructor_constructor__totalPrice__24T16",constructor__text:"burger-constructor_constructor__text__29Utu"}},27:function(e,t,n){e.exports={ingredient:"ingredient-details_ingredient__2hFcT",ingredient__name:"ingredient-details_ingredient__name__2xadH",ingredient__image:"ingredient-details_ingredient__image__3mDBz",ingredient__title:"ingredient-details_ingredient__title__2Rwjs",ingredient__compounds:"ingredient-details_ingredient__compounds__3fcIW",ingredient__compound:"ingredient-details_ingredient__compound__3rw40"}},28:function(e,t,n){e.exports={profile__container:"profile_profile__container__2NtLF",profile__navigation:"profile_profile__navigation__wc-Aa",profile__field:"profile_profile__field__2eqec",profile__description:"profile_profile__description__49uTk"}},41:function(e,t,n){e.exports={"ingredient__\u0441ard":"burger-ingredient_ingredient__\u0441ard__zgE2z","ingredient__\u0441ard_isDragging":"burger-ingredient_ingredient__\u0441ard_isDragging__39uQp",ingredient__price:"burger-ingredient_ingredient__price__Zb6Pu",ingredient__name:"burger-ingredient_ingredient__name__1XA3f"}},42:function(e,t,n){e.exports={ingredients__tabContainer:"burger-ingredients_ingredients__tabContainer__3aRpQ",ingredients__list:"burger-ingredients_ingredients__list__2rRB8",ingredient__category:"burger-ingredients_ingredient__category__2v9Jj"}},43:function(e,t,n){e.exports={header:"app-header_header__1iHLW",header__container:"app-header_header__container__1zQvH",header__navigation:"app-header_header__navigation__2N-rI",header__logo:"app-header_header__logo__27E10"}},53:function(e,t,n){e.exports={scroll:"app_scroll__1ZMNu"}},56:function(e,t,n){e.exports={order:"order-details_order__12ZdD",order__number:"order-details_order__number__g-Ijp",order__image:"order-details_order__image__1UwKi"}},75:function(e,t,n){e.exports={modal:"modal_modal__1DF1f",modal__closeIcon:"modal_modal__closeIcon__2BB1n"}},78:function(e,t,n){e.exports={draggableElement:"draggable-item_draggableElement__1G66w",draggableElement_isDragging:"draggable-item_draggableElement_isDragging__J3B_G"}},8:function(e,t,n){e.exports={form__container:"forms_form__container__2-Gp2",form:"forms_form__2rK1V",form__field:"forms_form__field__2caEc",form__link:"forms_form__link___LrY8"}},80:function(e,t,n){e.exports={navigation__link:"navigation-link_navigation__link__KGGEA",navigation__link_active:"navigation-link_navigation__link_active__3She4"}},81:function(e,t,n){e.exports={notFound__container:"not-found-404_notFound__container__31_Jx",notFound__info:"not-found-404_notFound__info__1-tzn",notFound__link:"not-found-404_notFound__link__3qQ0l"}}},[[205,1,2]]]);
//# sourceMappingURL=main.b424d9f3.chunk.js.map