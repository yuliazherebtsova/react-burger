{"version":3,"sources":["components/modal-overlay/modal-overlay.module.css","components/loader/loader.module.css","pages/home.module.css","components/orders-list/orders-list.module.css","pages/orders-history.module.css","pages/ingredient.module.css","pages/feed.module.css","pages/order-contents.module.css","components/order-contents/order-contents.module.css","components/order-item/order-item.module.css","utils/constants.ts","components/modal-overlay/modal-overlay.tsx","components/modal/modal.tsx","services/types/hooks.ts","services/selectors/constructor.ts","components/burger-ingredient/burger-ingredient.tsx","services/selectors/ingredients.ts","components/burger-ingredients/burger-ingredients.tsx","services/slices/constructor.ts","utils/cookies.ts","utils/api.ts","services/slices/order.ts","services/thunks/order.ts","components/draggable-item/draggable-item.tsx","services/selectors/order.ts","services/selectors/auth.ts","components/burger-constructor/burger-constructor.tsx","images/done.svg","components/order-details/order-details.tsx","components/loader/loader.tsx","components/error-indicator/error-indicator.tsx","services/slices/ingredients.ts","pages/home.tsx","services/slices/auth.ts","services/thunks/auth.ts","pages/login.tsx","components/navigation-link/navigation-link.tsx","components/app-header/app-header.tsx","pages/register.tsx","pages/forgot-password.tsx","pages/reset-password.tsx","pages/not-found-404.tsx","pages/profile-edit.tsx","services/selectors/orders.ts","utils/date-time.ts","services/middleware/socketMiddleware.tsx","components/order-item/order-item.tsx","components/orders-list/orders-list.tsx","services/slices/orders.ts","pages/orders-history.tsx","pages/profile.tsx","components/protected-route/protected-route.tsx","components/ingredient-details/ingredient-details.tsx","pages/ingredient.tsx","components/orders-dashboard/orders-dashboard.tsx","pages/feed.tsx","services/thunks/ingredients.ts","components/order-contents/order-contents.tsx","pages/order-contents.tsx","components/app/app.tsx","services/store.ts","index.tsx","components/burger-constructor/burger-constructor.module.css","components/ingredient-details/ingredient-details.module.css","components/app/app.module.css","pages/profile.module.css","components/orders-dashboard/orders-dashboard.module.css","components/burger-ingredient/burger-ingredient.module.css","components/burger-ingredients/burger-ingredients.module.css","components/app-header/app-header.module.css","components/order-details/order-details.module.css","components/modal/modal.module.css","components/draggable-item/draggable-item.module.css","components/navigation-link/navigation-link.module.css","pages/not-found-404.module.css","pages/forms.module.css"],"names":["module","exports","portal","document","getElementById","ModalOverlay","onClose","className","overlayStyles","overlay","onClick","onKeyPress","Modal","children","useEffect","handleEscPress","evt","key","addEventListener","removeEventListener","ReactDOM","createPortal","modalStyles","modal","modal__closeIcon","type","useSelector","selectorHook","useDispatch","dispatchHook","selectBunElement","state","burgerConstructor","bunElement","selectDraggableElements","draggableElements","getTotalPrice","createSelector","price","reduce","acc","item","BurgerIngredient","id","image","name","onOpenModalWithIngredient","ingredientCounter","filter","_id","length","getIngredientCounter","location","useLocation","useDrag","collect","monitor","isDragging","dragRef","dragPreview","onClickToIngredient","useCallback","to","pathname","background","ingredientStyles","ingredient__сard","ingredient__сard_isDragging","ref","DragPreviewImage","src","connect","alt","count","size","ingredient__price","ingredient__name","React","memo","selectIngredients","burgerIngredients","ingredients","selectIngredientToView","ingredientToView","selectIngredientsRequest","ingredientsRequest","selectIngredientsFailed","ingredientsFailed","BurgerIngredients","ingredientCategories","bun","useRef","sauce","main","useState","currentTab","setCurrentTab","handleTabClick","current","scrollIntoView","behavior","ingredientsByType","Object","keys","map","items","el","groupIngredientsByType","handleSectionScroll","scrollPosition","target","scrollTop","positionOfSauseSection","offsetTop","positionOfMainSection","ingredientsStyles","ingredients__container","ingredients__tabContainer","values","index","value","active","ingredients__list","appStyles","scroll","onScroll","ingredient__category","constructorInitialState","constructorSlice","createSlice","initialState","reducers","addBunElement","action","payload","addNonBunElement","push","deleteElement","newElements","uid","udpadeElementsOrder","newIndex","draggableElement","oldIndex","findIndex","update","$splice","resetConstructor","actions","getCookie","matches","cookie","match","RegExp","replace","decodeURIComponent","setCookie","props","exp","expires","d","Date","setTime","getTime","toUTCString","encodeURIComponent","updatedCookie","propName","propValue","Api","baseUrl","headers","checkResponse","res","ok","json","then","err","Promise","reject","this","fetch","method","body","JSON","stringify","user","email","password","token","localStorage","getItem","accessToken","set","catch","message","postUpdateToken","setItem","refreshToken","requestHeaders","Headers","api","orderInitialState","orderNumber","orderRequest","orderFailed","orderSlice","postOrderRequest","postOrderSuccess","postOrderFailed","resetOrder","postOrder","ingredientsData","dispatch","success","order","number","console","log","DraggableItem","findDraggableElement","moveDraggableElement","originalIndex","draggableElementIndex","end","_","didDrop","useDrop","accept","hover","draggedUid","overIndex","dropTarget","handleIngredientDelete","draggableItemStyles","draggableElement_isDragging","node","text","thumbnail","handleClose","selectOrderRequest","selectOrderFailed","selectOrderNumber","selectUserData","auth","selectRegisterRequest","registerRequest","selectRegisterFailed","registerFailed","selectLoginRequest","loginRequest","selectLoginFailed","loginFailed","selectUserDataRequest","userDataRequest","selectForgotPasswordRequest","forgotPasswordRequest","selectForgotPassword","forgotPassword","selectForgotPasswordFailed","forgotPasswordFailed","selectResetPasswordRequest","resetPasswordRequest","selectResetPasswordFailed","resetPasswordFailed","BurgerConstructor","totalPrice","history","useHistory","handleIngredientDrop","draggedItem","find","uuidv4","handleCanIngredientDrop","drop","itemId","canDrop","isHover","isOver","isCanDrop","sortTarget","isConstructorEmpty","constructorElementsClass","constructorStyles","constructor__elements","constructor__elements_dropArea","constructor__elements_canDrop","constructor__elements_canNotDrop","constructor__bunElement","isLocked","constructor__nonBunElements","constructor__text","constructor__totalPriceContainer","constructor__totalPrice","disabled","htmlType","OrderDetails","orderStyles","order__number","order__image","doneImage","Loader","styles","loader","ErrorIndicator","isLoading","hasError","hasData","errorMessage","onErrorModalClose","ingredientsInitialState","ingreduentsSlice","getIngredientsRequest","getIngredientsSuccess","getIngredientsFailed","setIngredientToView","resetIngredientToView","resetIngredients","HomePage","handleIngredientModalOpen","eventTarget","closest","ingredientId","dataset","ingredient","handleErrorModalClose","handleOrderDetailsModalClose","homePage","Boolean","DndProvider","backend","HTML5Backend","authInitialState","resetPassword","userDataFailed","authSlice","setUserName","setUserEmail","setUserPassword","postRegisterRequest","postRegisterSuccess","postRegisterFailed","postLoginRequest","postLoginSuccess","postLoginFailed","updateUserRequest","updateUserSuccess","updateUserFailed","postForgotPasswordRequest","postForgotPasswordSuccess","postForgotPasswordFailed","postResetPasswordRequest","postResetPasswordSuccess","postResetPasswordFailed","resetAuth","signOut","postLogoutUser","removeItem","getUserData","LoginPage","form","setValue","onChange","onLoginFormSubmit","userData","preventDefault","postLoginUser","from","formStyles","form__container","onSubmit","form__field","placeholder","error","errorText","form__link","NavigationLink","title","url","useRouteMatch","titleToPath","Конструктор","Профиль","Выход","Лого","isActive","path","strict","sensitive","isExact","titleToIcon","exact","navigation__link","activeClassName","navigation__link_active","AppHeader","header","header__container","header__navigation","header__logo","RegisterPage","onRegistrationFormSubmit","postRegisterUser","ForgotPasswordPage","isPasswordForgotten","onForgotPasswordFormSubmit","postForgotPassword","ResetPasswordPage","onResetPasswordFormSubmit","postResetPassword","NotFound404","notFound__container","notFound__info","ProfileEditPage","fieldDisabled","setDisabled","nameRef","passwordRef","onBlur","onEditFormSubmit","patchUserData","onEditFormReset","onReset","profile__field","icon","onIconClick","setTimeout","focus","selectWsConnected","orders","wsConnected","selectWsError","wsError","selectOrders","selectTotalOrders","total","selectTotalTodayOrders","totalToday","selectOrderToView","orderToView","getOrderPrice","getHowLongAgoDate","wsUrl","wsActions","dateString","todayDate","otherDate","formatter","Intl","DateTimeFormat","timeStyle","diffDays","Math","round","abs","valueOf","getDate","getMonth","getFullYear","format","OrderItem","status","createdAt","onOpenModal","statusToColor","created","orderItem__status_created","pending","orderItem__status_progress","done","orderItem__status_done","orderPrice","ingredientImages","Array","Set","image_mobile","sort","hiddenIconsCount","isProfilePage","onClickToOrder","orderItem__container","orderItem__header","orderItem__createdAt","orderItem__title","orderItem__status","orderItem__details","orderItem__images","slice","orderItem__imageOverlay","orderItem__image","orderItem__imagesCount","orderItem__price","OrdersList","onOpenModalWithOrder","isFeedPage","reverse","orders__list","ordersInitialState","ordersSlice","getAllOrdersWsStart","getUserOrdersWsStart","getOrdersWsSuccess","getOrdersWsError","getOrdersWsClosed","getOrders","setOrderToView","resetOrderToView","resetOrders","OrdersHistoryPage","handleOrderModalOpen","orderId","ordersHistory__container","ProfilePage","onLogoutClick","profile__container","profile__navigation","profile__description","ProtectedRoute","rest","render","IngredientDetails","splittedUrl","split","idFromUrl","ingredientDetailsStyles","ingredient__title","ingredient__image","ingredient__compounds","ingredient__compound","calories","proteins","fat","carbohydrates","IngredientPage","indredient__container","OrdersDashboard","dashboard","dashboard__list","dashboard__list_done","dashboard__number","dashboard__total","dashboard__totalToday","FeedPage","ordersConnected","ordersFailed","feedPage","getIngredientsData","getIngredients","data","OrderContents","orderContents__status_created","orderContents__status_progress","orderContents__status_done","statusColor","statusText","orderContents__container","orderContents__title","orderContents__status","orderContents__ingredients","freqDict","forEach","getIngredientbyFreq","orderContents__ingredient","orderContents__imageOverlay","orderContents__image","orderContents__price","orderContents__details","orderContents__createdAt","OrderContentsPage","order__container","App","handleIngredientModalClose","handleOrderModalClose","goBack","wsOrdersActions","wsAllOrdersInit","wsUserOrdersInit","onOpen","onError","onMessage","store","configureStore","reducer","orderReducer","ingredientsReducer","constructorReducer","authReducer","ordersReducer","middleware","thunk","socket","next","WebSocket","onopen","event","onerror","onmessage","parsedData","parse","restParsedData","onclose","devTools","process","StrictMode"],"mappings":"uGACAA,EAAOC,QAAU,CAAC,QAAU,iC,oBCA5BD,EAAOC,QAAU,CAAC,OAAS,uBAAuB,KAAO,uB,oBCAzDD,EAAOC,QAAU,CAAC,SAAW,yB,oBCA7BD,EAAOC,QAAU,CAAC,aAAe,oC,oBCAjCD,EAAOC,QAAU,CAAC,yBAA2B,mD,oBCA7CD,EAAOC,QAAU,CAAC,sBAAwB,4C,oBCA1CD,EAAOC,QAAU,CAAC,SAAW,yB,oBCA7BD,EAAOC,QAAU,CAAC,iBAAmB,2C,yCCArCD,EAAOC,QAAU,CAAC,yBAA2B,iDAAiD,sBAAwB,8CAA8C,+BAAiC,uDAAuD,6BAA+B,qDAAqD,2BAA6B,mDAAmD,0BAA4B,kDAAkD,4BAA8B,oDAAoD,qBAAuB,6CAA6C,uBAAyB,+CAA+C,qBAAuB,+C,mBCAnuBD,EAAOC,QAAU,CAAC,qBAAuB,yCAAyC,kBAAoB,sCAAsC,2BAA6B,+CAA+C,yBAA2B,6CAA6C,mBAAqB,uCAAuC,kBAAoB,sCAAsC,iBAAmB,qCAAqC,uBAAyB,2CAA2C,wBAA0B,4CAA4C,iBAAmB,uC,qICG9lBC,EAASC,SAASC,eAAe,gB,yBCW/BC,EARqC,SAAC,GAAD,IAAGC,EAAH,EAAGA,QAAH,OAClD,qBACEC,UAAWC,IAAcC,QACzBC,QAASJ,EACTK,WAAYL,K,iBCuBDM,EAvBsB,SAAC,GAA2B,IAAzBC,EAAwB,EAAxBA,SAAUP,EAAc,EAAdA,QAShD,OARAQ,qBAAU,WACR,IAAMC,EAAiB,SAACC,GACN,WAAZA,EAAIC,KAAkBX,KAG5B,OADAH,SAASe,iBAAiB,UAAWH,GAC9B,kBAAMZ,SAASgB,oBAAoB,UAAWJ,MACpD,CAACT,IAEGc,IAASC,aACd,qCACE,cAAC,EAAD,CAAcf,QAASA,IACvB,sBAAKC,UAAS,UAAKe,IAAYC,MAAjB,SAAd,UACE,qBAAKhB,UAAWe,IAAYE,iBAA5B,SACE,cAAC,YAAD,CAAWd,QAASJ,EAASmB,KAAK,cAEnCZ,QAGLX,I,QCrBSwB,EAAgDC,IAGhDC,EAAc,kBAAMC,e,kCCRpBC,EAAmB,SAACC,GAAD,OAC9BA,EAAMC,kBAAkBC,YACbC,EAA0B,SAACH,GAAD,OACrCA,EAAMC,kBAAkBG,mBAEbC,EAAgBC,YAC3BP,EACAI,GACA,SAACD,EAAYE,GAMX,OALsC,QAApBF,EAAWR,KAAoC,EAAnBQ,EAAWK,MAAY,GACzCH,EAAkBI,QAC5C,SAACC,EAAKC,GAAN,OAAeD,EAAMC,EAAKH,QAC1B,M,iBCOAI,EAAsD,SAAC,GAMtD,IALLC,EAKI,EALJA,GACAC,EAII,EAJJA,MACAN,EAGI,EAHJA,MACAO,EAEI,EAFJA,KACAC,EACI,EADJA,0BAEMC,EAAoBrB,YDRQ,SAACiB,GAAD,OAClCN,YACEP,EACAI,GACA,SAACD,EAAYE,GAAb,MACE,CAACF,GAAD,mBAAgBE,GAAhB,CAAmCF,IAAYe,QAC7C,SAACP,GAAD,OAAUA,EAAKQ,MAAQN,KACvBO,UCCgCC,CAAqBR,IAErDS,EAAsBC,cAE5B,EAA+CC,YAC7C,CACE7B,KAAM,mBACNgB,KAAM,CAAEE,MACRY,QAAS,SAACC,GAAD,MAAc,CACrBC,WAAYD,EAAQC,gBAGxB,CAACd,IARH,mBAASc,EAAT,KAASA,WAAcC,EAAvB,KAAgCC,EAAhC,KAWMC,EAAsBC,uBAC1B,SAAC7C,GAAD,OACE8B,EAA0B9B,KAC5B,CAAC8B,IAGH,OACE,cAAC,IAAD,CACEgB,GAAI,CACFC,SAAS,gBAAD,OAAkBpB,GAG1BZ,MAAO,CAAEiC,WAAYZ,IALzB,SAQE,qBACE7C,UAAS,UAAK0D,IAAiBC,sBAAtB,oBACTT,GAAcQ,IAAiBE,iCADtB,SAETzD,QAASkD,EACTjD,WAAYiD,EACZQ,IAAKV,EACL,UAASf,EANX,UAQE,cAAC0B,EAAA,EAAD,CAAkBC,IAAK1B,EAAO2B,QAASZ,IACvC,qBAAKW,IAAK1B,EAAO4B,IAAK3B,IACC,IAAtBE,GACC,cAAC,UAAD,CAAS0B,MAAO1B,EAAmB2B,KAAK,YAE1C,sBAAKnE,UAAS,UAAK0D,IAAiBU,kBAAtB,cAAd,UACE,sBAAMpE,UAAU,qCAAhB,SAAsD+B,IACtD,cAAC,eAAD,CAAcb,KAAK,eAErB,mBACElB,UAAS,UAAK0D,IAAiBW,iBAAtB,qCADX,SAGG/B,UAOIgC,MAAMC,KAAKpC,GCnFbqC,EAAoB,SAAChD,GAAD,OAC/BA,EAAMiD,kBAAkBC,aACbC,EAAyB,SAACnD,GAAD,OACpCA,EAAMiD,kBAAkBG,kBACbC,EAA2B,SAACrD,GAAD,OACtCA,EAAMiD,kBAAkBK,oBACbC,EAA0B,SAACvD,GAAD,OACrCA,EAAMiD,kBAAkBO,mB,kCCgBpBC,EAAwD,SAAC,GAExD,IADL1C,EACI,EADJA,0BAEMmC,EAAcvD,EAAYqD,GAE1BU,EAA8C,CAClDC,IAAK,CACH7C,KAAM,iCACNuB,IAAKuB,iBAA2B,OAElCC,MAAO,CACL/C,KAAM,iCACNuB,IAAKuB,iBAA2B,OAElCE,KAAM,CACJhD,KAAM,6CACNuB,IAAKuB,iBAA2B,QAIpC,EAAoCG,mBAAS,kCAA7C,mBAAOC,EAAP,KAAmBC,EAAnB,KAEMC,EAAiBpC,uBACrB,gBAAGhB,EAAH,EAAGA,KAAMuB,EAAT,EAASA,IAAT,OACE,WAAO,IAAD,EACJ4B,EAAcnD,GACd,UAAAuB,EAAI8B,eAAJ,SAAaC,eAAe,CAAEC,SAAU,cAE5C,IAeIC,EAZyBxC,uBAC7B,kBAEIyC,OAAOC,KAAKd,GACZe,KAAI,SAACvF,GAAD,MAAU,CACd4B,KAAM4C,EAAqBxE,GAAK4B,KAChC4D,MAAOxB,EAAYjC,QAAO,SAAC0D,GAAD,OAAQA,EAAGjF,OAASR,KAC9CmD,IAAKqB,EAAqBxE,GAAKmD,UAEnC,CAACqB,EAAsBR,GAGC0B,GAEpBC,EAAsB/C,uBAC1B,SAAC7C,GAAwB,IAAD,IAEhB6F,EADY7F,EAAI8F,OACWC,UAE3BC,EAAsB,UAC1BvB,EAAqBG,MAAMxB,IAAI8B,eADL,aAC1B,EAAwCe,UACpCC,EAAqB,UACzBzB,EAAqBI,KAAKzB,IAAI8B,eADL,aACzB,EAAuCe,UAKvCjB,EAHAgB,GACAH,EAPmB,KAOcG,EAEnB,iCAEdE,GACAL,EAZmB,KAYcK,EAEnB,iCAEA,gDAGlB,CACElB,EACAP,EAAqBG,MAAMxB,IAC3BqB,EAAqBI,KAAKzB,MAI9B,OACE,0BAAS7D,UAAW4G,IAAkBC,uBAAtC,UACE,oBAAI7G,UAAU,uCAAd,mGACA,8BACE,oBAAIA,UAAW4G,IAAkBE,0BAAjC,SACGf,OAAOgB,OAAO7B,GAAsBe,KAAI,SAAC/E,EAAM8F,GAAP,OAEvC,aADA,CACA,eACE,cAAC,MAAD,CACEC,MAAO/F,EAAKoB,KACZ4E,OAAQ1B,IAAetE,EAAKoB,KAC5BnC,QAASuF,EAAe,CACtBpD,KAAMpB,EAAKoB,KACXuB,IAAK3C,EAAK2C,MALd,SAQG3C,EAAKoB,QATD0E,UAef,kCACE,oBACEhH,UAAS,UAAK4G,IAAkBO,kBAAvB,YAA4CC,IAAUC,OAAtD,cACTC,SAAUjB,EAFZ,SAIGP,EAAkBG,KAAI,WAAuBe,GAAvB,IAAG1E,EAAH,EAAGA,KAAM4D,EAAT,EAASA,MAAOrC,EAAhB,EAAgBA,IAAhB,OAErB,cADA,CACA,gBACE,oBAAI7D,UAAU,uCAAuC6D,IAAKA,EAA1D,SACGvB,IAEH,oBACEtC,UAAS,UAAK4G,IAAkBW,qBAAvB,cADX,SAGGrB,EAAMD,KAAI,SAAC/D,GAAD,OACT,cAAC,EAAD,CAEEE,GAAIF,EAAKQ,IACTJ,KAAMJ,EAAKI,KACXP,MAAOG,EAAKH,MACZM,MAAOH,EAAKG,MACZE,0BAA2BA,GALtBL,EAAKQ,YATTsE,cA0BN1C,MAAMC,KAAKU,G,0CCpJpBuC,EAA6C,CACjD9F,WAAY,GACZE,kBAAmB,IAGf6F,EAAmBC,YAAY,CACnCpF,KAAM,cACNqF,aAAcH,EACdI,SAAU,CACRC,cADQ,SACMrG,EAAOsG,GACnBtG,EAAME,WAAaoG,EAAOC,SAE5BC,iBAJQ,SAISxG,EAAOsG,GACtBtG,EAAMI,kBAAkBqG,KAAKH,EAAOC,UAEtCG,cAPQ,SAOM1G,EAAOsG,GACnB,IAAMK,EAAc3G,EAAMI,kBAAkBa,QAC1C,SAACP,GAAD,OAAUA,EAAKkG,MAAQN,EAAOC,WAEhCvG,EAAMI,kBAAoBuG,GAE5BE,oBAbQ,SAcN7G,EACAsG,GAKA,MAAuCA,EAAOC,QAAtCO,EAAR,EAAQA,SAAUC,EAAlB,EAAkBA,iBACZC,EAAWhH,EAAMI,kBAAkB6G,WACvC,SAACvG,GAAD,OAAUA,EAAKkG,MAAQG,EAAiBH,OAEpCD,EAAcO,IAAOlH,EAAMI,kBAAmB,CAClD+G,QAAS,CACP,CAACH,EAAU,GACX,CAACF,EAAU,EAAGC,MAGlB/G,EAAMI,kBAAoBuG,GAE5BS,iBAhCQ,WAiCN,OAAOpB,MAKN,EAMHC,EAAiBoB,QALnBhB,EADK,EACLA,cACAG,GAFK,EAELA,iBACAE,GAHK,EAGLA,cACAG,GAJK,EAILA,oBACAO,GALK,EAKLA,iBAGanB,KAAf,Q,oBCtDO,SAASqB,GAAUxG,GACxB,IAAMyG,EAAUnJ,SAASoJ,OAAOC,MAC9B,IAAIC,OAAJ,kBACa5G,EAAK6G,QAAQ,+BAAgC,QAD1D,cAIF,OAAOJ,EAAUK,mBAAmBL,EAAQ,IAAM,GAQ7C,SAASM,GACd/G,EACA2E,EACAqC,GAKA,IAAIC,GADJD,EAAQA,GAAS,IACDE,QAChB,GAAmB,kBAARD,GAAoBA,EAAK,CAClC,IAAME,EAAI,IAAIC,KACdD,EAAEE,QAAQF,EAAEG,UAAkB,IAANL,GACxBA,EAAMD,EAAME,QAAUC,EAEpBF,GAAOA,aAAeG,OACxBJ,EAAME,QAAUD,EAAIM,eAEtB5C,EAAQ6C,mBAAmB7C,GAC3B,IAAI8C,EAAa,UAAMzH,EAAN,YAAc2E,GAC/B,IAAK,IAAM+C,KAAYV,EAAO,CAC5BS,GAAa,YAASC,GACtB,IAAMC,EAAYX,EAAMU,IACN,IAAdC,IACFF,GAAa,WAAQE,IAGzBrK,SAASoJ,OAASe,E,ICpCCG,G,WAKnB,WAAYC,EAAiBC,GAAmB,0BAJvCD,aAIsC,OAFtCC,aAEsC,OAcvCC,cAAgB,SAACC,GAAD,OACtBA,EAAIC,GACAD,EAAIE,OACJF,EAAIE,OAAOC,MAAK,SAACC,GAAD,OAAuBC,QAAQC,OAAOF,OAhB1DG,KAAKV,QAAUA,EACfU,KAAKT,QAAUA,E,mDAuBjB,WACE,OAAOU,MAAM,GAAD,OAAID,KAAKV,QAAT,gBAAgC,CAC1CC,QAASS,KAAKT,UACbK,KAAKI,KAAKR,iB,uBASf,SAAU3F,GACR,OAAOoG,MAAM,GAAD,OAAID,KAAKV,QAAT,WAA2B,CACrCY,OAAQ,OACRX,QAASS,KAAKT,QACdY,KAAMC,KAAKC,UAAU,CACnBxG,kBAED+F,KAAKI,KAAKR,iB,8BASf,SAAiBc,GACf,IAAQ7I,EAA0B6I,EAA1B7I,KAAM8I,EAAoBD,EAApBC,MAAOC,EAAaF,EAAbE,SACrB,OAAOP,MAAM,GAAD,OAAID,KAAKV,QAAT,kBAAkC,CAC5CY,OAAQ,OACRX,QAASS,KAAKT,QACdY,KAAMC,KAAKC,UAAU,CACnB5I,OACA8I,QACAC,eAEDZ,KAAKI,KAAKR,iB,2BASf,SAAcc,GACZ,IAAQC,EAAoBD,EAApBC,MAAOC,EAAaF,EAAbE,SACf,OAAOP,MAAM,GAAD,OAAID,KAAKV,QAAT,eAA+B,CACzCY,OAAQ,OACRX,QAASS,KAAKT,QACdY,KAAMC,KAAKC,UAAU,CACnBE,QACAC,eAEDZ,KAAKI,KAAKR,iB,4BASf,WACE,IAAMiB,EAAQC,aAAaC,QAAQ,gBACnC,OAAOV,MAAM,GAAD,OAAID,KAAKV,QAAT,gBAAgC,CAC1CY,OAAQ,OACRX,QAASS,KAAKT,QACdY,KAAMC,KAAKC,UAAU,CACnBI,YAEDb,KAAKI,KAAKR,iB,yBASf,WAA6B,IAAD,OACpBoB,EAAc3C,GAAU,eAE9B,OADA+B,KAAKT,QAAQsB,IAAI,gBAAiBD,GAC3BX,MAAM,GAAD,OAAID,KAAKV,QAAT,cAA8B,CACxCC,QAASS,KAAKT,UAEbK,KAAKI,KAAKR,eACVsB,OAAM,SAACjB,GACN,MAAoB,gBAAhBA,EAAIkB,QACC,EAAKC,kBAAkBpB,MAAK,SAACH,GAClCiB,aAAaO,QAAQ,eAAgBxB,EAAIyB,cACzC1C,GAAU,cAAeiB,EAAImB,aAC7B,EAAKrB,QAAQsB,IAAI,gBAAiBpB,EAAImB,aACtCX,MAAM,GAAD,OAAI,EAAKX,QAAT,cAA8B,CACjCC,QAAS,EAAKA,UAEbK,KAAK,EAAKJ,kBAGVM,QAAQC,OAAOF,Q,2BAU5B,SAAcS,GACZ,IAAQ7I,EAA0B6I,EAA1B7I,KAAM8I,EAAoBD,EAApBC,MAAOC,EAAaF,EAAbE,SAEfI,EAAc3C,GAAU,eAG9B,OAFA+B,KAAKT,QAAQsB,IAAI,gBAAiBD,GAE3BX,MAAM,GAAD,OAAID,KAAKV,QAAT,cAA8B,CACxCY,OAAQ,QACRX,QAASS,KAAKT,QACdY,KAAMC,KAAKC,UAAU,CACnB5I,OACA8I,QACAC,eAEDZ,KAAKI,KAAKR,iB,gCASf,YAAgE,IAA3Ce,EAA0C,EAA1CA,MACnB,OAAON,MAAM,GAAD,OAAID,KAAKV,QAAT,mBAAmC,CAC7CY,OAAQ,OACRX,QAASS,KAAKT,QACdY,KAAMC,KAAKC,UAAU,CACnBE,YAEDX,KAAKI,KAAKR,iB,+BASf,YAMkB,IALhBgB,EAKe,EALfA,SACAC,EAIe,EAJfA,MAKA,OAAOR,MAAM,GAAD,OAAID,KAAKV,QAAT,yBAAyC,CACnDY,OAAQ,OACRX,QAASS,KAAKT,QACdY,KAAMC,KAAKC,UAAU,CACnBG,WACAC,YAEDb,KAAKI,KAAKR,iB,6BASf,WACE,IAAMiB,EAAQC,aAAaC,QAAQ,gBACnC,OAAOV,MAAM,GAAD,OAAID,KAAKV,QAAT,eAA+B,CACzCY,OAAQ,OACRX,QAASS,KAAKT,QACdY,KAAMC,KAAKC,UAAU,CACnBI,YAEDb,KAAKI,KAAKR,mB,KAIX2B,GAA8B,IAAIC,QAExCD,GAAeN,IAAI,eAAgB,oBAE5B,IAAMQ,GAAM,IAAIhC,GVxOC,wCUwOa8B,IChO/BG,GAAiC,CACrCC,YAAa,KACbC,cAAc,EACdC,aAAa,GAGFC,GAAa7E,YAAY,CACpCpF,KAAM,QACNqF,aAAcwE,GACdvE,SAAU,CACR4E,iBADQ,SACShL,GACfA,EAAM6K,cAAe,GAEvBI,iBAJQ,SAISjL,EAAOsG,GACtBtG,EAAM4K,YAActE,EAAOC,QAC3BvG,EAAM8K,aAAc,EACpB9K,EAAM6K,cAAe,GAEvBK,gBATQ,SASQlL,GACdA,EAAM8K,aAAc,EACpB9K,EAAM6K,cAAe,GAEvBM,WAbQ,WAcN,OAAOR,OAKN,GAKHI,GAAW1D,QAJb2D,GADK,GACLA,iBACAC,GAFK,GAELA,iBACAC,GAHK,GAGLA,gBACAC,GAJK,GAILA,WAGaJ,MAAf,QCTeK,GAtBb,SAACC,GAAD,OACA,SAACC,GACCA,EAASN,MACTN,GACGU,UAAUC,GACVpC,MAAK,SAACH,GACDA,GAAOA,EAAIyC,QACbD,EAASL,GAAiBnC,EAAI0C,MAAMC,SAEpCH,EAASJ,SAGZjC,MAAK,WACJqC,EAASlE,SAEV+C,OAAM,SAACjB,GACNoC,EAASJ,MAETQ,QAAQC,IAAR,kJAAyCzC,S,oBCF3C0C,GAAgD,SAAC,GAShD,IARLhL,EAQI,EARJA,GACAgG,EAOI,EAPJA,IACA9F,EAMI,EANJA,KACAP,EAKI,EALJA,MACAM,EAII,EAJJA,MACAgB,EAGI,EAHJA,oBACAgK,EAEI,EAFJA,qBACAC,EACI,EADJA,qBAEMR,EAAWzL,IAEXkM,EAAgBF,EAAqBjF,GAAKoF,sBAEhD,EAA+CzK,aAC7C,iBAAO,CACL7B,KAAM,gBACNgB,KAAM,CAAEkG,MAAKmF,iBACbvK,QAAS,SAACC,GAAD,MAAc,CACrBC,WAAYD,EAAQC,eAEtBuK,IAAK,SAACC,EAAGzK,GACFA,EAAQ0K,WACXL,EAAqBlF,EAAKmF,OAIhC,CAACnF,EAAKkF,EAAsBC,IAb9B,mBAASrK,EAAT,KAASA,WAAcC,EAAvB,KAAgCC,EAAhC,KAgBA,EAAuBwK,aACrB,iBAAO,CACLC,OAAQ,gBACRC,MAFK,YAEwC,IAAhCC,EAA+B,EAApC3F,IACN,GAAI2F,IAAe3F,EAAK,CACtB,IAA+B4F,EAC7BX,EAAqBjF,GADfoF,sBAERF,EAAqBS,EAAYC,QAIvC,CAACX,EAAsBC,IAXhBW,EAAT,oBAcMC,EAAyB5K,uBAAY,WACzCwJ,EAAS5E,GAAcE,MACtB,CAACA,EAAK0E,IAET,OACE,qBACE9M,UAAS,UAAKmO,KAAoB5F,iBAAzB,oBAEPrF,GAAciL,KAAoBC,4BAF3B,cAKTjO,QAASkD,EACTjD,WAAYiD,EACZ,UAASjB,EACTyB,IAAK,SAACwK,GAAD,OAAUlL,EAAQ8K,EAAWI,KATpC,UAWE,cAAC,WAAD,CAAUnN,KAAK,YACf,cAAC4C,EAAA,EAAD,CAAkBC,IAAK1B,EAAO2B,QAASZ,IACvC,cAAC,qBAAD,CACEkL,KAAMhM,EACNP,MAAOA,EACPwM,UAAWlM,EACXmM,YAAaN,MAZV9F,IAkBI9D,OAAMC,KAAK6I,IChGbqB,GAAqB,SAACjN,GAAD,OAChCA,EAAMwL,MAAMX,cACCqC,GAAoB,SAAClN,GAAD,OACjCA,EAAMwL,MAAMV,aACDqC,GAAoB,SAACnN,GAAD,OAAuBA,EAAMwL,MAAMZ,aCJvDwC,GAAiB,SAACpN,GAAD,OAAuBA,EAAMqN,MAC9CC,GAAwB,SAACtN,GAAD,OACnCA,EAAMqN,KAAKE,iBACAC,GAAuB,SAACxN,GAAD,OAClCA,EAAMqN,KAAKI,gBACAC,GAAqB,SAAC1N,GAAD,OAChCA,EAAMqN,KAAKM,cACAC,GAAoB,SAAC5N,GAAD,OAAuBA,EAAMqN,KAAKQ,aACtDC,GAAwB,SAAC9N,GAAD,OACnCA,EAAMqN,KAAKU,iBAGAC,GAA8B,SAAChO,GAAD,OACzCA,EAAMqN,KAAKY,uBACAC,GAAuB,SAAClO,GAAD,OAClCA,EAAMqN,KAAKc,gBACAC,GAA6B,SAACpO,GAAD,OACxCA,EAAMqN,KAAKgB,sBAGAC,GAA6B,SAACtO,GAAD,OACxCA,EAAMqN,KAAKkB,sBACAC,GAA4B,SAACxO,GAAD,OACvCA,EAAMqN,KAAKoB,qB,8BCyBPC,GAAwD,SAAC,GAExD,IADL3N,EACI,EADJA,0BAEMmC,EAAcvD,EAAYqD,GAE1B9C,EAAaP,EAAYI,GAEzBK,EAAoBT,EAAYQ,GAEhC0K,EAAelL,EAAYsN,IAE3B0B,EAAahP,EAAYU,GAEvBsJ,EAAShK,EAAYyN,IAArBzD,KAEFiF,EAAUC,cAEVxN,EAAsBC,cAEtBgK,EAAWzL,IAEXiP,EAAuB,SAAC,GAAkC,IAAhClO,EAA+B,EAA/BA,GACxBmO,EAAc7L,EAAY8L,MAAK,SAACtO,GAAD,OAAUA,EAAKQ,MAAQN,KAClC,SAAX,OAAXmO,QAAW,IAAXA,OAAA,EAAAA,EAAarP,MACf4L,EAASjF,EAAc,2BAAK0I,GAAN,IAAmBnI,IAAKqI,mBACrCF,GAAe7O,EAAWgB,KAEnCoK,EAAS9E,GAAiB,2BAAKuI,GAAN,IAAmBnI,IAAKqI,oBAI/CC,EAA0B,SAAC,GAAqC,IAAnCtO,EAAkC,EAAlCA,GAC3BmO,EAAc7L,EAAY8L,MAAK,SAACtO,GAAD,OAAUA,EAAKQ,MAAQN,KAC5D,SAAUV,EAAWgB,KAA6B,SAAX,OAAX6N,QAAW,IAAXA,OAAA,EAAAA,EAAarP,QAI3C,EAAyD0M,YACvD,CACEC,OAAQ,mBACR8C,KAFF,SAEOC,GACHN,EAAqBM,IAEvBC,QALF,SAKUD,GACN,OAAOF,EAAwBE,IAEjC5N,QAAS,SAACC,GAAD,MAAc,CACrB6N,QAAS7N,EAAQ8N,SACjBC,UAAW/N,EAAQ4N,UACnB3N,WAAYD,EAAQ4N,YAAc5N,EAAQ8N,YAG9C,CAACT,EAAsBI,IAfzB,0BAASI,EAAT,EAASA,QAASE,EAAlB,EAAkBA,UAAW9N,EAA7B,EAA6BA,WAAc+K,EAA3C,KAkBMZ,EAAuB/J,uBAC3B,SAAC8E,GACC,IAAMG,EAAmB3G,EAAkB4O,MACzC,SAACtO,GAAD,OAAUA,EAAKkG,MAAQA,KAEzB,MAAO,CACLG,mBACAiF,sBAAuBjF,EACnB3G,EAAkB6G,WAChB,SAACvG,GAAD,OAAUA,EAAKkG,MAAQG,EAAiBH,QAEzC,KAGT,CAACxG,IAGG0L,EAAuBhK,uBAC3B,SAAC8E,EAAaE,GACZ,IAAQC,EAAqB8E,EAAqBjF,GAA1CG,iBACJA,GACFuE,EACEzE,GAAoB,CAClBE,mBACAD,gBAKR,CAAC+E,EAAsBP,IAGzB,EAAuBc,aAAQ,iBAAO,CACpCC,OAAQ,oBADDoD,EAAT,oBAIMC,GAAsBxP,EAAWgB,MAAQd,EAAkBe,OAE3DwO,EAAwB,UAAMC,KAAkBC,sBAAxB,iBAE3BH,GAAsBhO,IACvBkO,KAAkBE,+BAHU,gBAK5BR,GAAWE,EAAYI,KAAkBG,8BAAgC,GAL7C,eAO5BT,IAAYE,EACRI,KAAkBI,iCAClB,IAaN,OACE,0BAASxR,UAAU,kBAAnB,UACE,qBAAIA,UAAWmR,EAA0BtN,IAAKoK,EAA9C,UACuB,QAApBvM,EAAWR,MACV,cAAC,IAAD,CACEqC,GAAI,CACFC,SAAS,gBAAD,OAAkB9B,EAAWgB,KACrClB,MAAO,CAAEiC,WAAYZ,IAHzB,SAME,oBACE7C,UAAS,UAAKoR,KAAkBK,wBAAvB,cACTtR,QAASoC,EACTnC,WAAYmC,EACZ,UAASb,EAAWgB,IAJtB,SAME,cAAC,qBAAD,CACExB,KAAK,MACLoN,KAAI,UAAK5M,EAAWY,KAAhB,+BACJP,MAAOL,EAAWK,MAClBwM,UAAW7M,EAAWW,MACtBqP,UAAQ,QAKhB,qBACE1R,UAAS,UAAKoR,KAAkBO,4BAAvB,YAAsDvK,IAAUC,QACzExD,IAAKoN,EAFP,UAIGC,GACC,mBACElR,UAAS,UAAKoR,KAAkBQ,kBAAvB,6EADX,uUAODhQ,EAAkBqE,KAAI,SAAC/D,GAAD,OACrB,cAAC,IAAD,CACEqB,GAAI,CACFC,SAAS,gBAAD,OAAkBtB,EAAKQ,KAC/BlB,MAAO,CAAEiC,WAAYZ,IAHzB,SAME,cAAC,GAAD,CAEET,GAAIF,EAAKQ,IACT0F,IAAKlG,EAAKkG,IACV9F,KAAMJ,EAAKI,KACXP,MAAOG,EAAKH,MACZM,MAAOH,EAAKG,MACZgB,oBAAqBd,EACrB8K,qBAAsBA,EACtBC,qBAAsBA,GARjBpL,EAAKkG,aAaG,QAApB1G,EAAWR,MACV,cAAC,IAAD,CACEqC,GAAI,CACFC,SAAS,gBAAD,OAAkB9B,EAAWgB,KACrClB,MAAO,CAAEiC,WAAYZ,IAHzB,SAME,oBACE7C,UAAS,UAAKoR,KAAkBK,wBAAvB,cACTtR,QAASoC,EACTnC,WAAYmC,EACZ,UAASb,EAAWgB,IAJtB,SAME,cAAC,qBAAD,CACExB,KAAK,SACLoN,KAAI,UAAK5M,EAAWY,KAAhB,yBACJP,MAAOL,EAAWK,MAClBwM,UAAW7M,EAAWW,MACtBqP,UAAQ,WAMlB,sBACE1R,UAAS,UAAKoR,KAAkBS,iCAAvB,eADX,UAGE,sBAAK7R,UAAS,UAAKoR,KAAkBU,wBAAvB,UAAd,UACE,sBAAM9R,UAAU,oCAAhB,SACGmQ,IAEH,cAAC,eAAD,CAAcjP,KAAK,eAErB,cAAC,SAAD,CACEA,KAAK,UACLiD,KAAK,SACLhE,QAzGiC,WACnCgL,EACF2B,EAASF,GAAU,CAAClL,GAAF,mBAAiBE,MAEnCwO,EAAQjH,QAAQ,CACd3F,SAAU,YAqGRuO,SAAyB,IAAf5B,EACV7N,KAAK,oBACL0P,SAAS,SANX,SAQG3F,EAAe,+EAAqB,2FAOhC/H,OAAMC,KAAK2L,I,oBClRX,OAA0B,iCC6B1B+B,GAxBiB,WAC9B,IAAM7F,EAAcjL,EAAYwN,IAEhC,OACE,sBAAK3O,UAAS,UAAKkS,KAAYlF,MAAjB,gBAAd,UACE,qBACEhN,UAAS,UAAKkS,KAAYC,cAAjB,2CADX,SAGG/F,IAEH,mBAAGpM,UAAU,6BAAb,iIACA,qBACEA,UAAS,UAAKkS,KAAYE,aAAjB,gBACTrO,IAAKsO,GACLpO,IAAI,sGAEN,mBAAGjE,UAAU,8BAAb,qJACA,mBAAGA,UAAU,6DAAb,gQ,qBCjBSsS,GAFW,kBAAM,qBAAKtS,UAAWuS,KAAOC,UC8BxCC,GAtBwC,SAAC,GAAD,IACrDC,EADqD,EACrDA,UACAC,EAFqD,EAErDA,SACAC,EAHqD,EAGrDA,QACAC,EAJqD,EAIrDA,aACAvS,EALqD,EAKrDA,SACAwS,EANqD,EAMrDA,kBANqD,OAQrD,qCACGJ,GAAa,cAAC,GAAD,IACbC,GACC,eAAC,EAAD,CAAO5S,QAAS+S,EAAhB,UACE,oBAAI9S,UAAU,4BAAd,yGACA,mBAAGA,UAAU,uDAAb,SACG6S,QAILH,IAAcC,GAAYC,GAAWtS,MCnBrCyS,GAA6C,CACjDrO,YAAa,GACbE,iBAAkB,KAClBE,oBAAoB,EACpBE,mBAAmB,GAGfgO,GAAmBtL,YAAY,CACnCpF,KAAM,cACNqF,aAAcoL,GACdnL,SAAU,CACRqL,sBADQ,SACczR,GACpBA,EAAMsD,oBAAqB,GAE7BoO,sBAJQ,SAIc1R,EAAOsG,GAC3BtG,EAAMkD,YAAcoD,EAAOC,QAC3BvG,EAAMwD,mBAAoB,EAC1BxD,EAAMsD,oBAAqB,GAE7BqO,qBATQ,SASa3R,GACnBA,EAAMwD,mBAAoB,EAC1BxD,EAAMsD,oBAAqB,GAE7BsO,oBAbQ,SAaY5R,EAAOsG,GACzBtG,EAAMoD,iBAAmBkD,EAAOC,SAElCsL,sBAhBQ,SAgBc7R,GACpBA,EAAMoD,iBAAmB,MAE3B0O,iBAnBQ,WAoBN,OAAOP,OAKN,GAOHC,GAAiBnK,QANnBoK,GADK,GACLA,sBACAC,GAFK,GAELA,sBACAC,GAHK,GAGLA,qBACAC,GAJK,GAILA,oBACAC,GALK,GAKLA,sBACAC,GANK,GAMLA,iBAGaN,MAAf,Q,qBCuCeO,GAtEa,WAC1B,IAAM7O,EAAcvD,EAAYqD,GAE1BM,EAAqB3D,EAAY0D,GAEjCG,EAAoB7D,EAAY4D,GAEhCqH,EAAcjL,EAAYwN,IAE1BrC,EAAcnL,EAAYuN,IAE1B5B,EAAWzL,IAEXmS,EAA4BlQ,uBAChC,SAAC7C,GACC,IAAMgT,EAAchT,EAAI8F,OACxB,IAAKkN,EAAYC,QAAQ,gCAAiC,CAAC,IAAD,EAElDC,EAAY,UAAGF,EAAYC,QAAQ,aAAvB,aAAG,EAA2BE,QAAQxR,GAClDyR,EAAanP,EAAY8L,MAC7B,SAACtO,GAAD,OAA4BA,EAAKQ,MAAQiR,KAEvCE,GACF/G,EAASsG,GAAoBS,OAInC,CAAC/G,EAAUpI,IAGPoP,EAAwBxQ,uBAAY,WACxCwJ,EAASwG,QACR,CAACxG,IAEEiH,EAA+BzQ,uBAAY,WAC/CwJ,EAASH,QACR,CAACG,IAEJ,OACE,sBAAM9M,UAAWuS,KAAOyB,SAAxB,SACE,eAAC,GAAD,CACEtB,UAAW5N,EACX6N,SAAU3N,EACV4N,QAASqB,QAAO,OAACvP,QAAD,IAACA,OAAD,EAACA,EAAa/B,QAC9BkQ,aAAa,6MACbC,kBAAmBgB,EALrB,UAOE,eAACI,EAAA,EAAD,CAAaC,QAASC,IAAtB,UACE,cAAC,EAAD,CACE7R,0BAA2BiR,IAE7B,cAAC,GAAD,CACEjR,0BAA2BiR,OAG/B,cAAC,GAAD,CACEb,SAAUrG,EACVsG,QAASqB,QAAQ7H,GACjB0G,kBAAmBgB,EACnBjB,aAAa,6MAJf,SAME,cAAC,EAAD,CAAO9S,QAASgU,EAAhB,SACE,cAAC,GAAD,c,SClENM,GAA+B,CACnClJ,KAAM,KACNwE,gBAAgB,EAChB2E,eAAe,EACfvF,iBAAiB,EACjBE,gBAAgB,EAChBE,cAAc,EACdE,aAAa,EACbE,iBAAiB,EACjBgF,gBAAgB,EAChB9E,uBAAuB,EACvBI,sBAAsB,EACtBE,sBAAsB,EACtBE,qBAAqB,GAGVuE,GAAY9M,YAAY,CACnCpF,KAAM,OACNqF,aAAc0M,GACdzM,SAAU,CACR6M,YADQ,SACIjT,EAAOsG,GACbtG,EAAM2J,OACR3J,EAAM2J,KAAK7I,KAAOwF,EAAOC,UAG7B2M,aANQ,SAMKlT,EAAOsG,GACdtG,EAAM2J,OACR3J,EAAM2J,KAAKC,MAAQtD,EAAOC,UAG9B4M,gBAXQ,SAWQnT,EAAOsG,GACjBtG,EAAM2J,OACR3J,EAAM2J,KAAKE,SAAWvD,EAAOC,UAGjC6M,oBAhBQ,SAgBYpT,GAClBA,EAAMuN,iBAAkB,GAE1B8F,oBAnBQ,SAmBYrT,EAAOsG,GACzB,MAAwBA,EAAOC,QAAvBzF,EAAR,EAAQA,KAAM8I,EAAd,EAAcA,MACd5J,EAAM2J,KAAN,2BACK3J,EAAM2J,MADX,IAEE7I,OACA8I,QACAC,SAAU,KAEZ7J,EAAMyN,gBAAiB,EACvBzN,EAAMuN,iBAAkB,GAE1B+F,mBA9BQ,SA8BWtT,GACjBA,EAAMyN,gBAAiB,EACvBzN,EAAMuN,iBAAkB,GAE1BgG,iBAlCQ,SAkCSvT,GACfA,EAAM2N,cAAe,GAEvB6F,iBArCQ,SAqCSxT,EAAOsG,GACtB,MAAwBA,EAAOC,QAAvBzF,EAAR,EAAQA,KAAM8I,EAAd,EAAcA,MACd5J,EAAM2J,KAAN,2BACK3J,EAAM2J,MADX,IAEE7I,OACA8I,QACAC,SAAU,KAEZ7J,EAAM6N,aAAc,EACpB7N,EAAM2N,cAAe,GAEvB8F,gBAhDQ,SAgDQzT,GACdA,EAAM6N,aAAc,EACpB7N,EAAM2N,cAAe,GAEvB+F,kBApDQ,SAoDU1T,GAChBA,EAAM+N,iBAAkB,GAE1B4F,kBAvDQ,SAuDU3T,EAAOsG,GACvB,MAAwBA,EAAOC,QAAvBzF,EAAR,EAAQA,KAAM8I,EAAd,EAAcA,MACd5J,EAAM2J,KAAN,2BACK3J,EAAM2J,MADX,IAEE7I,OACA8I,QACAC,SAAU,KAEZ7J,EAAM+S,gBAAiB,EACvB/S,EAAM+N,iBAAkB,GAE1B6F,iBAlEQ,SAkES5T,GACfA,EAAM+S,gBAAiB,EACvB/S,EAAM+N,iBAAkB,GAE1B8F,0BAtEQ,SAsEkB7T,GACxBA,EAAMiO,uBAAwB,GAEhC6F,0BAzEQ,SAyEkB9T,GACxBA,EAAMmO,gBAAiB,EACvBnO,EAAMqO,sBAAuB,EAC7BrO,EAAMiO,uBAAwB,GAEhC8F,yBA9EQ,SA8EiB/T,GACvBA,EAAMqO,sBAAuB,EAC7BrO,EAAMiO,uBAAwB,GAEhC+F,yBAlFQ,SAkFiBhU,GACvBA,EAAMuO,sBAAuB,GAE/B0F,yBArFQ,SAqFiBjU,GACvBA,EAAM8S,eAAgB,EACtB9S,EAAMyO,qBAAsB,EAC5BzO,EAAMuO,sBAAuB,GAE/B2F,wBA1FQ,SA0FgBlU,GACtBA,EAAMyN,gBAAiB,EACvBzN,EAAMuN,iBAAkB,GAE1B4G,UA9FQ,WA+FN,OAAOtB,OAKN,GAoBHG,GAAU3L,QAnBZ4L,GADK,GACLA,YACAC,GAFK,GAELA,aACAC,GAHK,GAGLA,gBACAC,GAJK,GAILA,oBACAC,GALK,GAKLA,oBACAC,GANK,GAMLA,mBACAC,GAPK,GAOLA,iBACAC,GARK,GAQLA,iBACAC,GATK,GASLA,gBACAC,GAVK,GAULA,kBACAC,GAXK,GAWLA,kBACAC,GAZK,GAYLA,iBACAC,GAbK,GAaLA,0BACAC,GAdK,GAcLA,0BACAC,GAfK,GAeLA,yBACAC,GAhBK,GAgBLA,yBACAC,GAjBK,GAiBLA,yBACAC,GAlBK,GAkBLA,wBACAC,GAnBK,GAmBLA,UAGanB,MAAf,QClGaoB,GAAoB,kBAAM,SAAC9I,GACtCZ,GACG2J,iBACApL,MAAK,SAACH,GACDA,GAAOA,EAAIyC,UACbxB,aAAauK,WAAW,gBfb9BzM,GecmB,cfdH,GAAI,CAAEG,SAAU,Iee1BsD,EAAS6I,UAGZhK,OAAM,SAACjB,GACNwC,QAAQC,IAAR,6IAAyCzC,EAAIkB,eAItCmK,GAAwB,SAAxBA,IAAwB,OAAM,SAACjJ,GAC1CA,EAASoI,MACThJ,GACG6J,cACAtL,MAAK,SAACH,GACDA,GAAOA,EAAIyC,QACbD,EAASqI,GAAkB7K,EAAIa,QAE/B2B,EAASsI,MACTW,QAGHpK,OAAM,SAACjB,GACNoC,EAASsI,MACTlI,QAAQC,IAAR,qNAAqDzC,EAAIkB,e,mBCqBhDoK,GA7Fc,WAC3B,IAAQ7K,EAAShK,YAAYyN,IAArBzD,KAEFgE,EAAehO,YAAY+N,IAE3BG,EAAclO,YAAYiO,IAExB5N,EAAUsB,cAAVtB,MAEFsL,EAAWzL,cAEjB,EAAyBkE,mBAAS,CAAE6F,MAAO,GAAIC,SAAU,KAAzD,mBAAO4K,EAAP,KAAaC,EAAb,KAEMC,EAAW,SAAC1V,GAChB,IAAM8F,EAAS9F,EAAI8F,OACnB2P,EAAS,2BAAKD,GAAN,mBAAa1P,EAAOjE,KAAOiE,EAAOU,UAGtCmP,EAAoB9S,uBACxB,SAAC7C,GDK2B,IAAC4V,ECJ3B5V,EAAI6V,iBACJxJ,GDG2BuJ,ECHXJ,EDGmC,SAACnJ,GACxDA,EAASiI,MACT7I,GACGqK,cAAcF,GACd5L,MAAK,SAACH,GACDA,GAAOA,EAAIyC,SACbxB,aAAaO,QAAQ,eAAgBxB,EAAIyB,cACzC1C,GAAU,cAAeiB,EAAImB,aAC7BqB,EAASkI,GAAiB1K,EAAIa,QAE9B2B,EAASmI,SAGZtJ,OAAM,SAACjB,GACNoC,EAASmI,MACT/H,QAAQC,IAAR,mHAAmCzC,EAAIkB,kBChBzC,CAACkB,EAAUmJ,IAGPnC,EAAwBxQ,uBAAY,WACxCwJ,EAAS6I,QACR,CAAC7I,IAGJ,OAAI3B,EAEA,cAAC,IAAD,CAEE5H,IAAS,OAAL/B,QAAK,IAALA,OAAA,EAAAA,EAAOgV,OAAQ,MAMvB,+BACE,qBAAKxW,UAAS,UAAKyW,KAAWC,iBAA9B,SACE,cAAC,GAAD,CACE/D,SAAUtD,EACVuD,SAAO,EACPE,kBAAmBgB,EACnBjB,aAAa,2cAJf,SAME,uBAAM7S,UAAS,UAAKyW,KAAWR,MAAQU,SAAUP,EAAjD,UACE,oBAAIpW,UAAU,6BAAd,sCACA,qBAAKA,UAAS,UAAKyW,KAAWG,YAAhB,SAAd,SACE,cAAC,QAAD,CACE1V,KAAK,QACL2V,YAAY,SACZV,SAAUA,EACVlP,MAAOgP,EAAK7K,MACZ9I,KAAK,QACLwU,OAAO,EACPC,UAAU,2CAGd,qBAAK/W,UAAS,UAAKyW,KAAWG,YAAhB,SAAd,SACE,cAAC,gBAAD,CACET,SAAUA,EACVlP,MAAOgP,EAAK5K,SACZ/I,KAAK,eAGT,cAAC,SAAD,CAAQpB,KAAK,UAAUiD,KAAK,SAA5B,SACGgL,EAAe,8BAAY,mCAE9B,oBAAGnP,UAAU,wDAAb,wIAEE,cAAC,IAAD,CAAMA,UAAS,UAAKyW,KAAWO,YAAczT,GAAG,YAAhD,6HAIF,oBAAGvD,UAAU,6CAAb,2FAEE,cAAC,IAAD,CACEA,UAAS,UAAKyW,KAAWO,YACzBzT,GAAG,mBAFL,wI,oBChCC0T,GA7CwC,SAAC,GAKjD,IAAD,EAJJC,EAII,EAJJA,MAII,IAHJ/S,YAGI,MAHG,UAGH,EAFJ7D,EAEI,EAFJA,SACAH,EACI,EADJA,QAEQgX,EAAQC,cAARD,IAEFE,EAA4B,CAChCC,qEAAa,IACb,4EAAiB,QACjB,kFAAkB,WAClBC,6CAAS,WACT,wFAAkB,GAAlB,OAAsBJ,EAAtB,WACAK,iCAAO,SACPC,2BAAM,IACN,0DAAc,KAGVC,EAAQ,UAAGN,YAAc,CAC7BO,KAAMN,EAAYH,GAClBU,QAAQ,EACRC,WAAW,WAHC,aAAG,EAIbC,QAEEC,EAA4B,CAChCT,qEAAa,cAAC,aAAD,CAAYpW,KAAMwW,EAAW,UAAY,cACtD,4EAAiB,cAAC,WAAD,CAAUxW,KAAMwW,EAAW,UAAY,cACxD,kFAAkB,cAAC,cAAD,CAAaxW,KAAMwW,EAAW,UAAY,eAG9D,OACE,eAAC,IAAD,CACEnU,GAAI,CAAEC,SAAU6T,EAAYH,IAC5Bc,OAAK,EACLhY,UAAS,UAAKuS,KAAO0F,iBAAZ,wBACTC,gBAAiB3F,KAAO4F,wBACxBhY,QAASA,EALX,UAOG4X,EAAYb,GACb,sBAAMlX,UAAS,8BAAyBmE,EAAzB,SAAf,SAAsD7D,Q,oBCvDtD8X,GAAuB,WAC3B,IAAQjN,EAAShK,YAAYyN,IAArBzD,KAER,OACE,wBAAQnL,UAAWuS,KAAO8F,OAA1B,SACE,qBAAKrY,UAAS,UAAKuS,KAAO+F,kBAAZ,cAAd,SACE,8BACE,qBAAItY,UAAWuS,KAAOgG,mBAAtB,UACE,6BACE,cAAC,GAAD,CAAgBrB,MAAM,qEAAtB,kFAEF,6BACE,cAAC,GAAD,CAAgBA,MAAM,4EAAtB,yFAIF,oBAAIlX,UAAS,UAAKuS,KAAOiG,aAAZ,UAAb,SACE,cAAC,GAAD,CAAgBtB,MAAM,2BAAtB,SACE,cAAC,OAAD,QAGJ,6BACE,cAAC,GAAD,CAAgBA,MAAM,kFAAtB,SACG/L,EAAI,OAAGA,QAAH,IAAGA,OAAH,EAAGA,EAAM7I,KAAO,gGAUtBgC,OAAMC,KAAK6T,ICwEXK,GA7FW,WACxB,IAAQtN,EAAShK,YAAYyN,IAArBzD,KAEF4D,EAAkB5N,YAAY2N,IAE9BG,EAAiB9N,YAAY6N,IAE3BxN,EAAUsB,cAAVtB,MAEFsL,EAAWzL,cAEjB,EAAyBkE,mBAAS,CAAEjD,KAAM,GAAI8I,MAAO,GAAIC,SAAU,KAAnE,mBAAO4K,EAAP,KAAaC,EAAb,KAEMC,EAAW,SAAC1V,GAChB,IAAM8F,EAAS9F,EAAI8F,OACnB2P,EAAS,2BAAKD,GAAN,mBAAa1P,EAAOjE,KAAOiE,EAAOU,UAGtCyR,EAA2BpV,uBAAY,SAAC7C,GJbhB,IAAC4V,EIc7B5V,EAAI6V,iBACJxJ,GJf6BuJ,EIebJ,EJfqC,SAACnJ,GACxDA,EAAS8H,MACT1I,GACGyM,iBAAiBtC,GACjB5L,MAAK,SAACH,GACDA,GAAOA,EAAIyC,SACbxB,aAAaO,QAAQ,eAAgBxB,EAAIyB,cACzC1C,GAAU,cAAeiB,EAAImB,aAC7BqB,EAAS+H,GAAoBvK,EAAIa,QAEjC2B,EAASgI,SAGZnJ,OAAM,SAACjB,GACNoC,EAASgI,MACT5H,QAAQC,IAAR,mHAAmCzC,EAAIkB,kBICxC,CAACkB,EAAUmJ,IAERnC,EAAwBxQ,uBAAY,WACxCwJ,EAAS6I,QACR,CAAC7I,IAEJ,OAAI3B,EAEA,cAAC,IAAD,CACE5H,IAAS,OAAL/B,QAAK,IAALA,OAAA,EAAAA,EAAOgV,OAAQ,MAMvB,sBAAMxW,UAAS,UAAKuS,KAAOmE,iBAA3B,SACE,cAAC,GAAD,CACE/D,SAAU1D,EACV2D,SAAO,EACPE,kBAAmBgB,EACnBjB,aAAa,6OAJf,SAME,uBAAM7S,UAAS,UAAKuS,KAAO0D,MAAQU,SAAU+B,EAA7C,UACE,oBAAI1Y,UAAU,6BAAd,gFACA,qBAAKA,UAAS,UAAKuS,KAAOqE,YAAZ,SAAd,SACE,cAAC,QAAD,CACE1V,KAAK,OACL2V,YAAY,qBACZV,SAAUA,EACVlP,MAAOgP,EAAK3T,KACZA,KAAK,OACLwU,OAAO,EACPC,UAAU,OAGd,qBAAK/W,UAAS,UAAKuS,KAAOqE,YAAZ,SAAd,SACE,cAAC,QAAD,CACE1V,KAAK,QACL2V,YAAY,SACZV,SAAUA,EACVlP,MAAOgP,EAAK7K,MACZ9I,KAAK,QACLwU,OAAO,EACPC,UAAU,OAGd,qBAAK/W,UAAS,UAAKuS,KAAOqE,YAAZ,SAAd,SACE,cAAC,gBAAD,CACET,SAAUA,EACVlP,MAAOgP,EAAK5K,SACZ/I,KAAK,eAGT,cAAC,SAAD,CACEpB,KAAK,UACLiD,KAAK,SACL6N,SAAS,SACT1P,KAAK,wBAJP,SAMGyM,EAAkB,wEAAmB,iHAExC,oBAAG/O,UAAU,wDAAb,qIAEE,cAAC,IAAD,CAAMA,UAAS,UAAKuS,KAAOyE,YAAczT,GAAG,SAA5C,uDCEGqV,GAzFuB,WACpC,IAAQzN,EAAShK,YAAYyN,IAArBzD,KAEFsE,EAAwBtO,YAAYqO,IAEpCqJ,EAAsB1X,YAAYuO,IAElCG,EAAuB1O,YAAYyO,IAEnC9C,EAAWzL,cAEX+O,EAAUC,cAER7O,EAAUsB,cAAVtB,MAER,EAAyB+D,mBAAS,CAAE6F,MAAO,KAA3C,mBAAO6K,EAAP,KAAaC,EAAb,KAOM4C,EAA6BxV,uBACjC,SAAC7C,GACCA,EAAI6V,iBACJxJ,ELwEJ,SAAC,GAAD,IAAG1B,EAAH,EAAGA,MAAH,OACA,SAAC0B,GACCA,EAASuI,MACTnJ,GACG6M,mBAAmB,CAAE3N,UACrBX,MAAK,SAACH,GACDA,GAAOA,EAAIyC,QACbD,EAASwI,MAETxI,EAASyI,SAGZ5J,OAAM,SAACjB,GACNoC,EAASyI,MACTrI,QAAQC,IAAR,0KAA6CzC,EAAIkB,cKtF1C+D,CAAesG,MAE1B,CAACnJ,EAAUmJ,IAGPnC,EAAwBxQ,uBAAY,WACxCwJ,EAAS6I,QACR,CAAC7I,IAEJ,OAAI3B,EACK,cAAC,IAAD,CAAU5H,IAAS,OAAL/B,QAAK,IAALA,OAAA,EAAAA,EAAOgV,OAAQ,MAGlCqC,EAEA,cAAC,IAAD,CACEtV,GAAI,CACFC,SAAU,kBACVhC,MAAO,CAAEgV,KAAMpG,EAAQvN,aAO7B,sBAAM7C,UAAS,UAAKuS,KAAOmE,iBAA3B,SACE,cAAC,GAAD,CACE/D,SAAU9C,EACV+C,SAAO,EACPC,aAAa,8PACbC,kBAAmBgB,EAJrB,SAME,uBACE9T,UAAS,UAAKuS,KAAO0D,MACrBU,SAAUmC,EAFZ,UAIE,oBAAI9Y,UAAU,6BAAd,uIACA,qBAAKA,UAAS,UAAKuS,KAAOqE,YAAZ,SAAd,SACE,cAAC,QAAD,CACE1V,KAAK,QACL2V,YAAY,oDACZ5P,MAAOgP,EAAK7K,MACZ9I,KAAK,QACLwU,OAAO,EACPC,UAAU,uCACVZ,SArDK,SAAC1V,GAChB,IAAM8F,EAAS9F,EAAI8F,OACnB2P,EAAS,2BAAKD,GAAN,mBAAa1P,EAAOjE,KAAOiE,EAAOU,cAsDpC,cAAC,SAAD,CAAQ/F,KAAK,UAAUiD,KAAK,SAA5B,SACGsL,EACG,wJACA,6EAEN,oBAAGzP,UAAU,wDAAb,6GAEE,cAAC,IAAD,CAAMA,UAAS,UAAKuS,KAAOyE,YAAczT,GAAG,SAA5C,uDCDGyV,GAhFsB,WAAO,IAAD,EACjC7N,EAAShK,YAAYyN,IAArBzD,KAEF4E,EAAuB5O,YAAY2O,IAEnCG,EAAsB9O,YAAY6O,IAEhCxO,EAAUsB,cAAVtB,MAEFsL,EAAWzL,cAEjB,EAAyBkE,mBAAS,CAAE8F,SAAU,GAAIC,MAAO,KAAzD,mBAAO2K,EAAP,KAAaC,EAAb,KAEMC,EAAW,SAAC1V,GAChB,IAAM8F,EAAS9F,EAAI8F,OACnB2P,EAAS,2BAAKD,GAAN,mBAAa1P,EAAOjE,KAAOiE,EAAOU,UAGtCgS,EAA4B3V,uBAChC,SAAC7C,GACCA,EAAI6V,iBACJxJ,ENgGJ,SAAC,GAAD,IAAGzB,EAAH,EAAGA,SAAUC,EAAb,EAAaA,MAAb,OACA,SAACwB,GACCA,EAAS0I,MACTtJ,GACGgN,kBAAkB,CAAE7N,WAAUC,UAC9Bb,MAAK,SAACH,GACDA,GAAOA,EAAIyC,QACbD,EAAS2I,MAET3I,EAAS4I,SAGZ/J,OAAM,SAACjB,GACNoC,EAAS4I,MACTxI,QAAQC,IAAR,kJAAyCzC,EAAIkB,cM9GtC0I,CAAc2B,MAEzB,CAACnJ,EAAUmJ,IAGPnC,EAAwBxQ,uBAAY,WACxCwJ,EAAS6I,QACR,CAAC7I,IAEJ,OAAI3B,EACK,cAAC,IAAD,CAAU5H,IAAS,OAAL/B,QAAK,IAALA,OAAA,EAAAA,EAAOgV,OAAQ,MAGjCrL,GAAiC,sBAAzB,UAAA3J,EAAMgV,YAAN,eAAYhT,UAKvB,sBAAMxD,UAAS,UAAKuS,KAAOmE,iBAA3B,SACE,cAAC,GAAD,CACE/D,SAAU1C,EACV2C,SAAO,EACPC,aAAa,6OACbC,kBAAmBgB,EAJrB,SAME,uBAAM9T,UAAS,UAAKuS,KAAO0D,MAAQU,SAAUsC,EAA7C,UACE,oBAAIjZ,UAAU,6BAAd,uIACA,qBAAKA,UAAS,UAAKuS,KAAOqE,YAAZ,SAAd,SACE,cAAC,gBAAD,CACET,SAAUA,EACVlP,MAAOgP,EAAK5K,SACZ/I,KAAK,eAGT,qBAAKtC,UAAS,UAAKuS,KAAOqE,YAAZ,SAAd,SACE,cAAC,QAAD,CACE1V,KAAK,OACL2V,YAAY,kHACZV,SAAUA,EACVlP,MAAOgP,EAAK3K,MACZhJ,KAAK,QACLwU,OAAO,EACPC,UAAU,2CAGd,cAAC,SAAD,CAAQ7V,KAAK,UAAUiD,KAAK,SAA5B,SACG4L,EAAuB,kEAAkB,2DAE5C,oBAAG/P,UAAU,mDAAb,6GAEE,cAAC,IAAD,CAAMA,UAAS,UAAKuS,KAAOyE,YAAczT,GAAG,SAA5C,sDApCD,cAAC,IAAD,CAAUA,GAAG,Y,oBChCT4V,GAfuB,kBACpC,sBAAMnZ,UAAWuS,KAAO6G,oBAAxB,SACE,sBAAKpZ,UAAWuS,KAAO8G,eAAvB,UACE,oBAAIrZ,UAAU,oCAAd,iBAGA,mBAAGA,UAAU,8BAAb,sHAGA,cAAC,GAAD,CAAgBkX,MAAM,0DAAa/S,KAAK,SAAxC,2E,oBC4HSmV,GA3HoB,WACjC,IAAMxM,EAAWzL,cAET8J,EAAShK,YAAYyN,IAArBzD,KAEFoE,EAAkBpO,YAAYmO,IAEpC,EAAqC/J,oBAAS,GAA9C,mBAAOgU,EAAP,KAAsBC,EAAtB,KAEMC,EAAUrU,iBAAyB,MAEnCsU,EAActU,iBAAyB,MAEvCgL,EAAUC,cAiBVsJ,EAAS,WACbH,GAAY,IAaRI,EAAmBtW,uBACvB,SAAC7C,GRqCiC,IAAC4V,EQpCjC5V,EAAI6V,iBACJxJ,GRmCiCuJ,EQnCXlL,ERmCmC,SAAC2B,GAC9DA,EAASoI,MACThJ,GACG2N,cAAcxD,GACd5L,MAAK,SAACH,GACDA,GAAOA,EAAIyC,QACbD,EAASqI,GAAkB7K,EAAIa,OAE/B2B,EAASsI,SAGZzJ,OAAM,SAACjB,GACNoC,EAASsI,MACTlI,QAAQC,IAAR,2NAAsDzC,EAAIkB,kBQ9C5D,CAACkB,EAAU3B,IAGP2O,EAAkBxW,uBACtB,SAAC7C,GACCA,EAAI6V,iBACJlG,EAAQjH,QAAQ,CAAE3F,SAAU,QAE9B,CAAC4M,IAGH,OACE,uBACEpQ,UAAU,QACV2W,SAAUiD,EACVG,QAASD,EAHX,UAKE,qBAAK9Z,UAAS,UAAKuS,KAAOyH,gBAA1B,SACE,cAAC,QAAD,CACE9Y,KAAK,OACL2V,YAAY,qBACZvU,KAAK,OACL2E,MAAOkE,EAAOA,EAAK7I,KAAO,GAC1B2X,KAAK,WACL9D,SA1Da,SAAC1V,GACpB,IAAMgT,EAAchT,EAAI8F,OACxBuG,EAAS2H,GAAYhB,EAAYxM,SAyD3B0S,OAAQA,EACRO,YAzCgB,WACtBV,GAAY,GACZW,YAAW,kCAAMV,EAAQ9T,eAAd,aAAM,EAAiByU,UAAS,IAwCrCvW,IAAK4V,EACL1H,SAAUwH,MAGd,qBAAKvZ,UAAS,UAAKuS,KAAOyH,eAAZ,SAAd,SACE,cAAC,aAAD,CACE7D,SA9Dc,SAAC1V,GACrB,IAAMgT,EAAchT,EAAI8F,OACxBuG,EAAS4H,GAAajB,EAAYxM,SA6D5BA,MAAOkE,EAAOA,EAAKC,MAAQ,GAC3B9I,KAAK,YAGT,qBAAKtC,UAAS,UAAKuS,KAAOyH,eAAZ,cAAd,SACE,cAAC,QAAD,CACE9Y,KAAK,WACL2V,YAAY,uCACZvU,KAAK,WACL2E,MAAOkE,EAAOA,EAAKE,SAAW,GAC9B4O,KAAK,WAEL9D,SAtEiB,SAAC1V,GACxB,IAAMgT,EAAchT,EAAI8F,OACxBuG,EAAS6H,GAAgBlB,EAAYxM,SAqE/B0S,OAAQA,EACRO,YA1DoB,WAC1BV,GAAY,GACZW,YAAW,kCAAMT,EAAY/T,eAAlB,aAAM,EAAqByU,UAAS,IAyDzCvW,IAAK6V,EACL3H,SAAUwH,EACVzC,OAAO,EACPC,UAAU,2CAGd,cAAC,SAAD,CACE7V,KAAK,YACLiD,KAAK,SACL7B,KAAK,0BACL0P,SAAS,QAJX,kDAQA,cAAC,SAAD,CACE9Q,KAAK,UACLiD,KAAK,SACL7B,KAAK,0BACL0P,SAAS,SAJX,SAMGzC,EAAkB,sDAAgB,+DC7H9B8K,GAAoB,SAAC7Y,GAAD,OAAuBA,EAAM8Y,OAAOC,aACxDC,GAAgB,SAAChZ,GAAD,OAAuBA,EAAM8Y,OAAOG,SACpDC,GAAe,SAAClZ,GAAD,OAAuBA,EAAM8Y,OAAOA,QACnDK,GAAoB,SAACnZ,GAAD,OAAuBA,EAAM8Y,OAAOM,OACxDC,GAAyB,SAACrZ,GAAD,OACpCA,EAAM8Y,OAAOQ,YACFC,GAAoB,SAACvZ,GAAD,OAC/BA,EAAM8Y,OAAOU,aAEFC,GAAgB,SAACvW,GAAD,OAC3B5C,YAAe0C,GAAmB,SAACqI,GAAD,OAChCnI,EACGuB,KAAI,SAAC7D,GACJ,IAAMyR,EAAahH,EAAgB2D,MACjC,SAACtO,GAAD,OAAUA,EAAKQ,MAAQN,KAEzB,MAAyB,SAAX,OAAVyR,QAAU,IAAVA,OAAA,EAAAA,EAAY3S,MACY,EAAnB2S,EAAW9R,MAEpB,OAAO8R,QAAP,IAAOA,OAAP,EAAOA,EAAY9R,SAEpBC,QAAO,SAACC,EAAKF,GACZ,OAAIE,GAAOF,EACFE,EAAMF,EAER,SCRAmZ,ICjBZC,GAAeC,GDiBHF,GAvBf,SAA2BG,GACzB,IACMC,EAAY,IAAI5R,KAChB6R,EAAY,IAAI7R,KAAK2R,GACrBG,EAAY,IAAIC,KAAKC,eAAe,GAAI,CAAEC,UAAW,SAErDC,EAAWC,KAAKC,MACpBD,KAAKE,KAAKT,EAAUU,UAAYT,EAAUS,WAN7B,QASf,OACET,EAAUU,YAAcX,EAAUW,WAClCV,EAAUW,aAAeZ,EAAUY,YACnCX,EAAUY,gBAAkBb,EAAUa,cAEhC,+CAAN,OAAmBX,EAAUY,OAAOb,IAElCK,EAAW,EACP,mCAAN,OAAiBJ,EAAUY,OAAOb,IAE9B,GAAN,OAAUK,EAAV,0DAAiCJ,EAAUY,OAAOb,K,oBEa9Cc,GAAwC,SAAC,GAQxC,IAPLja,EAOI,EAPJA,GACAsC,EAMI,EANJA,YACA4X,EAKI,EALJA,OACAha,EAII,EAJJA,KACA2K,EAGI,EAHJA,OACAsP,EAEI,EAFJA,UACAC,EACI,EADJA,YAQMC,EAAgC,CACpCC,QAAQ,GAAD,OAAKnK,KAAOoK,2BACnBC,QAAQ,GAAD,OAAKrK,KAAOsK,4BACnBC,KAAK,GAAD,OAAKvK,KAAOwK,yBAGZlQ,EAAkB1L,YAAYqD,GAE9BwY,EAAa7b,YAAY8Z,GAAcvW,IAEvCuY,EAAmBC,MAAM1G,KAC7B,IAAI2G,IACFzY,EAAYuB,KACV,SAAC0N,GAAD,uBACE9G,EAAgB2D,MACd,SAACtO,GAAD,OAA4BA,EAAKQ,MAAQiR,YAF7C,aACE,EAEGyJ,kBAGTC,OAIIC,EAAmBL,EAAiBta,OAFhB,EAE6C,EAE/Da,EAAwBV,cAAxBU,SAEFX,EAAsBC,cAEtBya,EAA6B,oBAAb/Z,EAEhBga,EAAiBla,uBACrB,SAAC7C,GAAD,OACE+b,EAAY/b,KACd,CAAC+b,IAGH,OACE,cAAC,IAAD,CACEjZ,GAAI,CACFC,SAAS,GAAD,OAAKA,EAAL,YAAiBpB,GAGzBZ,MAAO,CAAEiC,WAAYZ,IALzB,SAQE,qBACE7C,UAAS,UAAKuS,KAAOkL,qBAAZ,kBACT,UAASrb,EACTjC,QAASqd,EACTpd,WAAYod,EAJd,UAME,sBAAKxd,UAAWuS,KAAOmL,kBAAvB,UACE,sBAAM1d,UAAU,qCAAhB,oBAA0DiN,KAC1D,sBACEjN,UAAS,UAAKuS,KAAOoL,qBAAZ,oDADX,SAGGzC,GAAkBqB,QAGvB,oBACEvc,UAAS,UAAKuS,KAAOqL,iBAAZ,yCADX,SAGGtb,IAEFib,GACC,mBACEvd,UAAS,UAAKuS,KAAOsL,kBAAZ,YAAiCpB,EAAcH,GAA/C,qCADX,SAxE4B,CAClCI,QAAS,uCACTE,QAAS,yDACTE,KAAM,oDAwEgBR,KAGlB,sBAAKtc,UAAWuS,KAAOuL,mBAAvB,UACE,qBAAI9d,UAAWuS,KAAOwL,kBAAtB,UACGd,EACEe,MAAM,EAtDO,GAuDb/X,KAAI,SAAC5D,EAAgB2E,GAAjB,OACH,oBAEEhH,UAAWuS,KAAO0L,wBAClB,UAAS7b,EAHX,SAKE,qBACE2B,IAAK1B,EACL4B,IAAK3B,EACLtC,UAAWuS,KAAO2L,oBAPflX,MAWVsW,EAAmB,GAClB,oBACEtd,UAAS,6CAAwCuS,KAAO4L,wBAD1D,oBAEMb,QAGV,sBAAKtd,UAAWuS,KAAO6L,iBAAvB,UACE,sBAAMpe,UAAU,0CAAhB,SACGgd,IAEH,cAAC,eAAD,CAAc9b,KAAK,wBAQhBoD,OAAMC,KAAK8X,I,qBCrGXgC,GArCgC,SAAC,GAA8B,IAA5BC,EAA2B,EAA3BA,qBACxC9a,EAAwBV,cAAxBU,SAEF+a,EAA0B,UAAb/a,EAEb+Z,EAA6B,oBAAb/Z,EAElB8W,EAASnZ,EAAYuZ,IAOzB,OAJI6C,IACFjD,EAAS,YAAIA,GAAQkE,WAIrB,oCACE,oBAAIxe,UAAU,uCAAd,SACGue,GAAc,8EAEjB,oBAAIve,UAAS,UAAKuS,KAAOkM,aAAZ,YAA4BrX,IAAUC,QAAnD,SACGiT,EAAOrU,KAAI,SAAC+G,GAAD,OACV,cAAC,GAAD,CAEE5K,GAAI4K,EAAMtK,IACVgC,YAAasI,EAAMtI,YACnB4X,OAAQtP,EAAMsP,OACdha,KAAM0K,EAAM1K,KACZ2K,OAAQD,EAAMC,OACdsP,UAAWvP,EAAMuP,UACjBC,YAAa8B,GAPRtR,EAAMtK,cC3BjBgc,GAAmC,CACvCnE,aAAa,EACbE,SAAS,EACTH,OAAQ,GACRU,YAAa,KACbJ,MAAO,EACPE,WAAY,GAGR6D,GAAcjX,YAAY,CAC9BpF,KAAM,SACNqF,aAAc+W,GACd9W,SAAU,CACRgX,oBADQ,SACYpd,GAClB,OAAOA,GAETqd,qBAJQ,SAIard,GACnB,OAAOA,GAETsd,mBAPQ,SAOWtd,GACjBA,EAAM+Y,aAAc,GAEtBwE,iBAVQ,SAUSvd,GACfA,EAAM+Y,aAAc,EACpB/Y,EAAMiZ,SAAU,GAElBuE,kBAdQ,SAcUxd,GAChBA,EAAM+Y,aAAc,GAEtB0E,UAjBQ,SAiBEzd,EAAOsG,GACftG,EAAM8Y,OAASxS,EAAOC,QAAQuS,OAC9B9Y,EAAMoZ,MAAQ9S,EAAOC,QAAQ6S,MAC7BpZ,EAAMsZ,WAAahT,EAAOC,QAAQ+S,YAEpCoE,eAtBQ,SAsBO1d,EAAOsG,GACpBtG,EAAMwZ,YAAclT,EAAOC,SAE7BoX,iBAzBQ,SAyBS3d,GACfA,EAAMwZ,YAAc,MAEtBoE,YA5BQ,WA6BN,OAAOV,OAKN,GAUHC,GAAY9V,QATd+V,GADK,GACLA,oBACAC,GAFK,GAELA,qBACAC,GAHK,GAGLA,mBACAC,GAJK,GAILA,iBACAC,GALK,GAKLA,kBACAC,GANK,GAMLA,UACAC,GAPK,GAOLA,eACAC,GARK,GAQLA,iBACAC,GATK,GASLA,YAGaT,MAAf,Q,qBCFeU,GAjDsB,WACnC,IAAM3a,EAAcvD,EAAYqD,GAE1B8V,EAASnZ,EAAYuZ,IAErB5V,EAAqB3D,EAAY0D,GAEjCG,EAAoB7D,EAAY4D,GAEhC+H,EAAWzL,IAEjBd,qBAAU,WAER,OADAuM,EAAS+R,MACF,WACL/R,EAASkS,SAEV,CAAClS,IAEJ,IAAMwS,EAAuBhc,uBAC3B,SAAC7C,GAAS,IAAD,EAED8e,EAAO,UADO9e,EAAI8F,OACImN,QAAQ,aAAvB,aAAG,EAA2BE,QAAQxR,GAC7C4K,EAAQsN,EAAO9J,MAAK,SAACtO,GAAD,OAAsBA,EAAKQ,MAAQ6c,KACzDvS,GACFF,EAASoS,GAAelS,MAG5B,CAACF,EAAUwN,IAGPxG,EAAwBxQ,uBAAY,WACxCwJ,EAASwG,QACR,CAACxG,IAEJ,OACE,yBAAS9M,UAAWuS,KAAOiN,yBAA3B,SACE,cAAC,GAAD,CACE9M,UAAW5N,EACX6N,SAAU3N,EACV4N,QAASqB,QAAO,OAACvP,QAAD,IAACA,OAAD,EAACA,EAAa/B,QAC9BkQ,aAAa,6MACbC,kBAAmBgB,EALrB,SAOE,cAAC,GAAD,CAAYwK,qBAAsBgB,SCI3BG,GAxDgB,WAC7B,IAAQ9H,EAASP,cAATO,KAEF7K,EAAWzL,cAEjBd,qBAAU,WACRuM,EAASiJ,QACR,CAACjJ,IAEJ,IAAM4S,EAAgBpc,uBAAY,WAChCwJ,EAAS8I,QACR,CAAC9I,IAEJ,OACE,uBAAM9M,UAAS,UAAKuS,KAAOoN,oBAA3B,UACE,8BACE,qBAAI3f,UAAS,UAAKuS,KAAOqN,oBAAZ,UAAb,UACE,6BACE,cAAC,GAAD,CAAgB1I,MAAM,6CAAU/S,KAAK,SAArC,0DAIF,6BACE,cAAC,GAAD,CAAgB+S,MAAM,wFAAkB/S,KAAK,SAA7C,qGAIF,6BACE,cAAC,GAAD,CAAgB+S,MAAM,iCAAQ/S,KAAK,SAAShE,QAASuf,EAArD,8CAIF,6BACE,mBACE1f,UAAS,UAAKuS,KAAOsN,qBAAZ,wEADX,4UASN,eAAC,IAAD,WACE,cAAC,IAAD,CAAOlI,KAAMA,EAAMK,OAAK,EAAxB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOL,KAAI,UAAKA,EAAL,WAAoBK,OAAK,EAApC,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,UACE,cAAC,GAAD,a,0BCjCK8H,GAtB8B,SAAC,GAA2B,IAAzBxf,EAAwB,EAAxBA,SAAayf,EAAW,mBAC9D5U,EAAShK,YAAYyN,IAArBzD,KAER,OACE,cAAC,IAAD,2BACM4U,GADN,IAEEC,OAAQ,gBAAGnd,EAAH,EAAGA,SAAH,OACNsI,EACE7K,EAEA,cAAC,IAAD,CACEiD,GAAI,CACFC,SAAU,SACVhC,MAAO,CAAEgV,KAAM3T,W,oBC8Ddod,GAtEsB,WAAO,IAAD,cACnCvb,EAAcvD,YAAYqD,GAE5BqP,EAAa1S,YAAYwD,GAEvB9B,EAAsBC,cAE5B,IAAK+Q,EAAY,CACf,IAAMqM,EAAcrd,EAASW,SAAS2c,MAAM,KACtCC,EAAYF,EAAYA,EAAYvd,OAAS,GACnDkR,EAAanP,EAAY8L,MACvB,SAACtO,GAAD,OAA4BA,EAAKQ,MAAQ0d,KAI7C,OACE,sBAAKpgB,UAAS,UAAKqgB,KAAwBxM,WAA7B,gBAAd,UACE,oBACE7T,UAAS,UAAKqgB,KAAwBC,kBAA7B,mCADX,qHAKA,qBACEtgB,UAAS,UAAKqgB,KAAwBE,kBAA7B,SACTxc,IAAG,UAAE8P,SAAF,aAAE,EAAYxR,MACjB4B,IAAG,UAAE4P,SAAF,aAAE,EAAYvR,OAEnB,mBACEtC,UAAS,UAAKqgB,KAAwBhc,iBAA7B,oCADX,mBAGGwP,SAHH,aAGG,EAAYvR,OAEf,sBAAKtC,UAAS,UAAKqgB,KAAwBG,uBAA3C,UACE,sBAAKxgB,UAAS,UAAKqgB,KAAwBI,sBAA3C,UACE,mBAAGzgB,UAAU,uDAAb,kFAGA,sBAAMA,UAAU,oDAAhB,mBACG6T,SADH,aACG,EAAY6M,cAGjB,sBAAK1gB,UAAS,UAAKqgB,KAAwBI,sBAA3C,UACE,mBAAGzgB,UAAU,uDAAb,oDAGA,sBAAMA,UAAU,oDAAhB,mBACG6T,SADH,aACG,EAAY8M,cAGjB,sBAAK3gB,UAAS,UAAKqgB,KAAwBI,sBAA3C,UACE,mBAAGzgB,UAAU,uDAAb,8CAGA,sBAAMA,UAAU,oDAAhB,mBACG6T,SADH,aACG,EAAY+M,SAGjB,sBAAK5gB,UAAS,UAAKqgB,KAAwBI,sBAA3C,UACE,mBAAGzgB,UAAU,uDAAb,sEAGA,sBAAMA,UAAU,oDAAhB,mBACG6T,SADH,aACG,EAAYgN,0B,qBChCVC,GA5BmB,WAChC,IAAMpc,EAAcvD,EAAYqD,GAE1BM,EAAqB3D,EAAY0D,GAEjCG,EAAoB7D,EAAY4D,GAEhC+H,EAAWzL,IAEXyS,EAAwBxQ,uBAAY,WACxCwJ,EAASwG,QACR,CAACxG,IAEJ,OACE,sBAAM9M,UAAWuS,KAAOwO,sBAAxB,SACE,cAAC,GAAD,CACErO,UAAW5N,EACX6N,SAAU3N,EACV4N,QAASqB,QAAO,OAACvP,QAAD,IAACA,OAAD,EAACA,EAAa/B,QAC9BkQ,aAAa,6MACbC,kBAAmBgB,EALrB,SAOE,cAAC,GAAD,S,oBCiCOkN,GAzDoB,WACjC,IAAM1G,EAASnZ,EAAYuZ,IAErBE,EAAQzZ,EAAYwZ,IAEpBG,EAAa3Z,EAAY0Z,IAI/B,OACE,0BAAS7a,UAAS,UAAKuS,KAAO0O,UAAZ,UAAlB,UACE,gCACE,oBAAIjhB,UAAU,kCAAd,mDACA,oBACEA,UAAS,UAAKuS,KAAO2O,gBAAZ,YAA+B3O,KAAO4O,sBADjD,SAGG7G,EACE7X,QAAO,SAACuK,GAAD,MAA4B,SAAjBA,EAAMsP,UACxB0B,MAAM,EAXU,IAYhB/X,KAAI,SAAC+G,GAAD,OACH,oBAEEhN,UAAS,UAAKuS,KAAO6O,kBAAZ,4CAFX,SAIGpU,EAAMC,QAHFD,EAAMtK,aAQrB,gCACE,oBAAI1C,UAAU,kCAAd,0DACA,oBAAIA,UAAS,UAAKuS,KAAO2O,iBAAzB,SACG5G,EACE7X,QAAO,SAACuK,GAAD,MAA4B,YAAjBA,EAAMsP,UACxB0B,MAAM,EA3BU,IA4BhB/X,KAAI,SAAC+G,GAAD,OACH,oBAEEhN,UAAU,0CAFZ,SAIGgN,EAAMC,QAHFD,EAAMtK,aAQrB,sBAAK1C,UAAS,UAAKuS,KAAO8O,iBAAZ,UAAd,UACE,oBAAIrhB,UAAU,6BAAd,6HACA,sBAAMA,UAAU,mCAAhB,SAAoD4a,OAEtD,sBAAK5a,UAAS,UAAKuS,KAAO+O,sBAAZ,SAAd,UACE,oBAAIthB,UAAU,6BAAd,0DACA,sBAAMA,UAAU,mCAAhB,SAAoD8a,W,qBCM7CyG,GAhDa,WAC1B,IAAMjH,EAASnZ,EAAYuZ,IAErB5N,EAAWzL,IAEXmgB,EAAkBrgB,EAAYkZ,IAE9BoH,EAAetgB,EAAYqZ,IAEjCja,qBAAU,WAER,OADAuM,EAAS8R,MACF,WACL9R,EAASkS,SAEV,CAAClS,IAEJ,IAAMwS,EAAuBhc,uBAC3B,SAAC7C,GAAS,IAAD,EAED8e,EAAO,UADO9e,EAAI8F,OACImN,QAAQ,aAAvB,aAAG,EAA2BE,QAAQxR,GAC7C4K,EAAQsN,EAAO9J,MAAK,SAACtO,GAAD,OAAsBA,EAAKQ,MAAQ6c,KACzDvS,GACFF,EAASoS,GAAelS,MAG5B,CAACF,EAAUwN,IAGPxG,EAAwBxQ,uBAAY,WACxCwJ,EAASsS,QACR,CAACtS,IAEJ,OACE,sBAAM9M,UAAWuS,KAAOmP,SAAxB,SACE,eAAC,GAAD,CACEhP,WAAY8O,IAAoBC,EAChC9O,SAAU8O,EACV7O,QAASqB,QAAO,OAACqG,QAAD,IAACA,OAAD,EAACA,EAAQ3X,QACzBkQ,aAAa,6MACbC,kBAAmBgB,EALrB,UAOE,cAAC,GAAD,CAAYwK,qBAAsBgB,IAClC,cAAC,GAAD,UClCOqC,GAlBsB,kBAAM,SAAC7U,GAC1CA,EAASmG,MACT/G,GACG0V,iBACAnX,MAAK,SAACH,GACDA,GAAOA,EAAIyC,QACbD,EAASoG,GAAsB5I,EAAIuX,OAEnC/U,EAASqG,SAGZxH,OAAM,SAACjB,GACNoC,EAASqG,MAETjG,QAAQC,IAAR,0KAA6CzC,S,oBCG7CoX,GAA2B,WAAO,IAAD,IAM/BrF,EAAgC,CACpCC,QAAQ,GAAD,OAAKnK,KAAOwP,+BACnBnF,QAAQ,GAAD,OAAKrK,KAAOyP,gCACnBlF,KAAK,GAAD,OAAKvK,KAAO0P,6BAGZ3H,EAASnZ,YAAYuZ,IAErB7N,EAAkB1L,YAAYqD,GAE9B3B,EAAsBC,cAExBkK,EAAQ7L,YAAY4Z,IAExB,IAAK/N,EAAO,CACV,IAAMkT,EAAcrd,EAASW,SAAS2c,MAAM,KACtCC,EAAYF,EAAYA,EAAYvd,OAAS,GACnDqK,EAAQsN,EAAO9J,MAAK,SAACtO,GAAD,OAAsBA,EAAKQ,MAAQ0d,KAGzD,IAAMpD,EAAa7b,YAAY8Z,GAAcjO,EAAOtI,cAE9Cwd,EAAclV,EAAQyP,EAAczP,EAAMsP,QAAU,GAEpD6F,EAAanV,EA7BiB,CAClC0P,QAAS,uCACTE,QAAS,yDACTE,KAAM,oDA0BgC9P,EAAMsP,QAAU,GAoCxD,OACE,qBAAItc,UAAS,UAAKuS,KAAO6P,0BAAzB,UACE,mBAAGpiB,UAAU,gDAAb,8BAAkEgN,SAAlE,aAAkE,EAAOC,UACzE,oBACEjN,UAAS,UAAKuS,KAAO8P,qBAAZ,oCADX,mBAGGrV,SAHH,aAGG,EAAO1K,OAEV,mBACEtC,UAAS,UAAKuS,KAAO+P,sBAAZ,YAAqCJ,EAArC,sCADX,SAGGC,IAEH,oBACEniB,UAAS,UAAKuS,KAAO8P,qBAAZ,oCADX,mDAKA,oBACEriB,UAAS,UAAKuS,KAAOgQ,2BAAZ,YAA0Cnb,IAAUC,OAApD,UADX,SApDwB,WAAO,IAAD,IAI1Bmb,EAAsB,GAS5B,OARK,QAAL,EAAAxV,SAAA,SAAOtI,YAAY+d,SAAQ,SAACrgB,GACrBogB,EAASpgB,GAGZogB,EAASpgB,IAAO,EAFhBogB,EAASpgB,GAAM,KAMZ8a,MAAM1G,KAAK,IAAI2G,IAAJ,UAAQnQ,SAAR,aAAQ,EAAOtI,cAAcuB,KAAI,SAAC7D,GAClD,IAAMyR,EAAahH,EAAgB2D,MAAK,SAACtO,GAAD,OAAUA,EAAKQ,MAAQN,KAC/D,MAAyB,SAAX,OAAVyR,QAAU,IAAVA,OAAA,EAAAA,EAAY3S,MACP,CACLkB,GAAE,OAAEyR,QAAF,IAAEA,OAAF,EAAEA,EAAYnR,IAChBL,MAAK,OAAEwR,QAAF,IAAEA,OAAF,EAAEA,EAAYuJ,aACnB9a,KAAI,OAAEuR,QAAF,IAAEA,OAAF,EAAEA,EAAYvR,KAClBP,MAAK,OAAE8R,QAAF,IAAEA,OAAF,EAAEA,EAAY9R,MACnBmC,MAAO,GAGJ,CACL9B,GAAE,OAAEyR,QAAF,IAAEA,OAAF,EAAEA,EAAYnR,IAChBL,MAAK,OAAEwR,QAAF,IAAEA,OAAF,EAAEA,EAAYuJ,aACnB9a,KAAI,OAAEuR,QAAF,IAAEA,OAAF,EAAEA,EAAYvR,KAClBP,MAAK,OAAE8R,QAAF,IAAEA,OAAF,EAAEA,EAAY9R,MACnBmC,MAAiB,OAAV2P,QAAU,IAAVA,KAAYnR,IAAM8f,EAAS3O,EAAWnR,KAAO,MA0BnDggB,GAAsBzc,KAAI,SAAC4N,GAAD,OACzB,qBACE7T,UAAS,UAAKuS,KAAOoQ,0BAAZ,SADX,UAIE,qBAAK3iB,UAAWuS,KAAOqQ,4BAAvB,SACE,qBACE7e,IAAK8P,EAAWxR,MAChB4B,IAAK4P,EAAWvR,KAChBtC,UAAWuS,KAAOsQ,yBAGtB,sBAAM7iB,UAAU,mCAAhB,SACG6T,EAAWvR,OAEd,sBAAKtC,UAAS,UAAKuS,KAAOuQ,qBAAZ,SAAd,UACE,sBAAM9iB,UAAU,+CAAhB,mBACM6T,EAAW3P,MADjB,cAC4B2P,EAAW9R,SAEvC,cAAC,eAAD,CAAcb,KAAK,iBAhBhB2S,EAAWzR,SAqBtB,sBAAKpC,UAAS,UAAKuS,KAAOwQ,wBAA1B,UACE,sBACE/iB,UAAS,UAAKuS,KAAOyQ,yBAAZ,yDADX,SAGGhW,GAASkO,GAAkBlO,EAAMuP,aAEpC,sBAAKvc,UAAWuS,KAAOuQ,qBAAvB,UACE,sBAAM9iB,UAAU,0CAAhB,SACGgd,IAEH,cAAC,eAAD,CAAc9b,KAAK,sBAOdoD,OAAMC,KAAKud,I,qBC1HXmB,GAxBsB,WACnC,IAAM3I,EAASnZ,YAAYuZ,IAErB5N,EAAWzL,cAEXyS,EAAwBxQ,uBAAY,WACxCwJ,EAASsS,QACR,CAACtS,IAEJ,OACE,sBAAM9M,UAAWuS,KAAO2Q,iBAAxB,SACE,cAAC,GAAD,CACExQ,WAAW,EACXC,UAAU,EACVC,QAASqB,QAAO,OAACqG,QAAD,IAACA,OAAD,EAACA,EAAQ3X,QACzBkQ,aAAa,6MACbC,kBAAmBgB,EALrB,SAOE,cAAC,GAAD,SC0HOqP,GAvGQ,WACrB,IAAMrW,EAAWzL,cAEXuD,EAAmBzD,YAAYwD,GAE/BqW,EAAc7Z,YAAY4Z,IAE1B3K,EAAUC,cAEVxN,EAAsBC,cAUtBW,GAAqB,OAARZ,QAAQ,IAARA,OAAA,EAAAA,EAAUrB,QAASqB,EAASrB,MAAMiC,WAErDlD,qBAAU,WAIR,OAHAuM,EAASiJ,MACTjJ,EAAS6U,MACT7U,EAAS8R,MACF,WACL9R,EAASkS,SAEV,CAAClS,IAEJ,IAAMsW,EAA6B9f,uBAAY,WAC7CwJ,EAASuG,MACTjD,EAAQjH,QAAQ,OACf,CAAC2D,EAAUsD,IAERiT,EAAwB/f,uBAAY,WACxCwJ,EAASqS,MACT/O,EAAQkT,WACP,CAACxW,EAAUsD,IAEd,OACE,qCACE,cAAC,GAAD,IACA,eAAC,IAAD,CAAQvN,SAAUY,GAAcZ,EAAhC,UACE,cAAC,IAAD,CAAO8U,KAAK,IAAIK,OAAK,EAArB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOL,KAAK,QAAQK,OAAK,EAAzB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOL,KAAK,SAASK,OAAK,EAA1B,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOL,KAAK,YAAYK,OAAK,EAA7B,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOL,KAAK,mBAAmBK,OAAK,EAApC,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOL,KAAK,kBAAkBK,OAAK,EAAnC,SACE,cAAC,GAAD,MAEF,cAAC,GAAD,CAAgBL,KAAK,sBAAsBK,OAAK,EAAhD,SACE,cAAC,GAAD,MAEF,cAAC,GAAD,CAAgBL,KAAK,WAArB,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOA,KAAK,mBAAmBK,OAAK,EAApC,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,CAAOL,KAAK,YAAYK,OAAK,EAA7B,SACE,cAAC,GAAD,MAEF,cAAC,IAAD,UACE,cAAC,GAAD,SAGHpT,GAAoBnB,GACnB,cAAC,IAAD,CAAOkU,KAAK,mBAAZ,SACE,cAAC,EAAD,CAAO5X,QAASqjB,EAAhB,SACE,cAAC,GAAD,QAILpI,GAAevX,GACd,cAAC,IAAD,CAAOkU,KAAK,sBAAZ,SACE,cAAC,EAAD,CAAO5X,QAASsjB,EAAhB,SACE,cAAC,GAAD,QAILrI,GAAevX,GACd,cAAC,IAAD,CAAOkU,KAAK,YAAZ,SACE,cAAC,EAAD,CAAO5X,QAASsjB,EAAhB,SACE,cAAC,GAAD,Y,SC3HNE,GAAkB,CACtBC,gBAAiB5E,GAAoB1d,KACrCuiB,iBAAkB5E,GAAqB3d,KACvCwiB,OAAQ5E,GAAmB5d,KAC3BnB,QAASif,GAAkB9d,KAC3ByiB,QAAS5E,GAAiB7d,KAC1B0iB,UAAW3E,GAAU/d,MAkBR2iB,GAXDC,YAAe,CAC3BC,QAAS,CACP/W,MAAOgX,GACPvf,kBAAmBwf,GACnBxiB,kBAAmByiB,GACnBrV,KAAMsV,GACN7J,OAAQ8J,IAEVC,WAAY,CAACC,MfhCZnJ,GnCJ0B,kCmCIXC,GegCoCmI,Gf/BpD,SAACM,GACC,IAAIU,EAA2B,KAC/B,OAAO,SAACC,GAAD,OAAU,SAAC1c,GAChB,IAAQgF,EAAa+W,EAAb/W,SACA5L,EAAS4G,EAAT5G,KAENsiB,EAMEpI,GANFoI,gBACAC,EAKErI,GALFqI,iBACAC,EAIEtI,GAJFsI,OACA3jB,EAGEqb,GAHFrb,QACA4jB,EAEEvI,GAFFuI,QACAC,EACExI,GADFwI,UAKF,GAHI1iB,IAASsiB,IACXe,EAAS,IAAIE,UAAJ,UAAiBtJ,GAAjB,iBAEPja,IAASuiB,EAAkB,CAC7B,IAAMnY,EAAQxC,GAAU,eAAeK,QAAQ,UAAW,IAC1Dob,EAAS,IAAIE,UAAJ,UAAiBtJ,GAAjB,yBAAuC7P,IAE9CiZ,IACFA,EAAOG,OAAS,SAACC,GACf7X,EAAS,CAAE5L,KAAMwiB,EAAQ3b,QAAS4c,KAEpCJ,EAAOK,QAAU,SAACD,GAChB7X,EAAS,CAAE5L,KAAMyiB,EAAS5b,QAAS4c,KAErCJ,EAAOM,UAAY,SAACF,GAClB,IAAQ9C,EAAS8C,EAAT9C,KACFiD,EAAa7Z,KAAK8Z,MAAMlD,GACnBmD,EAAX,iBAA8BF,GAC9BhY,EAAS,CAAE5L,KAAM0iB,EAAW7b,QAASid,KAEvCT,EAAOU,QAAU,SAACN,GAChB7X,EAAS,CAAE5L,KAAMnB,EAASgI,QAAS4c,MAGvCH,EAAK1c,QeLTod,UAAUC,IC/BZtkB,IAASmf,OACP,cAAC,IAAMoF,WAAP,UACE,cAAC,IAAD,CAAUvB,MAAOA,GAAjB,SACE,cAAC,IAAD,UACE,cAAC,GAAD,UAINjkB,SAASC,eAAe,U,mBCf1BJ,EAAOC,QAAU,CAAC,sBAAwB,kDAAkD,+BAAiC,2DAA2D,8BAAgC,0DAA0D,iCAAmC,6DAA6D,wBAA0B,oDAAoD,4BAA8B,wDAAwD,iCAAmC,6DAA6D,wBAA0B,oDAAoD,kBAAoB,gD,mBCAxtBD,EAAOC,QAAU,CAAC,WAAa,uCAAuC,iBAAmB,6CAA6C,kBAAoB,8CAA8C,kBAAoB,8CAA8C,sBAAwB,kDAAkD,qBAAuB,mD,mBCA3WD,EAAOC,QAAU,CAAC,OAAS,sB,mBCA3BD,EAAOC,QAAU,CAAC,mBAAqB,oCAAoC,oBAAsB,qCAAqC,eAAiB,gCAAgC,qBAAuB,wC,mBCA9MD,EAAOC,QAAU,CAAC,UAAY,oCAAoC,gBAAkB,0CAA0C,qBAAuB,+CAA+C,kBAAoB,4CAA4C,iBAAmB,2CAA2C,sBAAwB,kD,mBCA1VD,EAAOC,QAAU,CAAC,wBAAmB,iDAA4C,mCAA8B,4DAAuD,kBAAoB,6CAA6C,iBAAmB,8C,mBCA1PD,EAAOC,QAAU,CAAC,0BAA4B,sDAAsD,kBAAoB,8CAA8C,qBAAuB,mD,mBCA7LD,EAAOC,QAAU,CAAC,OAAS,2BAA2B,kBAAoB,sCAAsC,mBAAqB,uCAAuC,aAAe,mC,mBCA3LD,EAAOC,QAAU,CAAC,MAAQ,6BAA6B,cAAgB,qCAAqC,aAAe,sC,mBCA3HD,EAAOC,QAAU,CAAC,MAAQ,qBAAqB,iBAAmB,kC,mBCAlED,EAAOC,QAAU,CAAC,iBAAmB,yCAAyC,4BAA8B,sD,mBCA5GD,EAAOC,QAAU,CAAC,iBAAmB,0CAA0C,wBAA0B,mD,mBCAzGD,EAAOC,QAAU,CAAC,oBAAsB,2CAA2C,eAAiB,sCAAsC,eAAiB,wC,kBCA3JD,EAAOC,QAAU,CAAC,gBAAkB,+BAA+B,KAAO,oBAAoB,YAAc,2BAA2B,WAAa,6B","file":"static/js/main.e45d9a8c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"modal-overlay_overlay__AKixE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"loader_loader__31U88\",\"spin\":\"loader_spin__3GevV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"homePage\":\"home_homePage__3Rs05\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orders__list\":\"orders-list_orders__list__sovuL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ordersHistory__container\":\"orders-history_ordersHistory__container__1YMRS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"indredient__container\":\"ingredient_indredient__container__2xfzv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feedPage\":\"feed_feedPage__2FU6u\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order__container\":\"order-contents_order__container__2iY0b\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderContents__container\":\"order-contents_orderContents__container__1e1_K\",\"orderContents__header\":\"order-contents_orderContents__header__2jTfo\",\"orderContents__status_progress\":\"order-contents_orderContents__status_progress__2KytM\",\"orderContents__status_cancel\":\"order-contents_orderContents__status_cancel__1hU7_\",\"orderContents__ingredients\":\"order-contents_orderContents__ingredients__3ai06\",\"orderContents__ingredient\":\"order-contents_orderContents__ingredient__2gz2q\",\"orderContents__imageOverlay\":\"order-contents_orderContents__imageOverlay__3aWdm\",\"orderContents__image\":\"order-contents_orderContents__image__Pxh3z\",\"orderContents__details\":\"order-contents_orderContents__details__1bOi1\",\"orderContents__price\":\"order-contents_orderContents__price__1WaQZ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"orderItem__container\":\"order-item_orderItem__container__nNKQ3\",\"orderItem__header\":\"order-item_orderItem__header__1b5HF\",\"orderItem__status_progress\":\"order-item_orderItem__status_progress__2Erbv\",\"orderItem__status_cancel\":\"order-item_orderItem__status_cancel__2EZ7S\",\"orderItem__details\":\"order-item_orderItem__details__2plN0\",\"orderItem__images\":\"order-item_orderItem__images__3xpQj\",\"orderItem__image\":\"order-item_orderItem__image__mZgX7\",\"orderItem__imagesCount\":\"order-item_orderItem__imagesCount__3zMB-\",\"orderItem__imageOverlay\":\"order-item_orderItem__imageOverlay__1lA-s\",\"orderItem__price\":\"order-item_orderItem__price__1XaIw\"};","export const BASE_URL = 'https://norma.nomoreparties.space/api';\n// урл для работы с REST API сервера\nexport const WS_URL_ORDERS = 'wss://norma.nomoreparties.space';\n// урл для подключения к серверу по WebSocket\nexport const portal = document.getElementById('react-portal') as HTMLDivElement;\n","import React from 'react';\nimport overlayStyles from './modal-overlay.module.css';\n\ninterface IModalOverlayProps {\n  onClose: () => void;\n}\n\nconst ModalOverlay: React.VFC<IModalOverlayProps> = ({ onClose }) => (\n  <div\n    className={overlayStyles.overlay}\n    onClick={onClose}\n    onKeyPress={onClose}\n  />\n);\n\nexport default ModalOverlay;\n","import React, { useEffect } from 'react';\nimport ReactDOM from 'react-dom';\nimport { CloseIcon } from 'modules/common/components';\nimport { portal } from 'utils/constants';\nimport ModalOverlay from 'components/modal-overlay/modal-overlay';\nimport modalStyles from './modal.module.css';\n\ninterface IModalProps {\n  onClose: () => void;\n}\n\nconst Modal: React.FC<IModalProps> = ({ children, onClose }) => {\n  useEffect(() => {\n    const handleEscPress = (evt: KeyboardEvent) => {\n      if (evt.key === 'Escape') onClose();\n    };\n    document.addEventListener('keydown', handleEscPress);\n    return () => document.removeEventListener('keydown', handleEscPress);\n  }, [onClose]);\n\n  return ReactDOM.createPortal(\n    <>\n      <ModalOverlay onClose={onClose} />\n      <div className={`${modalStyles.modal} p-10`}>\n        <div className={modalStyles.modal__closeIcon}>\n          <CloseIcon onClick={onClose} type=\"primary\" />\n        </div>\n        {children}\n      </div>\n    </>,\n    portal\n  );\n};\n\nexport default Modal;\n","/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport {\n  TypedUseSelectorHook,\n  useSelector as selectorHook,\n  useDispatch as dispatchHook,\n} from 'react-redux';\nimport { AppDispatch, AppThunk, TRootState } from '.';\n\n// Теперь этот хук знает структуру хранилища\nexport const useSelector: TypedUseSelectorHook<TRootState> = selectorHook;\n\n// Хук не даст отправить экшен, который ему не знаком\nexport const useDispatch = () => dispatchHook<AppDispatch | AppThunk>();\n","/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { createSelector } from '@reduxjs/toolkit';\nimport { TRootState } from 'services/types';\n\nexport const selectBunElement = (state: TRootState) =>\n  state.burgerConstructor.bunElement;\nexport const selectDraggableElements = (state: TRootState) =>\n  state.burgerConstructor.draggableElements;\n\nexport const getTotalPrice = createSelector(\n  selectBunElement,\n  selectDraggableElements,\n  (bunElement, draggableElements) => {\n    const bunsPrice = bunElement.type === 'bun' ? bunElement.price * 2 : 0;\n    const nonBunElementsPrice = draggableElements.reduce(\n      (acc, item) => acc + item.price,\n      0\n    );\n    return bunsPrice + nonBunElementsPrice;\n  }\n);\n\nexport const getIngredientCounter = (id: string) =>\n  createSelector(\n    selectBunElement,\n    selectDraggableElements,\n    (bunElement, draggableElements) =>\n      [bunElement, ...draggableElements, bunElement].filter(\n        (item) => item._id === id\n      ).length\n  );\n","import React, { useCallback } from 'react';\nimport { useDrag, DragPreviewImage } from 'react-dnd';\nimport {\n  Counter,\n  CurrencyIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { getIngredientCounter } from 'services/selectors/constructor';\nimport { useSelector } from 'react-redux';\nimport { Link, useLocation } from 'react-router-dom';\nimport { TLocation } from 'components/app/app';\nimport ingredientStyles from './burger-ingredient.module.css';\n\ninterface IBurgerIngredientProps {\n  id: string;\n  image: string;\n  price: number;\n  name: string;\n  onOpenModalWithIngredient: (\n    // eslint-disable-next-line no-unused-vars\n    evt: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>\n  ) => void;\n}\n\nconst BurgerIngredient: React.VFC<IBurgerIngredientProps> = ({\n  id,\n  image,\n  price,\n  name,\n  onOpenModalWithIngredient,\n}) => {\n  const ingredientCounter = useSelector(getIngredientCounter(id));\n\n  const location: TLocation = useLocation();\n\n  const [{ isDragging }, dragRef, dragPreview] = useDrag(\n    {\n      type: 'BurgerIngredient',\n      item: { id },\n      collect: (monitor) => ({\n        isDragging: monitor.isDragging(),\n      }),\n    },\n    [id]\n  );\n\n  const onClickToIngredient = useCallback(\n    (evt: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>) =>\n      onOpenModalWithIngredient(evt),\n    [onOpenModalWithIngredient]\n  );\n\n  return (\n    <Link\n      to={{\n        pathname: `/ingredients/${id}`,\n        // This is the trick! This link sets\n        // the `background` in location state.\n        state: { background: location },\n      }}\n    >\n      <li\n        className={`${ingredientStyles.ingredient__сard} \n      ${isDragging && ingredientStyles.ingredient__сard_isDragging} mb-8`}\n        onClick={onClickToIngredient}\n        onKeyPress={onClickToIngredient}\n        ref={dragRef}\n        data-id={id}\n      >\n        <DragPreviewImage src={image} connect={dragPreview} />\n        <img src={image} alt={name} />\n        {ingredientCounter !== 0 && (\n          <Counter count={ingredientCounter} size=\"default\" />\n        )}\n        <div className={`${ingredientStyles.ingredient__price} mt-2 mb-2`}>\n          <span className=\"text text_type_digits-default mr-2\">{price}</span>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n        <p\n          className={`${ingredientStyles.ingredient__name} text text text_type_main-default`}\n        >\n          {name}\n        </p>\n      </li>\n    </Link>\n  );\n};\n\nexport default React.memo(BurgerIngredient);\n// using memo will cause React to skip rendering a component if its props have not changed\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { TRootState } from 'services/types';\n\nexport const selectIngredients = (state: TRootState) =>\n  state.burgerIngredients.ingredients;\nexport const selectIngredientToView = (state: TRootState) =>\n  state.burgerIngredients.ingredientToView;\nexport const selectIngredientsRequest = (state: TRootState) =>\n  state.burgerIngredients.ingredientsRequest;\nexport const selectIngredientsFailed = (state: TRootState) =>\n  state.burgerIngredients.ingredientsFailed;\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useState, useRef, useCallback } from 'react';\nimport { useSelector } from 'services/types/hooks';\nimport BurgerIngredient from 'components/burger-ingredient/burger-ingredient';\nimport { selectIngredients } from 'services/selectors/ingredients';\nimport appStyles from 'components/app/app.module.css';\nimport { Tab } from 'modules/common/components';\nimport ingredientsStyles from './burger-ingredients.module.css';\n\ninterface IBurgerIngredientsProps {\n  onOpenModalWithIngredient: (\n    evt: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>\n  ) => void;\n}\n\ninterface IIngredientCategory {\n  name: string;\n  ref: React.RefObject<HTMLHeadingElement>;\n}\n\ninterface IIngredientCategories {\n  bun: IIngredientCategory;\n  sauce: IIngredientCategory;\n  main: IIngredientCategory;\n}\n\nconst BurgerIngredients: React.VFC<IBurgerIngredientsProps> = ({\n  onOpenModalWithIngredient,\n}) => {\n  const ingredients = useSelector(selectIngredients);\n\n  const ingredientCategories: IIngredientCategories = {\n    bun: {\n      name: 'Булки',\n      ref: useRef<HTMLHeadingElement>(null),\n    },\n    sauce: {\n      name: 'Соусы',\n      ref: useRef<HTMLHeadingElement>(null),\n    },\n    main: {\n      name: 'Начинки',\n      ref: useRef<HTMLHeadingElement>(null),\n    },\n  };\n\n  const [currentTab, setCurrentTab] = useState('Булки');\n\n  const handleTabClick = useCallback(\n    ({ name, ref }: IIngredientCategory) =>\n      () => {\n        setCurrentTab(name);\n        ref.current?.scrollIntoView({ behavior: 'smooth' });\n      },\n    []\n  );\n\n  const groupIngredientsByType = useCallback(\n    () =>\n      (\n        Object.keys(ingredientCategories) as (keyof IIngredientCategories)[]\n      ).map((key) => ({\n        name: ingredientCategories[key].name,\n        items: ingredients.filter((el) => el.type === key),\n        ref: ingredientCategories[key].ref,\n      })),\n    [ingredientCategories, ingredients]\n  );\n\n  const ingredientsByType = groupIngredientsByType();\n\n  const handleSectionScroll = useCallback(\n    (evt: React.UIEvent) => {\n      const container = evt.target as HTMLElement;\n      const scrollPosition = container.scrollTop;\n      const scrollOffset = 120;\n      const positionOfSauseSection =\n        ingredientCategories.sauce.ref.current?.offsetTop;\n      const positionOfMainSection =\n        ingredientCategories.main.ref.current?.offsetTop;\n      if (\n        positionOfSauseSection &&\n        scrollPosition + scrollOffset <= positionOfSauseSection\n      ) {\n        setCurrentTab('Булки');\n      } else if (\n        positionOfMainSection &&\n        scrollPosition + scrollOffset <= positionOfMainSection\n      ) {\n        setCurrentTab('Соусы');\n      } else {\n        setCurrentTab('Начинки');\n      }\n    },\n    [\n      setCurrentTab,\n      ingredientCategories.sauce.ref,\n      ingredientCategories.main.ref,\n    ]\n  );\n\n  return (\n    <section className={ingredientsStyles.ingredients__container}>\n      <h1 className=\"text text_type_main-large mt-10 mb-5\">Соберите бургер</h1>\n      <nav>\n        <ul className={ingredientsStyles.ingredients__tabContainer}>\n          {Object.values(ingredientCategories).map((type, index) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <li key={index}>\n              <Tab\n                value={type.name}\n                active={currentTab === type.name}\n                onClick={handleTabClick({\n                  name: type.name,\n                  ref: type.ref,\n                })}\n              >\n                {type.name}\n              </Tab>\n            </li>\n          ))}\n        </ul>\n      </nav>\n      <section>\n        <ul\n          className={`${ingredientsStyles.ingredients__list} ${appStyles.scroll} pr-4 pl-4`}\n          onScroll={handleSectionScroll}\n        >\n          {ingredientsByType.map(({ name, items, ref }, index) => (\n            // eslint-disable-next-line react/no-array-index-key\n            <li key={index}>\n              <h2 className=\"text text_type_main-medium mt-6 mb-6\" ref={ref}>\n                {name}\n              </h2>\n              <ul\n                className={`${ingredientsStyles.ingredient__category} pr-4 pl-4`}\n              >\n                {items.map((item) => (\n                  <BurgerIngredient\n                    key={item._id}\n                    id={item._id}\n                    name={item.name}\n                    price={item.price}\n                    image={item.image}\n                    onOpenModalWithIngredient={onOpenModalWithIngredient}\n                  />\n                ))}\n              </ul>\n            </li>\n          ))}\n        </ul>\n      </section>\n    </section>\n  );\n};\n\nexport default React.memo(BurgerIngredients);\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { IConsructorElement } from 'components/burger-constructor/burger-constructor';\nimport update from 'immutability-helper';\n\ntype TConstructorState = {\n  bunElement: IConsructorElement;\n  draggableElements: ReadonlyArray<IConsructorElement>;\n};\n\nconst constructorInitialState: TConstructorState = {\n  bunElement: {} as IConsructorElement,\n  draggableElements: [],\n};\n\nconst constructorSlice = createSlice({\n  name: 'constructor',\n  initialState: constructorInitialState,\n  reducers: {\n    addBunElement(state, action: PayloadAction<IConsructorElement>) {\n      state.bunElement = action.payload;\n    },\n    addNonBunElement(state, action: PayloadAction<IConsructorElement>) {\n      state.draggableElements.push(action.payload);\n    },\n    deleteElement(state, action: PayloadAction<string>) {\n      const newElements = state.draggableElements.filter(\n        (item) => item.uid !== action.payload\n      );\n      state.draggableElements = newElements;\n    },\n    udpadeElementsOrder(\n      state,\n      action: PayloadAction<{\n        draggableElement: IConsructorElement;\n        newIndex: number;\n      }>\n    ) {\n      const { newIndex, draggableElement } = action.payload;\n      const oldIndex = state.draggableElements.findIndex(\n        (item) => item.uid === draggableElement.uid\n      );\n      const newElements = update(state.draggableElements, {\n        $splice: [\n          [oldIndex, 1],\n          [newIndex, 0, draggableElement],\n        ],\n      });\n      state.draggableElements = newElements;\n    },\n    resetConstructor() {\n      return constructorInitialState;\n    },\n  },\n});\n\nexport const {\n  addBunElement,\n  addNonBunElement,\n  deleteElement,\n  udpadeElementsOrder,\n  resetConstructor,\n} = constructorSlice.actions;\n\nexport default constructorSlice.reducer;\n","/* eslint-disable guard-for-in */\n/* eslint-disable no-restricted-syntax */\n/* eslint-disable no-useless-escape */\n/* eslint-disable no-param-reassign */\n/* eslint-disable no-multi-assign */\n\n// Вспомогательные функции работы с куки (реализация взята из тренажера)\n\n// Доступ к данным в куки по имени\nexport function getCookie(name: string): string {\n  const matches = document.cookie.match(\n    new RegExp(\n      `(?:^|; )${name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1')}=([^;]*)`\n    )\n  );\n  return matches ? decodeURIComponent(matches[1]) : '';\n}\n\n/**\n * Сохранение данных в куку\n * Эта функция нормализует работу с временем жизни куки и обрабатывает те случаи,\n * когда время жизни куки не было передано.\n */\nexport function setCookie(\n  name: string,\n  value: string | number | boolean,\n  props?: {\n    [name: string]: Date | number | string | boolean;\n  }\n): void {\n  props = props || {};\n  let exp = props.expires;\n  if (typeof exp === 'number' && exp) {\n    const d = new Date();\n    d.setTime(d.getTime() + exp * 1000);\n    exp = props.expires = d;\n  }\n  if (exp && exp instanceof Date) {\n    props.expires = exp.toUTCString();\n  }\n  value = encodeURIComponent(value);\n  let updatedCookie = `${name}=${value}`;\n  for (const propName in props) {\n    updatedCookie += `; ${propName}`;\n    const propValue = props[propName];\n    if (propValue !== true) {\n      updatedCookie += `=${propValue}`;\n    }\n  }\n  document.cookie = updatedCookie;\n}\n\n// Удаление данных из куки по имени\nexport function deleteCookie(name: string): void {\n  setCookie(name, '', { expires: -1 });\n}\n","/* eslint-disable consistent-return */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable no-console */\n/* eslint-disable-next-line class-methods-use-this */\nimport { IIngredientsData, TUserData } from 'services/types/data';\nimport { BASE_URL } from './constants';\nimport { getCookie, setCookie } from './cookies';\n\ninterface IApi {\n  readonly baseUrl: string;\n  readonly headers: Headers;\n}\n\nexport default class Api implements IApi {\n  readonly baseUrl: string;\n\n  readonly headers: Headers;\n\n  constructor(baseUrl: string, headers: Headers) {\n    this.baseUrl = baseUrl;\n    this.headers = headers;\n  }\n\n  /**\n   * Проверка ответа сервера на корректность:\n   * неуспешные запросы и ответы в fetch все равно резолвят промис,\n   * поэтому важно проверять булевское значение res.ok */\n\n  /**\n   * @params res - промис полученный от сервера с помощью fetch\n   * @returns в случае успешного ответа возвращается json с данными, иначе - отклоненный промис\n   */\n  private checkResponse = (res: Response) =>\n    res.ok\n      ? res.json()\n      : res.json().then((err: Promise<any>) => Promise.reject(err));\n\n  /**\n   * GET запрос данных со списком ингредиентов с сервера */\n\n  /**\n   * @returns промис полученный от сервера с помощью fetch\n   */\n  getIngredients(): Promise<any> {\n    return fetch(`${this.baseUrl}/ingredients`, {\n      headers: this.headers,\n    }).then(this.checkResponse);\n  }\n\n  /**\n   * POST запрос с данными заказа на сервер */\n\n  /**\n   * @returns промис полученный от сервера с помощью fetch\n   */\n  postOrder(ingredients: IIngredientsData): Promise<any> {\n    return fetch(`${this.baseUrl}/orders`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        ingredients,\n      }),\n    }).then(this.checkResponse);\n  }\n\n  /**\n   * POST запрос с данными пользователя на сервер для регистрации */\n\n  /**\n   * @returns промис полученный от сервера с помощью fetch\n   */\n  postRegisterUser(user: TUserData): Promise<any> {\n    const { name, email, password } = user;\n    return fetch(`${this.baseUrl}/auth/register`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        name,\n        email,\n        password,\n      }),\n    }).then(this.checkResponse);\n  }\n\n  /**\n   * POST запрос с данными пользователя на сервер для авторизации */\n\n  /**\n   * @returns промис полученный от сервера с помощью fetch\n   */\n  postLoginUser(user: TUserData): Promise<any> {\n    const { email, password } = user;\n    return fetch(`${this.baseUrl}/auth/login`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        email,\n        password,\n      }),\n    }).then(this.checkResponse);\n  }\n\n  /**\n   * POST запрос с данными пользователя на сервер выхода из системы */\n\n  /**\n   * @returns промис полученный от сервера с помощью fetch\n   */\n  postLogoutUser(): Promise<any> {\n    const token = localStorage.getItem('refreshToken');\n    return fetch(`${this.baseUrl}/auth/logout`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        token,\n      }),\n    }).then(this.checkResponse);\n  }\n\n  /**\n   * GET запрос о данных пользователя */\n\n  /**\n   * @returns промис полученный от сервера с помощью fetch\n   */\n  getUserData(): Promise<any> {\n    const accessToken = getCookie('accessToken');\n    this.headers.set('authorization', accessToken);\n    return fetch(`${this.baseUrl}/auth/user`, {\n      headers: this.headers,\n    })\n      .then(this.checkResponse)\n      .catch((err) => {\n        if (err.message === 'jwt expired') {\n          return this.postUpdateToken().then((res) => {\n            localStorage.setItem('refreshToken', res.refreshToken);\n            setCookie('accessToken', res.accessToken);\n            this.headers.set('authorization', res.accessToken);\n            fetch(`${this.baseUrl}/auth/user`, {\n              headers: this.headers,\n            })\n              .then(this.checkResponse)\n          });\n        }\n        return Promise.reject(err);\n      });\n  }\n\n  /**\n   * PATCH запрос с обновленными данными пользователя */\n\n  /**\n   * @returns промис полученный от сервера с помощью fetch\n   */\n  patchUserData(user: TUserData): Promise<any> {\n    const { name, email, password } = user;\n\n    const accessToken = getCookie('accessToken');\n    this.headers.set('authorization', accessToken);\n\n    return fetch(`${this.baseUrl}/auth/user`, {\n      method: 'PATCH',\n      headers: this.headers,\n      body: JSON.stringify({\n        name,\n        email,\n        password,\n      }),\n    }).then(this.checkResponse);\n  }\n\n  /**\n   * POST запрос на восстановление пароля пользователя */\n\n  /**\n   * @returns промис полученный от сервера с помощью fetch\n   */\n  postForgotPassword({ email }: { email: string }): Promise<any> {\n    return fetch(`${this.baseUrl}/password-reset`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        email,\n      }),\n    }).then(this.checkResponse);\n  }\n\n  /**\n   * POST запрос на обновление пароля пользователя */\n\n  /**\n   * @returns промис полученный от сервера с помощью fetch\n   */\n  postResetPassword({\n    password,\n    token,\n  }: {\n    password: string;\n    token: string;\n  }): Promise<any> {\n    return fetch(`${this.baseUrl}/password-reset/reset`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        password,\n        token,\n      }),\n    }).then(this.checkResponse);\n  }\n\n  /**\n   * POST запрос на обновление токена в случае его истечения */\n\n  /**\n   * @returns промис полученный от сервера с помощью fetch\n   */\n  postUpdateToken(): Promise<any> {\n    const token = localStorage.getItem('refreshToken');\n    return fetch(`${this.baseUrl}/auth/token`, {\n      method: 'POST',\n      headers: this.headers,\n      body: JSON.stringify({\n        token,\n      }),\n    }).then(this.checkResponse);\n  }\n}\n\nconst requestHeaders: HeadersInit = new Headers();\n\nrequestHeaders.set('Content-Type', 'application/json');\n\nexport const api = new Api(BASE_URL, requestHeaders);\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\ntype TOrderState = {\n  orderNumber: string | null;\n  orderRequest: boolean;\n  orderFailed: boolean;\n};\n\nconst orderInitialState: TOrderState = {\n  orderNumber: null,\n  orderRequest: false,\n  orderFailed: false,\n};\n\nexport const orderSlice = createSlice({\n  name: 'order',\n  initialState: orderInitialState,\n  reducers: {\n    postOrderRequest(state) {\n      state.orderRequest = true;\n    },\n    postOrderSuccess(state, action: PayloadAction<string>) {\n      state.orderNumber = action.payload;\n      state.orderFailed = false;\n      state.orderRequest = false;\n    },\n    postOrderFailed(state) {\n      state.orderFailed = true;\n      state.orderRequest = false;\n    },\n    resetOrder() {\n      return orderInitialState;\n    },\n  },\n});\n\nexport const {\n  postOrderRequest,\n  postOrderSuccess,\n  postOrderFailed,\n  resetOrder,\n} = orderSlice.actions;\n\nexport default orderSlice.reducer;\n","import { IIngredientsData } from 'services/types/data';\nimport { AppThunk } from 'services/types';\nimport { api } from 'utils/api';\nimport { resetConstructor } from 'services/slices/constructor';\nimport {\n  postOrderRequest,\n  postOrderSuccess,\n  postOrderFailed,\n} from '../slices/order';\n\n\nconst postOrder: AppThunk =\n  (ingredientsData: IIngredientsData) =>\n  (dispatch) => {\n    dispatch(postOrderRequest());\n    api\n      .postOrder(ingredientsData)\n      .then((res) => {\n        if (res && res.success) {\n          dispatch(postOrderSuccess(res.order.number));\n        } else {\n          dispatch(postOrderFailed());\n        }\n      })\n      .then(() => {\n        dispatch(resetConstructor());\n      })\n      .catch((err) => {\n        dispatch(postOrderFailed());\n        // eslint-disable-next-line no-console\n        console.log(`Ошибка оформления заказа: ${err}`);\n      });\n  };\n\nexport default postOrder;","/* eslint-disable no-unused-vars */\nimport React, { useCallback } from 'react';\nimport { useDispatch } from 'services/types/hooks';\nimport { useDrag, DragPreviewImage, useDrop } from 'react-dnd';\nimport {\n  ConstructorElement,\n  DragIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { deleteElement } from 'services/slices/constructor';\nimport {\n  IFindDraggableElement,\n  IMoveDraggableElement,\n} from 'components/burger-constructor/burger-constructor';\nimport draggableItemStyles from './draggable-item.module.css';\n\ninterface IDraggableItemProps {\n  id: string;\n  uid: string;\n  image: string;\n  name: string;\n  price: number;\n  onClickToIngredient: (\n    evt: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>\n  ) => void;\n  findDraggableElement: IFindDraggableElement;\n  moveDraggableElement: IMoveDraggableElement;\n}\n\nconst DraggableItem: React.VFC<IDraggableItemProps> = ({\n  id,\n  uid,\n  name,\n  price,\n  image,\n  onClickToIngredient,\n  findDraggableElement,\n  moveDraggableElement,\n}) => {\n  const dispatch = useDispatch();\n\n  const originalIndex = findDraggableElement(uid).draggableElementIndex;\n\n  const [{ isDragging }, dragRef, dragPreview] = useDrag(\n    () => ({\n      type: 'DraggableItem',\n      item: { uid, originalIndex },\n      collect: (monitor) => ({\n        isDragging: monitor.isDragging(),\n      }),\n      end: (_, monitor) => {\n        if (!monitor.didDrop()) {\n          moveDraggableElement(uid, originalIndex);\n        }\n      },\n    }),\n    [uid, moveDraggableElement, originalIndex]\n  );\n\n  const [, dropTarget] = useDrop(\n    () => ({\n      accept: 'DraggableItem',\n      hover({ uid: draggedUid }: { uid: string }) {\n        if (draggedUid !== uid) {\n          const { draggableElementIndex: overIndex } =\n            findDraggableElement(uid);\n          moveDraggableElement(draggedUid, overIndex);\n        }\n      },\n    }),\n    [findDraggableElement, moveDraggableElement]\n  );\n\n  const handleIngredientDelete = useCallback(() => {\n    dispatch(deleteElement(uid));\n  }, [uid, dispatch]);\n  \n  return (\n    <li\n      className={`${draggableItemStyles.draggableElement} \n      ${\n        isDragging && draggableItemStyles.draggableElement_isDragging\n      } mb-4 ml-2`}\n      key={uid}\n      onClick={onClickToIngredient}\n      onKeyPress={onClickToIngredient}\n      data-id={id}\n      ref={(node) => dragRef(dropTarget(node))}\n    >\n      <DragIcon type=\"primary\" />\n      <DragPreviewImage src={image} connect={dragPreview} />\n      <ConstructorElement\n        text={name}\n        price={price}\n        thumbnail={image}\n        handleClose={handleIngredientDelete}\n      />\n    </li>\n  );\n};\n\nexport default React.memo(DraggableItem);\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { TRootState } from 'services/types';\n\nexport const selectOrderRequest = (state: TRootState) =>\n  state.order.orderRequest;\n  export const selectOrderFailed = (state: TRootState) =>\n  state.order.orderFailed;\nexport const selectOrderNumber = (state: TRootState) => state.order.orderNumber;\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { TRootState } from 'services/types';\n\nexport const selectUserData = (state: TRootState) => state.auth;\nexport const selectRegisterRequest = (state: TRootState) =>\n  state.auth.registerRequest;\nexport const selectRegisterFailed = (state: TRootState) =>\n  state.auth.registerFailed;\nexport const selectLoginRequest = (state: TRootState) =>\n  state.auth.loginRequest;\nexport const selectLoginFailed = (state: TRootState) => state.auth.loginFailed;\nexport const selectUserDataRequest = (state: TRootState) =>\n  state.auth.userDataRequest;\nexport const selectUserDataFailed = (state: TRootState) =>\n  state.auth.userDataFailed;\nexport const selectForgotPasswordRequest = (state: TRootState) =>\n  state.auth.forgotPasswordRequest;\nexport const selectForgotPassword = (state: TRootState) =>\n  state.auth.forgotPassword;\nexport const selectForgotPasswordFailed = (state: TRootState) =>\n  state.auth.forgotPasswordFailed;\nexport const selectResetPassword = (state: TRootState) =>\n  state.auth.resetPassword;\nexport const selectResetPasswordRequest = (state: TRootState) =>\n  state.auth.resetPasswordRequest;\nexport const selectResetPasswordFailed = (state: TRootState) =>\n  state.auth.resetPasswordFailed;\n","/* eslint-disable no-unused-vars */\nimport React, { useCallback } from 'react';\nimport { useSelector, useDispatch } from 'services/types/hooks';\nimport { useDrop } from 'react-dnd';\nimport {\n  addBunElement,\n  addNonBunElement,\n  udpadeElementsOrder,\n} from 'services/slices/constructor';\nimport postOrder from 'services/thunks/order';\nimport DraggableItem from 'components/draggable-item/draggable-item';\nimport { IIngredientsData } from 'services/types/data';\nimport { selectIngredients } from 'services/selectors/ingredients';\nimport {\n  getTotalPrice,\n  selectBunElement,\n  selectDraggableElements,\n} from 'services/selectors/constructor';\nimport { selectOrderRequest } from 'services/selectors/order';\nimport appStyles from 'components/app/app.module.css';\nimport { selectUserData } from 'services/selectors/auth';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\nimport { uuidv4 } from 'modules/common/utils';\nimport {\n  Button,\n  ConstructorElement,\n  CurrencyIcon,\n} from 'modules/common/components';\nimport { TLocation } from 'components/app/app';\nimport constructorStyles from './burger-constructor.module.css';\n\ninterface IBurgerConstructorProps {\n  onOpenModalWithIngredient: (\n    evt: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>\n  ) => void;\n}\n\nexport interface IConsructorElement extends IIngredientsData {\n  readonly uid: string;\n}\n\nexport interface IFindDraggableElement {\n  (uid: string): {\n    draggableElement: IConsructorElement | undefined;\n    draggableElementIndex: number;\n  };\n}\n\nexport interface IMoveDraggableElement {\n  (uid: string, newIndex: number): void;\n}\n\nconst BurgerConstructor: React.VFC<IBurgerConstructorProps> = ({\n  onOpenModalWithIngredient,\n}) => {\n  const ingredients = useSelector(selectIngredients);\n\n  const bunElement = useSelector(selectBunElement);\n\n  const draggableElements = useSelector(selectDraggableElements);\n\n  const orderRequest = useSelector(selectOrderRequest);\n\n  const totalPrice = useSelector(getTotalPrice);\n\n  const { user } = useSelector(selectUserData);\n\n  const history = useHistory();\n\n  const location: TLocation = useLocation();\n\n  const dispatch = useDispatch();\n\n  const handleIngredientDrop = ({ id }: { id: string }): void => {\n    const draggedItem = ingredients.find((item) => item._id === id);\n    if (draggedItem?.type === 'bun') {\n      dispatch(addBunElement({ ...draggedItem, uid: uuidv4() }));\n    } else if (draggedItem && bunElement._id) {\n      // в конструкторе уже есть булка, можно добавить начинку\n      dispatch(addNonBunElement({ ...draggedItem, uid: uuidv4() }));\n    }\n  };\n\n  const handleCanIngredientDrop = ({ id }: { id: string }): boolean => {\n    const draggedItem = ingredients.find((item) => item._id === id);\n    return !(!bunElement._id && draggedItem?.type !== 'bun');\n    // если в конструкторе еще нет булки, добавить начинку нельзя\n  };\n\n  const [{ isHover, isCanDrop, isDragging }, dropTarget] = useDrop(\n    {\n      accept: 'BurgerIngredient',\n      drop(itemId: { id: string }) {\n        handleIngredientDrop(itemId);\n      },\n      canDrop(itemId: { id: string }) {\n        return handleCanIngredientDrop(itemId);\n      },\n      collect: (monitor) => ({\n        isHover: monitor.isOver(),\n        isCanDrop: monitor.canDrop(),\n        isDragging: monitor.canDrop() && !monitor.isOver(),\n      }),\n    },\n    [handleIngredientDrop, handleCanIngredientDrop]\n  );\n\n  const findDraggableElement = useCallback<IFindDraggableElement>(\n    (uid: string) => {\n      const draggableElement = draggableElements.find(\n        (item) => item.uid === uid\n      );\n      return {\n        draggableElement,\n        draggableElementIndex: draggableElement\n          ? draggableElements.findIndex(\n              (item) => item.uid === draggableElement.uid\n            )\n          : -1,\n      };\n    },\n    [draggableElements]\n  );\n\n  const moveDraggableElement = useCallback<IMoveDraggableElement>(\n    (uid: string, newIndex: number) => {\n      const { draggableElement } = findDraggableElement(uid);\n      if (draggableElement) {\n        dispatch(\n          udpadeElementsOrder({\n            draggableElement,\n            newIndex,\n          })\n        );\n      }\n    },\n    [findDraggableElement, dispatch]\n  );\n\n  const [, sortTarget] = useDrop(() => ({\n    accept: 'DraggableItem',\n  }));\n\n  const isConstructorEmpty = !bunElement._id && !draggableElements.length;\n\n  const constructorElementsClass = `${constructorStyles.constructor__elements} \n  ${\n    (isConstructorEmpty || isDragging) &&\n    constructorStyles.constructor__elements_dropArea\n  } \n  ${isHover && isCanDrop ? constructorStyles.constructor__elements_canDrop : ''}\n  ${\n    isHover && !isCanDrop\n      ? constructorStyles.constructor__elements_canNotDrop\n      : ''\n  }`;\n\n  const onClickToOrderButton: () => void = () => {\n    if (user) {\n      dispatch(postOrder([bunElement, ...draggableElements]));\n    } else {\n      history.replace({\n        pathname: '/login',\n      });\n    }\n  };\n\n  return (\n    <section className=\"pt-25 pb-2 pl-4\">\n      <ul className={constructorElementsClass} ref={dropTarget}>\n        {bunElement.type === 'bun' && (\n          <Link\n            to={{\n              pathname: `/ingredients/${bunElement._id}`,\n              state: { background: location },\n            }}\n          >\n            <li\n              className={`${constructorStyles.constructor__bunElement} mr-4 mb-4`}\n              onClick={onOpenModalWithIngredient}\n              onKeyPress={onOpenModalWithIngredient}\n              data-id={bunElement._id}\n            >\n              <ConstructorElement\n                type=\"top\"\n                text={`${bunElement.name} (верх)`}\n                price={bunElement.price}\n                thumbnail={bunElement.image}\n                isLocked\n              />\n            </li>\n          </Link>\n        )}\n        <ul\n          className={`${constructorStyles.constructor__nonBunElements} ${appStyles.scroll}`}\n          ref={sortTarget}\n        >\n          {isConstructorEmpty && (\n            <p\n              className={`${constructorStyles.constructor__text} mt-10\n              text text text_type_main-medium text_color_inactive`}\n            >\n              Перетащите элемент в конструктор. Сначала добавьте булочку\n            </p>\n          )}\n          {draggableElements.map((item) => (\n            <Link\n              to={{\n                pathname: `/ingredients/${item._id}`,\n                state: { background: location },\n              }}\n            >\n              <DraggableItem\n                key={item.uid}\n                id={item._id}\n                uid={item.uid}\n                name={item.name}\n                price={item.price}\n                image={item.image}\n                onClickToIngredient={onOpenModalWithIngredient}\n                findDraggableElement={findDraggableElement}\n                moveDraggableElement={moveDraggableElement}\n              />\n            </Link>\n          ))}\n        </ul>\n        {bunElement.type === 'bun' && (\n          <Link\n            to={{\n              pathname: `/ingredients/${bunElement._id}`,\n              state: { background: location },\n            }}\n          >\n            <li\n              className={`${constructorStyles.constructor__bunElement} mt-4 mr-4`}\n              onClick={onOpenModalWithIngredient}\n              onKeyPress={onOpenModalWithIngredient}\n              data-id={bunElement._id}\n            >\n              <ConstructorElement\n                type=\"bottom\"\n                text={`${bunElement.name} (низ)`}\n                price={bunElement.price}\n                thumbnail={bunElement.image}\n                isLocked\n              />\n            </li>\n          </Link>\n        )}\n      </ul>\n      <div\n        className={`${constructorStyles.constructor__totalPriceContainer} mt-10 mr-4`}\n      >\n        <div className={`${constructorStyles.constructor__totalPrice} mr-10`}>\n          <span className=\"text text_type_digits-medium mr-2\">\n            {totalPrice}\n          </span>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n        <Button\n          type=\"primary\"\n          size=\"medium\"\n          onClick={onClickToOrderButton}\n          disabled={totalPrice === 0}\n          name=\"orderSubmitButton\"\n          htmlType=\"submit\"\n        >\n          {orderRequest ? 'Создаем заказ...' : 'Оформить заказ'}\n        </Button>\n      </div>\n    </section>\n  );\n};\n\nexport default React.memo(BurgerConstructor);\n","export default __webpack_public_path__ + \"static/media/done.6d4020a5.svg\";","import { useSelector } from 'services/types/hooks';\nimport { selectOrderNumber } from 'services/selectors/order';\nimport orderStyles from './order-details.module.css';\nimport doneImage from '../../images/done.svg';\n\nconst OrderDetails: React.VFC = () => {\n  const orderNumber = useSelector(selectOrderNumber);\n\n  return (\n    <div className={`${orderStyles.order} pr-15 pl-15`}>\n      <div\n        className={`${orderStyles.order__number} text text_type_digits-large pt-10 pb-8`}\n      >\n        {orderNumber}\n      </div>\n      <p className=\"text text_type_main-medium\">идентификатор заказа</p>\n      <img\n        className={`${orderStyles.order__image} pt-15 pb-15`}\n        src={doneImage}\n        alt=\"заказ сформирован\"\n      />\n      <p className=\"text text_type_main-default\">Ваш заказ начали готовить</p>\n      <p className=\"text text_type_main-default text_color_inactive pt-2 pb-15\">\n        Дождитесь готовности на орбитальной станции\n      </p>\n    </div>\n  );\n};\n\nexport default OrderDetails;\n","import React from 'react';\nimport styles from './loader.module.css';\n\nconst Loader: React.VFC = () => <div className={styles.loader} />;\n\nexport default Loader;\n","import Loader from 'components/loader/loader';\nimport Modal from 'components/modal/modal';\n\ninterface IErrorIndicatorProps {\n  isLoading?: boolean;\n  hasError: boolean;\n  hasData: boolean;\n  errorMessage: string;\n  onErrorModalClose: () => void;\n}\n\nconst ErrorIndicator: React.FC<IErrorIndicatorProps> = ({\n  isLoading,\n  hasError,\n  hasData,\n  errorMessage,\n  children,\n  onErrorModalClose,\n}) => (\n  <>\n    {isLoading && <Loader />}\n    {hasError && (\n      <Modal onClose={onErrorModalClose}>\n        <h1 className=\"text text_type_main-large\">Произошла ошибка</h1>\n        <p className=\"text text_type_main-medium text_color_inactive pt-10\">\n          {errorMessage}\n        </p>\n      </Modal>\n    )}\n    {!isLoading && !hasError && hasData && children}\n  </>\n);\n\nexport default ErrorIndicator;\n","import { IIngredientsData } from 'services/types/data';\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type TIngredientsState = {\n  ingredients: ReadonlyArray<IIngredientsData>;\n  ingredientToView: IIngredientsData | null | undefined;\n  ingredientsRequest: boolean;\n  ingredientsFailed: boolean;\n};\n\nconst ingredientsInitialState: TIngredientsState = {\n  ingredients: [],\n  ingredientToView: null,\n  ingredientsRequest: false,\n  ingredientsFailed: false,\n};\n\nconst ingreduentsSlice = createSlice({\n  name: 'ingreduents',\n  initialState: ingredientsInitialState,\n  reducers: {\n    getIngredientsRequest(state) {\n      state.ingredientsRequest = true;\n    },\n    getIngredientsSuccess(state, action: PayloadAction<IIngredientsData[]>) {\n      state.ingredients = action.payload;\n      state.ingredientsFailed = false;\n      state.ingredientsRequest = false;\n    },\n    getIngredientsFailed(state) {\n      state.ingredientsFailed = true;\n      state.ingredientsRequest = false;\n    },\n    setIngredientToView(state, action: PayloadAction<IIngredientsData>) {\n      state.ingredientToView = action.payload;\n    },\n    resetIngredientToView(state) {\n      state.ingredientToView = null;\n    },\n    resetIngredients() {\n      return ingredientsInitialState;\n    },\n  },\n});\n\nexport const {\n  getIngredientsRequest,\n  getIngredientsSuccess,\n  getIngredientsFailed,\n  setIngredientToView,\n  resetIngredientToView,\n  resetIngredients,\n} = ingreduentsSlice.actions;\n\nexport default ingreduentsSlice.reducer;\n","import React, { useCallback } from 'react';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport Modal from 'components/modal/modal';\nimport BurgerIngredients from 'components/burger-ingredients/burger-ingredients';\nimport BurgerConstructor from 'components/burger-constructor/burger-constructor';\nimport OrderDetails from 'components/order-details/order-details';\nimport ErrorIndicator from 'components/error-indicator/error-indicator';\nimport {\n  resetIngredients,\n  setIngredientToView,\n} from 'services/slices/ingredients';\nimport { resetOrder } from 'services/slices/order';\nimport { IIngredientsData } from 'services/types/data';\nimport { useSelector, useDispatch } from 'services/types/hooks';\nimport {\n  selectIngredients,\n  selectIngredientsFailed,\n  selectIngredientsRequest,\n} from 'services/selectors/ingredients';\nimport { selectOrderFailed, selectOrderNumber } from 'services/selectors/order';\nimport styles from './home.module.css';\n\nconst HomePage: React.VFC = () => {\n  const ingredients = useSelector(selectIngredients);\n\n  const ingredientsRequest = useSelector(selectIngredientsRequest);\n\n  const ingredientsFailed = useSelector(selectIngredientsFailed);\n\n  const orderNumber = useSelector(selectOrderNumber);\n\n  const orderFailed = useSelector(selectOrderFailed);\n\n  const dispatch = useDispatch();\n\n  const handleIngredientModalOpen = useCallback(\n    (evt) => {\n      const eventTarget = evt.target as HTMLDivElement;\n      if (!eventTarget.closest('.constructor-element__action')) {\n        // если в конструкторе нажата кнопка \"Удалить ингредиент\", не открывать попап\n        const ingredientId = eventTarget.closest('li')?.dataset.id;\n        const ingredient = ingredients.find(\n          (item: IIngredientsData) => item._id === ingredientId\n        );\n        if (ingredient) {\n          dispatch(setIngredientToView(ingredient));\n        }\n      }\n    },\n    [dispatch, ingredients]\n  );\n\n  const handleErrorModalClose = useCallback(() => {\n    dispatch(resetIngredients());\n  }, [dispatch]);\n\n  const handleOrderDetailsModalClose = useCallback(() => {\n    dispatch(resetOrder());\n  }, [dispatch]);\n\n  return (\n    <main className={styles.homePage}>\n      <ErrorIndicator\n        isLoading={ingredientsRequest}\n        hasError={ingredientsFailed}\n        hasData={Boolean(ingredients?.length)}\n        errorMessage=\"Пожалуйста, повторите попытку позднее\"\n        onErrorModalClose={handleErrorModalClose}\n      >\n        <DndProvider backend={HTML5Backend}>\n          <BurgerIngredients\n            onOpenModalWithIngredient={handleIngredientModalOpen}\n          />\n          <BurgerConstructor\n            onOpenModalWithIngredient={handleIngredientModalOpen}\n          />\n        </DndProvider>\n        <ErrorIndicator\n          hasError={orderFailed}\n          hasData={Boolean(orderNumber)}\n          onErrorModalClose={handleErrorModalClose}\n          errorMessage=\"Пожалуйста, повторите попытку позднее\"\n        >\n          <Modal onClose={handleOrderDetailsModalClose}>\n            <OrderDetails />\n          </Modal>\n        </ErrorIndicator>\n      </ErrorIndicator>\n    </main>\n  );\n};\n\nexport default HomePage;\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { TUserData } from 'services/types/data';\n\ntype TAuthState = {\n  user: TUserData | null;\n  forgotPassword: boolean;\n  resetPassword: boolean;\n  registerRequest: boolean;\n  registerFailed: boolean;\n  loginRequest: boolean;\n  loginFailed: boolean;\n  userDataRequest: boolean;\n  userDataFailed: boolean;\n  forgotPasswordRequest: boolean;\n  forgotPasswordFailed: boolean;\n  resetPasswordRequest: boolean;\n  resetPasswordFailed: boolean;\n};\n\nconst authInitialState: TAuthState = {\n  user: null,\n  forgotPassword: false,\n  resetPassword: false,\n  registerRequest: false,\n  registerFailed: false,\n  loginRequest: false,\n  loginFailed: false,\n  userDataRequest: false,\n  userDataFailed: false,\n  forgotPasswordRequest: false,\n  forgotPasswordFailed: false,\n  resetPasswordRequest: false,\n  resetPasswordFailed: false,\n};\n\nexport const authSlice = createSlice({\n  name: 'auth',\n  initialState: authInitialState,\n  reducers: {\n    setUserName(state, action: PayloadAction<string>) {\n      if (state.user) {\n        state.user.name = action.payload;\n      }\n    },\n    setUserEmail(state, action: PayloadAction<string>) {\n      if (state.user) {\n        state.user.email = action.payload;\n      }\n    },\n    setUserPassword(state, action: PayloadAction<string>) {\n      if (state.user) {\n        state.user.password = action.payload;\n      }\n    },\n    postRegisterRequest(state) {\n      state.registerRequest = true;\n    },\n    postRegisterSuccess(state, action: PayloadAction<TUserData>) {\n      const { name, email } = action.payload;\n      state.user = {\n        ...state.user,\n        name,\n        email,\n        password: '',\n      };\n      state.registerFailed = false;\n      state.registerRequest = false;\n    },\n    postRegisterFailed(state) {\n      state.registerFailed = true;\n      state.registerRequest = false;\n    },\n    postLoginRequest(state) {\n      state.loginRequest = true;\n    },\n    postLoginSuccess(state, action: PayloadAction<TUserData>) {\n      const { name, email } = action.payload;\n      state.user = {\n        ...state.user,\n        name,\n        email,\n        password: '',\n      };\n      state.loginFailed = false;\n      state.loginRequest = false;\n    },\n    postLoginFailed(state) {\n      state.loginFailed = true;\n      state.loginRequest = false;\n    },\n    updateUserRequest(state) {\n      state.userDataRequest = true;\n    },\n    updateUserSuccess(state, action: PayloadAction<TUserData>) {\n      const { name, email } = action.payload;\n      state.user = {\n        ...state.user,\n        name,\n        email,\n        password: '',\n      };\n      state.userDataFailed = false;\n      state.userDataRequest = false;\n    },\n    updateUserFailed(state) {\n      state.userDataFailed = true;\n      state.userDataRequest = false;\n    },\n    postForgotPasswordRequest(state) {\n      state.forgotPasswordRequest = true;\n    },\n    postForgotPasswordSuccess(state) {\n      state.forgotPassword = true;\n      state.forgotPasswordFailed = false;\n      state.forgotPasswordRequest = false;\n    },\n    postForgotPasswordFailed(state) {\n      state.forgotPasswordFailed = true;\n      state.forgotPasswordRequest = false;\n    },\n    postResetPasswordRequest(state) {\n      state.resetPasswordRequest = true;\n    },\n    postResetPasswordSuccess(state) {\n      state.resetPassword = true;\n      state.resetPasswordFailed = false;\n      state.resetPasswordRequest = false;\n    },\n    postResetPasswordFailed(state) {\n      state.registerFailed = true;\n      state.registerRequest = false;\n    },\n    resetAuth() {\n      return authInitialState;\n    },\n  },\n});\n\nexport const {\n  setUserName,\n  setUserEmail,\n  setUserPassword,\n  postRegisterRequest,\n  postRegisterSuccess,\n  postRegisterFailed,\n  postLoginRequest,\n  postLoginSuccess,\n  postLoginFailed,\n  updateUserRequest,\n  updateUserSuccess,\n  updateUserFailed,\n  postForgotPasswordRequest,\n  postForgotPasswordSuccess,\n  postForgotPasswordFailed,\n  postResetPasswordRequest,\n  postResetPasswordSuccess,\n  postResetPasswordFailed,\n  resetAuth,\n} = authSlice.actions;\n\nexport default authSlice.reducer;\n","/* eslint-disable no-console */\nimport { AppThunk } from 'services/types';\nimport { TUserData } from 'services/types/data';\nimport { api } from 'utils/api';\nimport { deleteCookie, setCookie } from 'utils/cookies';\nimport {\n  postRegisterRequest,\n  postRegisterSuccess,\n  postRegisterFailed,\n  postLoginRequest,\n  postLoginSuccess,\n  postLoginFailed,\n  updateUserRequest,\n  updateUserSuccess,\n  updateUserFailed,\n  postForgotPasswordRequest,\n  postForgotPasswordSuccess,\n  postForgotPasswordFailed,\n  postResetPasswordRequest,\n  postResetPasswordSuccess,\n  postResetPasswordFailed,\n  resetAuth,\n} from '../slices/auth';\n\nexport const signUp: AppThunk = (userData: TUserData) => (dispatch) => {\n  dispatch(postRegisterRequest());\n  api\n    .postRegisterUser(userData)\n    .then((res) => {\n      if (res && res.success) {\n        localStorage.setItem('refreshToken', res.refreshToken);\n        setCookie('accessToken', res.accessToken);\n        dispatch(postRegisterSuccess(res.user));\n      } else {\n        dispatch(postRegisterFailed());\n      }\n    })\n    .catch((err) => {\n      dispatch(postRegisterFailed());\n      console.log(`Ошибка регистрации: ${err.message}`);\n    });\n};\n\nexport const signIn: AppThunk = (userData: TUserData) => (dispatch) => {\n  dispatch(postLoginRequest());\n  api\n    .postLoginUser(userData)\n    .then((res) => {\n      if (res && res.success) {\n        localStorage.setItem('refreshToken', res.refreshToken);\n        setCookie('accessToken', res.accessToken);\n        dispatch(postLoginSuccess(res.user));\n      } else {\n        dispatch(postLoginFailed());\n      }\n    })\n    .catch((err) => {\n      dispatch(postLoginFailed());\n      console.log(`Ошибка авторизации: ${err.message}`);\n    });\n};\n\nexport const signOut: AppThunk = () => (dispatch) => {\n  api\n    .postLogoutUser()\n    .then((res) => {\n      if (res && res.success) {\n        localStorage.removeItem('refreshToken');\n        deleteCookie('accessToken');\n        dispatch(resetAuth());\n      }\n    })\n    .catch((err) => {\n      console.log(`Ошибка выхода из системы: ${err.message}`);\n    });\n};\n\nexport const getUserData: AppThunk = () => (dispatch) => {\n  dispatch(updateUserRequest());\n  api\n    .getUserData()\n    .then((res) => {\n      if (res && res.success) {\n        dispatch(updateUserSuccess(res.user));\n      } else {\n        dispatch(updateUserFailed());\n        getUserData();\n      }\n    })\n    .catch((err) => {\n      dispatch(updateUserFailed());\n      console.log(`Ошибка получения данных пользователя: ${err.message}`);\n    });\n};\n\nexport const editUserData: AppThunk = (userData: TUserData) => (dispatch) => {\n  dispatch(updateUserRequest());\n  api\n    .patchUserData(userData)\n    .then((res) => {\n      if (res && res.success) {\n        dispatch(updateUserSuccess(res.user));\n      } else {\n        dispatch(updateUserFailed());\n      }\n    })\n    .catch((err) => {\n      dispatch(updateUserFailed());\n      console.log(`Ошибка обновления данных пользователя: ${err.message}`);\n    });\n};\n\nexport const forgotPassword: AppThunk =\n  ({ email }: { email: string }) =>\n  (dispatch) => {\n    dispatch(postForgotPasswordRequest());\n    api\n      .postForgotPassword({ email })\n      .then((res) => {\n        if (res && res.success) {\n          dispatch(postForgotPasswordSuccess());\n        } else {\n          dispatch(postForgotPasswordFailed());\n        }\n      })\n      .catch((err) => {\n        dispatch(postForgotPasswordFailed());\n        console.log(`Ошибка восстановления пароля: ${err.message}`);\n      });\n  };\n\nexport const resetPassword: AppThunk =\n  ({ password, token }: { password: string; token: string }) =>\n  (dispatch) => {\n    dispatch(postResetPasswordRequest());\n    api\n      .postResetPassword({ password, token })\n      .then((res) => {\n        if (res && res.success) {\n          dispatch(postResetPasswordSuccess());\n        } else {\n          dispatch(postResetPasswordFailed());\n        }\n      })\n      .catch((err) => {\n        dispatch(postResetPasswordFailed());\n        console.log(`Ошибка обновления пароля: ${err.message}`);\n      });\n  };\n","import React, { useCallback, useState } from 'react';\nimport {\n  Button,\n  Input,\n  PasswordInput,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, Redirect, useLocation } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectLoginFailed,\n  selectLoginRequest,\n  selectUserData,\n} from 'services/selectors/auth';\nimport { resetAuth } from 'services/slices/auth';\nimport { signIn } from 'services/thunks/auth';\nimport ErrorIndicator from 'components/error-indicator/error-indicator';\nimport { TLocationState } from 'components/app/app';\nimport formStyles from './forms.module.css';\n\nconst LoginPage: React.VFC = () => {\n  const { user } = useSelector(selectUserData);\n\n  const loginRequest = useSelector(selectLoginRequest);\n\n  const loginFailed = useSelector(selectLoginFailed);\n  \n  const { state } = useLocation<TLocationState>();\n\n  const dispatch = useDispatch();\n\n  const [form, setValue] = useState({ email: '', password: '' });\n\n  const onChange = (evt: React.FormEvent<HTMLInputElement>) => {\n    const target = evt.target as HTMLInputElement;\n    setValue({ ...form, [target.name]: target.value });\n  };\n\n  const onLoginFormSubmit = useCallback(\n    (evt: React.FormEvent<HTMLFormElement>) => {\n      evt.preventDefault();\n      dispatch(signIn(form));\n    },\n    [dispatch, form]\n  );\n\n  const handleErrorModalClose = useCallback(() => {\n    dispatch(resetAuth());\n  }, [dispatch]);\n\n\n  if (user) {\n    return (\n      <Redirect\n        // Если объект state не undefined, вернём пользователя назад\n        to={state?.from || '/'}\n      />\n    );\n  }\n\n  return (\n    <main>\n      <div className={`${formStyles.form__container}`}>\n        <ErrorIndicator\n          hasError={loginFailed}\n          hasData\n          onErrorModalClose={handleErrorModalClose}\n          errorMessage=\"Не удалось войти в личный кабинет. Пожалуйста, проверьте правильность введенных данных\"\n        >\n          <form className={`${formStyles.form}`} onSubmit={onLoginFormSubmit}>\n            <h1 className=\"text_type_main-medium pb-6\">Вход</h1>\n            <div className={`${formStyles.form__field} pb-6`}>\n              <Input\n                type=\"email\"\n                placeholder=\"E-mail\"\n                onChange={onChange}\n                value={form.email}\n                name=\"email\"\n                error={false}\n                errorText=\"Ошибка\"\n              />\n            </div>\n            <div className={`${formStyles.form__field} pb-6`}>\n              <PasswordInput\n                onChange={onChange}\n                value={form.password}\n                name=\"password\"\n              />\n            </div>\n            <Button type=\"primary\" size=\"medium\">\n              {loginRequest ? 'Вход...' : 'Войти'}\n            </Button>\n            <p className=\"text_type_main-default text_color_inactive pt-20 pb-4\">\n              Вы - новый пользователь?&nbsp;\n              <Link className={`${formStyles.form__link}`} to=\"/register\">\n                Зарегистрироваться\n              </Link>\n            </p>\n            <p className=\"text_type_main-default text_color_inactive\">\n              Забыли пароль?&nbsp;\n              <Link\n                className={`${formStyles.form__link}`}\n                to=\"/forgot-password\"\n              >\n                Восстановить пароль\n              </Link>\n            </p>\n          </form>\n        </ErrorIndicator>\n      </div>\n    </main>\n  );\n};\nexport default LoginPage;\n","import { NavLink, useRouteMatch } from 'react-router-dom';\nimport {\n  BurgerIcon,\n  ListIcon,\n  ProfileIcon,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport styles from './navigation-link.module.css';\n\ninterface INavigationLinkProps {\n  title: string;\n  size?: string;\n  onClick?: () => void;\n}\n\ninterface ITitleToPath {\n  [title: string]: string;\n}\n\ninterface ITitleToIcon {\n  [title: string]: React.ReactNode;\n}\n\nconst NavigationLink: React.FC<INavigationLinkProps> = ({\n  title,\n  size = 'default',\n  children,\n  onClick,\n}) => {\n  const { url } = useRouteMatch();\n\n  const titleToPath: ITitleToPath = {\n    Конструктор: '/',\n    'Лента заказов': '/feed',\n    'Личный кабинет': '/profile',\n    Профиль: '/profile',\n    'История заказов': `${url}/orders`,\n    Выход: '/login',\n    Лого: '/',\n    'На главную': '/',\n  };\n\n  const isActive = useRouteMatch({\n    path: titleToPath[title],\n    strict: false,\n    sensitive: true,\n  })?.isExact;\n\n  const titleToIcon: ITitleToIcon = {\n    Конструктор: <BurgerIcon type={isActive ? 'primary' : 'secondary'} />,\n    'Лента заказов': <ListIcon type={isActive ? 'primary' : 'secondary'} />,\n    'Личный кабинет': <ProfileIcon type={isActive ? 'primary' : 'secondary'} />,\n  };\n\n  return (\n    <NavLink\n      to={{ pathname: titleToPath[title] }}\n      exact\n      className={`${styles.navigation__link} pt-4 pr-5 pb-4 pl-5`}\n      activeClassName={styles.navigation__link_active}\n      onClick={onClick}\n    >\n      {titleToIcon[title]}\n      <span className={`text text_type_main-${size} ml-2`}>{children}</span>\n    </NavLink>\n  );\n};\n\nexport default NavigationLink;\n","import React from 'react';\nimport NavigationLink from 'components/navigation-link/navigation-link';\nimport { useSelector } from 'react-redux';\nimport { selectUserData } from 'services/selectors/auth';\nimport { Logo } from 'modules/common/components';\nimport styles from './app-header.module.css';\n\nconst AppHeader: React.VFC = () => {\n  const { user } = useSelector(selectUserData);\n\n  return (\n    <header className={styles.header}>\n      <div className={`${styles.header__container} pt-4 pb-4`}>\n        <nav>\n          <ul className={styles.header__navigation}>\n            <li>\n              <NavigationLink title=\"Конструктор\">Конструктор</NavigationLink>\n            </li>\n            <li>\n              <NavigationLink title=\"Лента заказов\">\n                Лента заказов\n              </NavigationLink>\n            </li>\n            <li className={`${styles.header__logo} ml-25`}>\n              <NavigationLink title=\"Лого\">\n                <Logo />\n              </NavigationLink>\n            </li>\n            <li>\n              <NavigationLink title=\"Личный кабинет\">\n                {user ? user?.name : 'Личный кабинет'}\n              </NavigationLink>\n            </li>\n          </ul>\n        </nav>\n      </div>\n    </header>\n  );\n};\n\nexport default React.memo(AppHeader);\n","import { useCallback, useState, VFC } from 'react';\nimport {\n  Button,\n  Input,\n  PasswordInput,\n} from '@ya.praktikum/react-developer-burger-ui-components';\nimport { Link, Redirect, useLocation } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { resetAuth } from 'services/slices/auth';\nimport {\n  selectRegisterFailed,\n  selectRegisterRequest,\n  selectUserData,\n} from 'services/selectors/auth';\nimport { signUp } from 'services/thunks/auth';\nimport ErrorIndicator from 'components/error-indicator/error-indicator';\nimport { TLocationState } from 'components/app/app';\nimport styles from './forms.module.css';\n\nconst RegisterPage: VFC = () => {\n  const { user } = useSelector(selectUserData);\n\n  const registerRequest = useSelector(selectRegisterRequest);\n\n  const registerFailed = useSelector(selectRegisterFailed);\n  \n  const { state } = useLocation<TLocationState>();\n\n  const dispatch = useDispatch();\n\n  const [form, setValue] = useState({ name: '', email: '', password: '' });\n\n  const onChange = (evt: React.FormEvent<HTMLInputElement>) => {\n    const target = evt.target as HTMLInputElement;\n    setValue({ ...form, [target.name]: target.value });\n  };\n\n  const onRegistrationFormSubmit = useCallback((evt: React.FormEvent<HTMLFormElement>) => {\n    evt.preventDefault();\n    dispatch(signUp(form));\n  }, [dispatch, form]);\n\n  const handleErrorModalClose = useCallback(() => {\n    dispatch(resetAuth());\n  }, [dispatch]);\n\n  if (user) {\n    return (\n      <Redirect\n        to={state?.from || '/'}\n      />\n    );\n  }\n\n  return (\n    <main className={`${styles.form__container}`}>\n      <ErrorIndicator\n        hasError={registerFailed}\n        hasData\n        onErrorModalClose={handleErrorModalClose}\n        errorMessage=\"Пользователь с таким логином уже существует.\"\n      >\n        <form className={`${styles.form}`} onSubmit={onRegistrationFormSubmit}>\n          <h1 className=\"text_type_main-medium pb-6\">Регистрация</h1>\n          <div className={`${styles.form__field} pb-6`}>\n            <Input\n              type=\"text\"\n              placeholder=\"Имя\"\n              onChange={onChange}\n              value={form.name}\n              name=\"name\"\n              error={false}\n              errorText=\"\"\n            />\n          </div>\n          <div className={`${styles.form__field} pb-6`}>\n            <Input\n              type=\"email\"\n              placeholder=\"E-mail\"\n              onChange={onChange}\n              value={form.email}\n              name=\"email\"\n              error={false}\n              errorText=\"\"\n            />\n          </div>\n          <div className={`${styles.form__field} pb-6`}>\n            <PasswordInput\n              onChange={onChange}\n              value={form.password}\n              name=\"password\"\n            />\n          </div>\n          <Button\n            type=\"primary\"\n            size=\"medium\"\n            htmlType=\"submit\"\n            name=\"registerFormSubmitBtn\"\n          >\n            {registerRequest ? 'Регистрация...' : 'Зарегистрироваться'}\n          </Button>\n          <p className=\"text_type_main-default text_color_inactive pt-20 pb-4\">\n            Уже зарегистрированы?&nbsp;\n            <Link className={`${styles.form__link}`} to=\"/login\">\n              Войти\n            </Link>\n          </p>\n        </form>\n      </ErrorIndicator>\n    </main>\n  );\n};\nexport default RegisterPage;\n","import React, { useCallback, useState } from 'react';\nimport { Link, Redirect, useHistory, useLocation } from 'react-router-dom';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {\n  selectForgotPassword,\n  selectForgotPasswordFailed,\n  selectForgotPasswordRequest,\n  selectUserData,\n} from 'services/selectors/auth';\nimport { forgotPassword } from 'services/thunks/auth';\nimport { resetAuth } from 'services/slices/auth';\nimport ErrorIndicator from 'components/error-indicator/error-indicator';\nimport { TLocationState } from 'components/app/app';\nimport { Button, Input } from 'modules/common/components';\nimport styles from './forms.module.css';\n\nconst ForgotPasswordPage: React.VFC = () => {\n  const { user } = useSelector(selectUserData);\n\n  const forgotPasswordRequest = useSelector(selectForgotPasswordRequest);\n\n  const isPasswordForgotten = useSelector(selectForgotPassword);\n\n  const forgotPasswordFailed = useSelector(selectForgotPasswordFailed);\n\n  const dispatch = useDispatch();\n\n  const history = useHistory();\n\n  const { state } = useLocation<TLocationState>();\n\n  const [form, setValue] = useState({ email: '' });\n\n  const onChange = (evt: React.FormEvent<HTMLInputElement>) => {\n    const target = evt.target as HTMLInputElement;\n    setValue({ ...form, [target.name]: target.value });\n  };\n\n  const onForgotPasswordFormSubmit = useCallback(\n    (evt: React.FormEvent<HTMLFormElement>) => {\n      evt.preventDefault();\n      dispatch(forgotPassword(form));\n    },\n    [dispatch, form]\n  );\n\n  const handleErrorModalClose = useCallback(() => {\n    dispatch(resetAuth());\n  }, [dispatch]);\n\n  if (user) {\n    return <Redirect to={state?.from || '/'} />;\n  }\n\n  if (isPasswordForgotten) {\n    return (\n      <Redirect\n        to={{\n          pathname: '/reset-password',\n          state: { from: history.location },\n        }}\n      />\n    );\n  }\n\n  return (\n    <main className={`${styles.form__container}`}>\n      <ErrorIndicator\n        hasError={forgotPasswordFailed}\n        hasData\n        errorMessage=\"Ошибка восстановления пароля. Попробуйте позже\"\n        onErrorModalClose={handleErrorModalClose}\n      >\n        <form\n          className={`${styles.form}`}\n          onSubmit={onForgotPasswordFormSubmit}\n        >\n          <h1 className=\"text_type_main-medium pb-6\">Восстановление пароля</h1>\n          <div className={`${styles.form__field} pb-6`}>\n            <Input\n              type=\"email\"\n              placeholder=\"Укажите e-mail\"\n              value={form.email}\n              name=\"email\"\n              error={false}\n              errorText=\"Ошибка\"\n              onChange={onChange}\n            />\n          </div>\n          <Button type=\"primary\" size=\"medium\">\n            {forgotPasswordRequest\n              ? 'Отправляем проверочный код...'\n              : 'Восстановить'}\n          </Button>\n          <p className=\"text_type_main-default text_color_inactive pt-20 pb-4\">\n            Вспомнили пароль?&nbsp;\n            <Link className={`${styles.form__link}`} to=\"/login\">\n              Войти\n            </Link>\n          </p>\n        </form>\n      </ErrorIndicator>\n    </main>\n  );\n};\nexport default ForgotPasswordPage;\n","import React, { useCallback, useState } from 'react';\nimport { Link, Redirect, useLocation } from 'react-router-dom';\nimport {\n  selectResetPasswordFailed,\n  selectResetPasswordRequest,\n  selectUserData,\n} from 'services/selectors/auth';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { resetPassword } from 'services/thunks/auth';\nimport ErrorIndicator from 'components/error-indicator/error-indicator';\nimport { resetAuth } from 'services/slices/auth';\nimport { Button, Input, PasswordInput } from 'modules/common/components';\nimport { TLocationState } from 'components/app/app';\nimport styles from './forms.module.css';\n\nconst ResetPasswordPage: React.VFC = () => {\n  const { user } = useSelector(selectUserData);\n\n  const resetPasswordRequest = useSelector(selectResetPasswordRequest);\n\n  const resetPasswordFailed = useSelector(selectResetPasswordFailed);\n\n  const { state } = useLocation<TLocationState>();\n\n  const dispatch = useDispatch();\n\n  const [form, setValue] = useState({ password: '', token: '' });\n\n  const onChange = (evt: React.FormEvent<HTMLInputElement>) => {\n    const target = evt.target as HTMLInputElement;\n    setValue({ ...form, [target.name]: target.value });\n  };\n\n  const onResetPasswordFormSubmit = useCallback(\n    (evt: React.FormEvent<HTMLFormElement>) => {\n      evt.preventDefault();\n      dispatch(resetPassword(form));\n    },\n    [dispatch, form]\n  );\n\n  const handleErrorModalClose = useCallback(() => {\n    dispatch(resetAuth());\n  }, [dispatch]);\n\n  if (user) {\n    return <Redirect to={state?.from || '/'} />;\n  }\n\n  if (!user && state.from?.pathname !== '/forgot-password') {\n    return <Redirect to=\"/login\" />;\n  }\n\n  return (\n    <main className={`${styles.form__container}`}>\n      <ErrorIndicator\n        hasError={resetPasswordFailed}\n        hasData\n        errorMessage=\"Не удалось сбросить пароль. Попробуйте позже\"\n        onErrorModalClose={handleErrorModalClose}\n      >\n        <form className={`${styles.form}`} onSubmit={onResetPasswordFormSubmit}>\n          <h1 className=\"text_type_main-medium pb-6\">Восстановление пароля</h1>\n          <div className={`${styles.form__field} pb-6`}>\n            <PasswordInput\n              onChange={onChange}\n              value={form.password}\n              name=\"password\"\n            />\n          </div>\n          <div className={`${styles.form__field} pb-6`}>\n            <Input\n              type=\"text\"\n              placeholder=\"Введите код из письма\"\n              onChange={onChange}\n              value={form.token}\n              name=\"token\"\n              error={false}\n              errorText=\"Ошибка\"\n            />\n          </div>\n          <Button type=\"primary\" size=\"medium\">\n            {resetPasswordRequest ? 'Сохранение...' : 'Сохранить'}\n          </Button>\n          <p className=\"text_type_main-default text_color_inactive pt-20\">\n            Вспомнили пароль?&nbsp;\n            <Link className={`${styles.form__link}`} to=\"/login\">\n              Войти\n            </Link>\n          </p>\n        </form>\n      </ErrorIndicator>\n    </main>\n  );\n};\nexport default ResetPasswordPage;\n","import NavigationLink from 'components/navigation-link/navigation-link';\nimport styles from './not-found-404.module.css';\n\nexport const NotFound404: React.VFC = () => (\n  <main className={styles.notFound__container}>\n    <div className={styles.notFound__info}>\n      <h1 className=\"text text_type_digits-large  pb-4\">\n        404\n      </h1>\n      <p className=\"text_type_main-medium  pb-6\">\n        Страница не найдена\n      </p>\n      <NavigationLink title=\"На главную\" size=\"medium\">\n        На главную\n      </NavigationLink>\n    </div>\n  </main>\n);\nexport default NotFound404;\n","import React, { useCallback, useRef, useState } from 'react';\nimport { selectUserData, selectUserDataRequest } from 'services/selectors/auth';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { editUserData } from 'services/thunks/auth';\nimport {\n  setUserEmail,\n  setUserName,\n  setUserPassword,\n} from 'services/slices/auth';\nimport { useHistory } from 'react-router-dom';\nimport { Button, EmailInput, Input } from 'modules/common/components';\nimport styles from './profile.module.css';\n\nconst ProfileEditPage: React.VFC = () => {\n  const dispatch = useDispatch();\n\n  const { user } = useSelector(selectUserData);\n\n  const userDataRequest = useSelector(selectUserDataRequest);\n\n  const [fieldDisabled, setDisabled] = useState(true);\n\n  const nameRef = useRef<HTMLInputElement>(null);\n\n  const passwordRef = useRef<HTMLInputElement>(null);\n\n  const history = useHistory();\n\n  const onNameChange = (evt: React.FormEvent<HTMLInputElement>) => {\n    const eventTarget = evt.target as HTMLInputElement;\n    dispatch(setUserName(eventTarget.value));\n  };\n\n  const onEmailChange = (evt: React.FormEvent<HTMLInputElement>) => {\n    const eventTarget = evt.target as HTMLInputElement;\n    dispatch(setUserEmail(eventTarget.value));\n  };\n\n  const onPasswordChange = (evt: React.FormEvent<HTMLInputElement>) => {\n    const eventTarget = evt.target as HTMLInputElement;\n    dispatch(setUserPassword(eventTarget.value));\n  };\n\n  const onBlur = () => {\n    setDisabled(true);\n  };\n\n  const onNameIconClick = () => {\n    setDisabled(false);\n    setTimeout(() => nameRef.current?.focus(), 0);\n  };\n\n  const onPasswordIconClick = () => {\n    setDisabled(false);\n    setTimeout(() => passwordRef.current?.focus(), 0);\n  };\n\n  const onEditFormSubmit = useCallback(\n    (evt: React.FormEvent<HTMLFormElement>) => {\n      evt.preventDefault();\n      dispatch(editUserData(user));\n    },\n    [dispatch, user]\n  );\n\n  const onEditFormReset = useCallback(\n    (evt: React.FormEvent<HTMLFormElement>) => {\n      evt.preventDefault();\n      history.replace({ pathname: '/' });\n    },\n    [history]\n  );\n\n  return (\n    <form\n      className=\"mt-30\"\n      onSubmit={onEditFormSubmit}\n      onReset={onEditFormReset}\n    >\n      <div className={`${styles.profile__field}`}>\n        <Input\n          type=\"text\"\n          placeholder=\"Имя\"\n          name=\"name\"\n          value={user ? user.name : ''}\n          icon=\"EditIcon\"\n          onChange={onNameChange}\n          onBlur={onBlur}\n          onIconClick={onNameIconClick}\n          ref={nameRef}\n          disabled={fieldDisabled}\n        />\n      </div>\n      <div className={`${styles.profile__field} pt-6`}>\n        <EmailInput\n          onChange={onEmailChange}\n          value={user ? user.email : ''}\n          name=\"email\"\n        />\n      </div>\n      <div className={`${styles.profile__field} pt-6 pb-6`}>\n        <Input\n          type=\"password\"\n          placeholder=\"Пароль\"\n          name=\"password\"\n          value={user ? user.password : ''}\n          icon=\"EditIcon\"\n          // eslint-disable-next-line @typescript-eslint/no-empty-function\n          onChange={onPasswordChange}\n          onBlur={onBlur}\n          onIconClick={onPasswordIconClick}\n          ref={passwordRef}\n          disabled={fieldDisabled}\n          error={false}\n          errorText=\"Ошибка\"\n        />\n      </div>\n      <Button\n        type=\"secondary\"\n        size=\"medium\"\n        name=\"profileEditCancelButton\"\n        htmlType=\"reset\"\n      >\n        Отмена\n      </Button>\n      <Button\n        type=\"primary\"\n        size=\"medium\"\n        name=\"profileEditSubmitButton\"\n        htmlType=\"submit\"\n      >\n        {userDataRequest ? 'Загрузка...' : 'Сохранить'}\n      </Button>\n    </form>\n  );\n};\nexport default ProfileEditPage;\n","/* eslint-disable import/prefer-default-export */\n/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { createSelector } from '@reduxjs/toolkit';\nimport { TRootState } from 'services/types';\nimport { selectIngredients } from './ingredients';\n\nexport const selectWsConnected = (state: TRootState) => state.orders.wsConnected;\nexport const selectWsError = (state: TRootState) => state.orders.wsError;\nexport const selectOrders = (state: TRootState) => state.orders.orders;\nexport const selectTotalOrders = (state: TRootState) => state.orders.total;\nexport const selectTotalTodayOrders = (state: TRootState) =>\n  state.orders.totalToday;\nexport const selectOrderToView = (state: TRootState) =>\n  state.orders.orderToView;\n\nexport const getOrderPrice = (ingredients: string[]) =>\n  createSelector(selectIngredients, (ingredientsData) =>\n    ingredients\n      .map((id) => {\n        const ingredient = ingredientsData.find(\n          (item) => item._id === id\n        );\n        if (ingredient?.type === 'bun') {\n          return ingredient.price * 2;\n        }\n        return ingredient?.price;\n      })\n      .reduce((acc, price) => {\n        if (acc && price) {\n          return acc + price;\n        }\n        return 0;\n      })\n  );\n","function getHowLongAgoDate(dateString: string): string {\n  const oneDay = 24 * 60 * 60 * 1000;\n  const todayDate = new Date();\n  const otherDate = new Date(dateString);\n  const formatter = new Intl.DateTimeFormat([], { timeStyle: 'long' });\n\n  const diffDays = Math.round(\n    Math.abs((todayDate.valueOf() - otherDate.valueOf()) / oneDay)\n  );\n\n  if (\n    otherDate.getDate() === todayDate.getDate() &&\n    otherDate.getMonth() === todayDate.getMonth() &&\n    otherDate.getFullYear() === todayDate.getFullYear()\n  ) {\n    return `Сегодня, ${formatter.format(otherDate)}`;\n  }\n  if (diffDays < 2) {\n    return `Вчера, ${formatter.format(otherDate)}`;\n  }\n  return `${diffDays} дн. назад, ${formatter.format(otherDate)}`;\n}\n\nexport default getHowLongAgoDate;\n","/* eslint-disable import/prefer-default-export */\nimport { Middleware, MiddlewareAPI } from 'redux';\nimport { TWsOrdersActions } from 'services/types';\nimport { getCookie } from 'utils/cookies';\n\nexport const socketMiddleware =\n  (wsUrl: string, wsActions: TWsOrdersActions): Middleware =>\n  (store: MiddlewareAPI) => {\n    let socket: WebSocket | null = null;\n    return (next) => (action) => {\n      const { dispatch } = store;\n      const { type } = action;\n      const {\n        wsAllOrdersInit,\n        wsUserOrdersInit,\n        onOpen,\n        onClose,\n        onError,\n        onMessage,\n      } = wsActions;\n      if (type === wsAllOrdersInit) {\n        socket = new WebSocket(`${wsUrl}/orders/all`);\n      }\n      if (type === wsUserOrdersInit) {\n        const token = getCookie('accessToken').replace('Bearer ', '');\n        socket = new WebSocket(`${wsUrl}/orders?token=${token}`);\n      }\n      if (socket) {\n        socket.onopen = (event) => {\n          dispatch({ type: onOpen, payload: event });\n        };\n        socket.onerror = (event) => {\n          dispatch({ type: onError, payload: event });\n        };\n        socket.onmessage = (event) => {\n          const { data } = event;\n          const parsedData = JSON.parse(data);\n          const { ...restParsedData } = parsedData;\n          dispatch({ type: onMessage, payload: restParsedData });\n        };\n        socket.onclose = (event) => {\n          dispatch({ type: onClose, payload: event });\n        };\n      }\n      next(action);\n    };\n  };\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/no-array-index-key */\nimport React, { useCallback } from 'react';\nimport { IIngredientsData } from 'services/types/data';\nimport getHowLongAgoDate from 'utils/date-time';\nimport { selectIngredients } from 'services/selectors/ingredients';\nimport { useSelector } from 'react-redux';\nimport { Link, useLocation } from 'react-router-dom';\nimport { TLocation } from 'components/app/app';\nimport { getOrderPrice } from 'services/selectors/orders';\nimport { CurrencyIcon } from 'modules/common/components';\nimport styles from './order-item.module.css';\n\ninterface IOrderItemProps {\n  id: string;\n  ingredients: Array<string>;\n  status: string;\n  name: string;\n  number: number;\n  createdAt: string;\n  onOpenModal: (\n    evt: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>\n  ) => void;\n}\n\nexport interface IStatusToText {\n  [title: string]: string;\n}\n\nexport interface IStatusToColor {\n  [title: string]: string;\n}\n\nconst OrderItem: React.VFC<IOrderItemProps> = ({\n  id,\n  ingredients,\n  status,\n  name,\n  number,\n  createdAt,\n  onOpenModal,\n}) => {\n  const statusToText: IStatusToText = {\n    created: 'Создан',\n    pending: 'Готовится',\n    done: 'Выполнен',\n  };\n\n  const statusToColor: IStatusToColor = {\n    created: `${styles.orderItem__status_created}`,\n    pending: `${styles.orderItem__status_progress}`,\n    done: `${styles.orderItem__status_done}`,\n  };\n\n  const ingredientsData = useSelector(selectIngredients);\n\n  const orderPrice = useSelector(getOrderPrice(ingredients));\n\n  const ingredientImages = Array.from(\n    new Set(\n      ingredients.map(\n        (ingredientId: string) =>\n          ingredientsData.find(\n            (item: IIngredientsData) => item._id === ingredientId\n          )?.image_mobile\n      )\n    )\n  ).sort();\n\n  const visibleIconsCount = 6;\n\n  const hiddenIconsCount = ingredientImages.length - visibleIconsCount + 1;\n\n  const { pathname }: TLocation = useLocation();\n\n  const location: TLocation = useLocation();\n\n  const isProfilePage = pathname === '/profile/orders';\n\n  const onClickToOrder = useCallback(\n    (evt: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>) =>\n      onOpenModal(evt),\n    [onOpenModal]\n  );\n\n  return (\n    <Link\n      to={{\n        pathname: `${pathname}/${id}`,\n        // This is the trick! This link sets\n        // the `background` in location state.\n        state: { background: location },\n      }}\n    >\n      <li\n        className={`${styles.orderItem__container} p-6 mr-2 mb-6`}\n        data-id={id}\n        onClick={onClickToOrder}\n        onKeyPress={onClickToOrder}\n      >\n        <div className={styles.orderItem__header}>\n          <span className=\"text text text_type_digits-default\">{`#${number}`}</span>\n          <span\n            className={`${styles.orderItem__createdAt} text text_type_main-default text_color_inactive`}\n          >\n            {getHowLongAgoDate(createdAt)}\n          </span>\n        </div>\n        <h2\n          className={`${styles.orderItem__title} text text_type_main-medium pt-6 pb-6`}\n        >\n          {name}\n        </h2>\n        {isProfilePage && (\n          <p\n            className={`${styles.orderItem__status} ${statusToColor[status]} text text_type_main-default pb-6`}\n          >\n            {statusToText[status]}\n          </p>\n        )}\n        <div className={styles.orderItem__details}>\n          <ul className={styles.orderItem__images}>\n            {ingredientImages\n              .slice(0, visibleIconsCount)\n              .map((image?: string, index?: number) => (\n                <li\n                  key={index}\n                  className={styles.orderItem__imageOverlay}\n                  data-id={id}\n                >\n                  <img\n                    src={image}\n                    alt={name}\n                    className={styles.orderItem__image}\n                  />\n                </li>\n              ))}\n            {hiddenIconsCount > 0 && (\n              <li\n                className={`text text text_type_digits-default ${styles.orderItem__imagesCount}`}\n              >{`+${hiddenIconsCount}`}</li>\n            )}\n          </ul>\n          <div className={styles.orderItem__price}>\n            <span className=\"text text text_type_digits-default pr-2\">\n              {orderPrice}\n            </span>\n            <CurrencyIcon type=\"primary\"/>\n          </div>\n        </div>\n      </li>\n    </Link>\n  );\n};\n\nexport default React.memo(OrderItem);\n// using memo will cause React to skip rendering a component if its props have not changed\n","/* eslint-disable no-unused-vars */\n/* eslint-disable react/jsx-props-no-spreading */\nimport React from 'react';\nimport { useSelector } from 'services/types/hooks';\nimport { selectOrders } from 'services/selectors/orders';\nimport OrderItem from 'components/order-item/order-item';\nimport appStyles from 'components/app/app.module.css';\nimport { TLocation } from 'components/app/app';\nimport { useLocation } from 'react-router-dom';\nimport styles from './orders-list.module.css';\n\ninterface IOrderListProps {\n  onOpenModalWithOrder: (\n    evt: React.MouseEvent<HTMLElement> | React.KeyboardEvent<HTMLElement>\n  ) => void;\n}\n\nconst OrdersList: React.VFC<IOrderListProps> = ({ onOpenModalWithOrder }) => {\n  const { pathname }: TLocation = useLocation();\n\n  const isFeedPage = pathname === '/feed';\n\n  const isProfilePage = pathname === '/profile/orders';\n\n  let orders = useSelector(selectOrders);\n\n  // разворачиваем массив, т.к. заказы пользователя приходят с сервера в обратном хронологическом порядке\n  if (isProfilePage) {\n    orders = [...orders].reverse();\n  }\n\n  return (\n    <section>\n      <h1 className=\"text text_type_main-large mt-10 mb-5\">\n        {isFeedPage && 'Лента заказов'}\n      </h1>\n      <ul className={`${styles.orders__list} ${appStyles.scroll}`}>\n        {orders.map((order) => (\n          <OrderItem\n            key={order._id}\n            id={order._id}\n            ingredients={order.ingredients}\n            status={order.status}\n            name={order.name}\n            number={order.number}\n            createdAt={order.createdAt}\n            onOpenModal={onOpenModalWithOrder}\n          />\n        ))}\n      </ul>\n    </section>\n  );\n};\n\nexport default OrdersList;\n","import { IOrderData, IOrdersData } from 'services/types/data';\nimport { createSlice, PayloadAction } from '@reduxjs/toolkit';\n\nexport type TOrdersState = {\n  wsConnected: boolean;\n  wsError: boolean;\n  orders: Array<IOrderData>;\n  orderToView: IOrderData | null | undefined;\n  total: number;\n  totalToday: number;\n};\n\nconst ordersInitialState: TOrdersState = {\n  wsConnected: false,\n  wsError: false,\n  orders: [],\n  orderToView: null,\n  total: 0,\n  totalToday: 0,\n};\n\nconst ordersSlice = createSlice({\n  name: 'orders',\n  initialState: ordersInitialState,\n  reducers: {\n    getAllOrdersWsStart(state) {\n      return state;\n    },\n    getUserOrdersWsStart(state) {\n      return state;\n    },\n    getOrdersWsSuccess(state) {\n      state.wsConnected = true;\n    },\n    getOrdersWsError(state) {\n      state.wsConnected = false;\n      state.wsError = true;\n    },\n    getOrdersWsClosed(state) {\n      state.wsConnected = false;\n    },\n    getOrders(state, action: PayloadAction<IOrdersData>) {\n      state.orders = action.payload.orders;\n      state.total = action.payload.total;\n      state.totalToday = action.payload.totalToday;\n    },\n    setOrderToView(state, action: PayloadAction<IOrderData>) {\n      state.orderToView = action.payload;\n    },\n    resetOrderToView(state) {\n      state.orderToView = null;\n    },\n    resetOrders() {\n      return ordersInitialState;\n    },\n  },\n});\n\nexport const {\n  getAllOrdersWsStart,\n  getUserOrdersWsStart,\n  getOrdersWsSuccess,\n  getOrdersWsError,\n  getOrdersWsClosed,\n  getOrders,\n  setOrderToView,\n  resetOrderToView,\n  resetOrders,\n} = ordersSlice.actions;\n\nexport default ordersSlice.reducer;\n","import React, { useCallback, useEffect } from 'react';\nimport ErrorIndicator from 'components/error-indicator/error-indicator';\nimport { resetIngredients } from 'services/slices/ingredients';\nimport { useSelector, useDispatch } from 'services/types/hooks';\nimport {\n  selectIngredients,\n  selectIngredientsFailed,\n  selectIngredientsRequest,\n} from 'services/selectors/ingredients';\nimport OrdersList from 'components/orders-list/orders-list';\nimport { selectOrders } from 'services/selectors/orders';\nimport {\n  getOrdersWsClosed,\n  getUserOrdersWsStart,\n  setOrderToView,\n} from 'services/slices/orders';\nimport { IOrderData } from 'services/types/data';\nimport styles from './orders-history.module.css';\n\nconst OrdersHistoryPage: React.VFC = () => {\n  const ingredients = useSelector(selectIngredients);\n\n  const orders = useSelector(selectOrders);\n\n  const ingredientsRequest = useSelector(selectIngredientsRequest);\n\n  const ingredientsFailed = useSelector(selectIngredientsFailed);\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getUserOrdersWsStart());\n    return () => {\n      dispatch(getOrdersWsClosed());\n    };\n  }, [dispatch]);\n\n  const handleOrderModalOpen = useCallback(\n    (evt) => {\n      const eventTarget = evt.target as HTMLDivElement;\n      const orderId = eventTarget.closest('li')?.dataset.id;\n      const order = orders.find((item: IOrderData) => item._id === orderId);\n      if (order) {\n        dispatch(setOrderToView(order));\n      }\n    },\n    [dispatch, orders]\n  );\n\n  const handleErrorModalClose = useCallback(() => {\n    dispatch(resetIngredients());\n  }, [dispatch]);\n\n  return (\n    <section className={styles.ordersHistory__container}>\n      <ErrorIndicator\n        isLoading={ingredientsRequest}\n        hasError={ingredientsFailed}\n        hasData={Boolean(ingredients?.length)}\n        errorMessage=\"Пожалуйста, повторите попытку позднее\"\n        onErrorModalClose={handleErrorModalClose}\n      >\n        <OrdersList onOpenModalWithOrder={handleOrderModalOpen} />\n      </ErrorIndicator>\n    </section>\n  );\n};\n\nexport default OrdersHistoryPage;\n","import React, { useCallback, useEffect } from 'react';\nimport NavigationLink from 'components/navigation-link/navigation-link';\nimport { Route, Switch, useRouteMatch } from 'react-router-dom';\nimport { useDispatch } from 'react-redux';\nimport { getUserData, signOut } from 'services/thunks/auth';\nimport styles from './profile.module.css';\nimport ProfileEditPage from './profile-edit';\nimport NotFound404 from './not-found-404';\nimport OrdersHistoryPage from './orders-history';\n\nconst ProfilePage: React.VFC = () => {\n  const { path } = useRouteMatch();\n\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getUserData());\n  }, [dispatch]);\n\n  const onLogoutClick = useCallback(() => {\n    dispatch(signOut());\n  }, [dispatch]);\n\n  return (\n    <main className={`${styles.profile__container}`}>\n      <nav>\n        <ul className={`${styles.profile__navigation} mt-30`}>\n          <li>\n            <NavigationLink title=\"Профиль\" size=\"medium\">\n              Профиль\n            </NavigationLink>\n          </li>\n          <li>\n            <NavigationLink title=\"История заказов\" size=\"medium\">\n              История заказов\n            </NavigationLink>\n          </li>\n          <li>\n            <NavigationLink title=\"Выход\" size=\"medium\" onClick={onLogoutClick}>\n              Выход\n            </NavigationLink>\n          </li>\n          <li>\n            <p\n              className={`${styles.profile__description} \n              text_type_main-small text_color_inactive mt-20 ml-7`}\n            >\n              В этом разделе вы можете изменить свои&nbsp;персональные данные\n            </p>\n          </li>\n        </ul>\n      </nav>\n      <Switch>\n        <Route path={path} exact>\n          <ProfileEditPage />\n        </Route>\n        <Route path={`${path}/orders`} exact>\n          <OrdersHistoryPage />\n        </Route>\n        <Route>\n          <NotFound404/>\n        </Route>\n      </Switch>\n    </main>\n  );\n};\nexport default ProfilePage;\n","/* eslint-disable react/jsx-props-no-spreading */\nimport { useSelector } from 'react-redux';\nimport { Redirect, Route, RouteProps } from 'react-router-dom';\nimport { selectUserData } from 'services/selectors/auth';\n\nconst ProtectedRoute: React.FC<RouteProps> = ({ children, ...rest }) => {\n  const { user } = useSelector(selectUserData);\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) =>\n        user ? (\n          children\n        ) : (\n          <Redirect\n            to={{\n              pathname: '/login',\n              state: { from: location },\n            }}\n          />\n        )\n      }\n    />\n  );\n};\n\nexport default ProtectedRoute;\n","import { TLocation } from 'components/app/app';\nimport { useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport {\n  selectIngredients,\n  selectIngredientToView,\n} from 'services/selectors/ingredients';\nimport { IIngredientsData } from 'services/types/data';\nimport ingredientDetailsStyles from './ingredient-details.module.css';\n\nconst IngredientDetails: React.VFC = () => {\n  const ingredients = useSelector(selectIngredients);\n\n  let ingredient = useSelector(selectIngredientToView);\n\n  const location: TLocation = useLocation();\n\n  if (!ingredient) {\n    const splittedUrl = location.pathname.split('/');\n    const idFromUrl = splittedUrl[splittedUrl.length - 1];\n    ingredient = ingredients.find(\n      (item: IIngredientsData) => item._id === idFromUrl\n    );\n  }\n\n  return (\n    <div className={`${ingredientDetailsStyles.ingredient} pr-15 pl-15`}>\n      <h2\n        className={`${ingredientDetailsStyles.ingredient__title} text text_type_main-large pb-4`}\n      >\n        Детали ингредиента\n      </h2>\n      <img\n        className={`${ingredientDetailsStyles.ingredient__image} pb-4`}\n        src={ingredient?.image}\n        alt={ingredient?.name}\n      />\n      <p\n        className={`${ingredientDetailsStyles.ingredient__name} text text_type_main-medium pb-8`}\n      >\n        {ingredient?.name}\n      </p>\n      <div className={`${ingredientDetailsStyles.ingredient__compounds}`}>\n        <div className={`${ingredientDetailsStyles.ingredient__compound}`}>\n          <p className=\"text text_type_main-default text_color_inactive pb-2\">\n            Калории, ккал\n          </p>\n          <span className=\"text text_type_digits-default text_color_inactive\">\n            {ingredient?.calories}\n          </span>\n        </div>\n        <div className={`${ingredientDetailsStyles.ingredient__compound}`}>\n          <p className=\"text text_type_main-default text_color_inactive pb-2\">\n            Белки, г\n          </p>\n          <span className=\"text text_type_digits-default text_color_inactive\">\n            {ingredient?.proteins}\n          </span>\n        </div>\n        <div className={`${ingredientDetailsStyles.ingredient__compound}`}>\n          <p className=\"text text_type_main-default text_color_inactive pb-2\">\n            Жиры, г\n          </p>\n          <span className=\"text text_type_digits-default text_color_inactive\">\n            {ingredient?.fat}\n          </span>\n        </div>\n        <div className={`${ingredientDetailsStyles.ingredient__compound}`}>\n          <p className=\"text text_type_main-default text_color_inactive pb-2\">\n            Углеводы, г\n          </p>\n          <span className=\"text text_type_digits-default text_color_inactive\">\n            {ingredient?.carbohydrates}\n          </span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default IngredientDetails;\n\n","import React, { useCallback } from 'react';\nimport IngredientDetails from 'components/ingredient-details/ingredient-details';\nimport ErrorIndicator from 'components/error-indicator/error-indicator';\nimport { resetIngredients } from 'services/slices/ingredients';\nimport { useSelector, useDispatch } from 'services/types/hooks';\nimport {\n  selectIngredients,\n  selectIngredientsFailed,\n  selectIngredientsRequest,\n} from 'services/selectors/ingredients';\nimport styles from './ingredient.module.css';\n\nconst IngredientPage: React.VFC = () => {\n  const ingredients = useSelector(selectIngredients);\n\n  const ingredientsRequest = useSelector(selectIngredientsRequest);\n\n  const ingredientsFailed = useSelector(selectIngredientsFailed);\n\n  const dispatch = useDispatch();\n\n  const handleErrorModalClose = useCallback(() => {\n    dispatch(resetIngredients());\n  }, [dispatch]);\n\n  return (\n    <main className={styles.indredient__container}>\n      <ErrorIndicator\n        isLoading={ingredientsRequest}\n        hasError={ingredientsFailed}\n        hasData={Boolean(ingredients?.length)}\n        errorMessage=\"Пожалуйста, повторите попытку позднее\"\n        onErrorModalClose={handleErrorModalClose}\n      >\n        <IngredientDetails />\n      </ErrorIndicator>\n    </main>\n  );\n};\n\nexport default IngredientPage;\n","/* eslint-disable react/jsx-props-no-spreading */\nimport React from 'react';\nimport { useSelector } from 'services/types/hooks';\nimport {\n  selectOrders,\n  selectTotalOrders,\n  selectTotalTodayOrders,\n} from 'services/selectors/orders';\nimport styles from './orders-dashboard.module.css';\n\nconst OrdersDashboard: React.VFC = () => {\n  const orders = useSelector(selectOrders);\n\n  const total = useSelector(selectTotalOrders);\n\n  const totalToday = useSelector(selectTotalTodayOrders);\n\n  const visibleOrdersCount = 10;\n\n  return (\n    <section className={`${styles.dashboard} mt-25`}>\n      <div>\n        <h2 className=\"text text_type_main-medium mb-6\">Готовы:</h2>\n        <ul\n          className={`${styles.dashboard__list} ${styles.dashboard__list_done}`}\n        >\n          {orders\n            .filter((order) => order.status === 'done')\n            .slice(0, visibleOrdersCount)\n            .map((order) => (\n              <li\n                key={order._id}\n                className={`${styles.dashboard__number} text text text_type_digits-default mb-2`}\n              >\n                {order.number}\n              </li>\n            ))}\n        </ul>\n      </div>\n      <div>\n        <h2 className=\"text text_type_main-medium mb-6\">В работе:</h2>\n        <ul className={`${styles.dashboard__list}`}>\n          {orders\n            .filter((order) => order.status === 'pending')\n            .slice(0, visibleOrdersCount)\n            .map((order) => (\n              <li\n                key={order._id}\n                className=\"text text text_type_digits-default mb-2\"\n              >\n                {order.number}\n              </li>\n            ))}\n        </ul>\n      </div>\n      <div className={`${styles.dashboard__total} mt-10`}>\n        <h2 className=\"text text_type_main-medium\">Выполнено за сегодня:</h2>\n        <span className=\"text text text_type_digits-large\">{total}</span>\n      </div>\n      <div className={`${styles.dashboard__totalToday} mt-5`}>\n        <h2 className=\"text text_type_main-medium\">В работе:</h2>\n        <span className=\"text text text_type_digits-large\">{totalToday}</span>\n      </div>\n    </section>\n  );\n};\n\nexport default OrdersDashboard;\n","import React, { useCallback, useEffect } from 'react';\nimport ErrorIndicator from 'components/error-indicator/error-indicator';\nimport { useSelector, useDispatch } from 'services/types/hooks';\nimport {\n  selectOrders,\n  selectWsConnected,\n  selectWsError,\n} from 'services/selectors/orders';\nimport OrdersList from 'components/orders-list/orders-list';\nimport OrdersDashboard from 'components/orders-dashboard/orders-dashboard';\nimport { IOrderData } from 'services/types/data';\nimport {\n  getAllOrdersWsStart,\n  getOrdersWsClosed,\n  resetOrders,\n  setOrderToView,\n} from 'services/slices/orders';\nimport styles from './feed.module.css';\n\nconst FeedPage: React.VFC = () => {\n  const orders = useSelector(selectOrders);\n\n  const dispatch = useDispatch();\n\n  const ordersConnected = useSelector(selectWsConnected);\n\n  const ordersFailed = useSelector(selectWsError);\n\n  useEffect(() => {\n    dispatch(getAllOrdersWsStart());\n    return () => {\n      dispatch(getOrdersWsClosed());\n    };\n  }, [dispatch]);\n\n  const handleOrderModalOpen = useCallback(\n    (evt) => {\n      const eventTarget = evt.target as HTMLDivElement;\n      const orderId = eventTarget.closest('li')?.dataset.id;\n      const order = orders.find((item: IOrderData) => item._id === orderId);\n      if (order) {\n        dispatch(setOrderToView(order));\n      }\n    },\n    [dispatch, orders]\n  );\n\n  const handleErrorModalClose = useCallback(() => {\n    dispatch(resetOrders());\n  }, [dispatch]);\n\n  return (\n    <main className={styles.feedPage}>\n      <ErrorIndicator\n        isLoading={!ordersConnected && !ordersFailed}\n        hasError={ordersFailed}\n        hasData={Boolean(orders?.length)}\n        errorMessage=\"Пожалуйста, повторите попытку позднее\"\n        onErrorModalClose={handleErrorModalClose}\n      >\n        <OrdersList onOpenModalWithOrder={handleOrderModalOpen} />\n        <OrdersDashboard />\n      </ErrorIndicator>\n    </main>\n  );\n};\n\nexport default FeedPage;\n","import { AppThunk } from 'services/types';\nimport { api } from 'utils/api';\nimport {\n  getIngredientsRequest,\n  getIngredientsSuccess,\n  getIngredientsFailed,\n} from '../slices/ingredients';\n\n\nconst getIngredientsData: AppThunk = () => (dispatch) => {\n  dispatch(getIngredientsRequest());\n  api\n    .getIngredients()\n    .then((res) => {\n      if (res && res.success) {\n        dispatch(getIngredientsSuccess(res.data));\n      } else {\n        dispatch(getIngredientsFailed());\n      }\n    })\n    .catch((err) => {\n      dispatch(getIngredientsFailed());\n      // eslint-disable-next-line no-console\n      console.log(`Ошибка загрузки ингредиентов: ${err}`);\n    });\n};\n\nexport default getIngredientsData;","/* eslint-disable @typescript-eslint/no-non-null-assertion */\n/* eslint-disable react/no-array-index-key */\nimport React from 'react';\nimport { useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { TLocation } from 'components/app/app';\nimport {\n  getOrderPrice,\n  selectOrders,\n  selectOrderToView,\n} from 'services/selectors/orders';\nimport getHowLongAgoDate from 'utils/date-time';\nimport { selectIngredients } from 'services/selectors/ingredients';\nimport appStyles from 'components/app/app.module.css';\nimport { IOrderData } from 'services/types/data';\nimport { CurrencyIcon } from 'modules/common/components';\nimport styles from './order-contents.module.css';\n\nexport interface IStatusToText {\n  [title: string]: string;\n}\n\nexport interface IStatusToColor {\n  [title: string]: string;\n}\n\nconst OrderContents: React.VFC = () => {\n  const statusToText: IStatusToText = {\n    created: 'Создан',\n    pending: 'Готовится',\n    done: 'Выполнен',\n  };\n  const statusToColor: IStatusToColor = {\n    created: `${styles.orderContents__status_created}`,\n    pending: `${styles.orderContents__status_progress}`,\n    done: `${styles.orderContents__status_done}`,\n  };\n\n  const orders = useSelector(selectOrders);\n\n  const ingredientsData = useSelector(selectIngredients);\n\n  const location: TLocation = useLocation();\n\n  let order = useSelector(selectOrderToView);\n\n  if (!order) {\n    const splittedUrl = location.pathname.split('/');\n    const idFromUrl = splittedUrl[splittedUrl.length - 1];\n    order = orders.find((item: IOrderData) => item._id === idFromUrl);\n  }\n\n  const orderPrice = useSelector(getOrderPrice(order!.ingredients));\n\n  const statusColor = order ? statusToColor[order.status] : '';\n\n  const statusText = order ? statusToText[order.status] : '';\n\n  const getIngredientbyFreq = () => {\n    type TfreqDict = {\n      [name: string]: number;\n    };\n    const freqDict: TfreqDict = {};\n    order?.ingredients.forEach((id) => {\n      if (!freqDict[id]) {\n        freqDict[id] = 1;\n      } else {\n        freqDict[id] += 1;\n      }\n    });\n\n    return Array.from(new Set(order?.ingredients)).map((id) => {\n      const ingredient = ingredientsData.find((item) => item._id === id);\n      if (ingredient?.type === 'bun') {\n        return {\n          id: ingredient?._id,\n          image: ingredient?.image_mobile,\n          name: ingredient?.name,\n          price: ingredient?.price,\n          count: 2,\n        };\n      }\n      return {\n        id: ingredient?._id,\n        image: ingredient?.image_mobile,\n        name: ingredient?.name,\n        price: ingredient?.price,\n        count: ingredient?._id ? freqDict[ingredient._id] : 0,\n      };\n    });\n  };\n\n  return (\n    <li className={`${styles.orderContents__container}`}>\n      <p className=\"text text text_type_digits-default mt-4 mb-10\">{`#${order?.number}`}</p>\n      <h1\n        className={`${styles.orderContents__title} text text_type_main-medium mb-3`}\n      >\n        {order?.name}\n      </h1>\n      <p\n        className={`${styles.orderContents__status} ${statusColor} text text_type_main-default mb-15`}\n      >\n        {statusText}\n      </p>\n      <h2\n        className={`${styles.orderContents__title} text text_type_main-medium mb-6`}\n      >\n        Состав:\n      </h2>\n      <ul\n        className={`${styles.orderContents__ingredients} ${appStyles.scroll} mb-10`}\n      >\n        {getIngredientbyFreq().map((ingredient) => (\n          <li\n            className={`${styles.orderContents__ingredient} mb-4`}\n            key={ingredient.id}\n          >\n            <div className={styles.orderContents__imageOverlay}>\n              <img\n                src={ingredient.image}\n                alt={ingredient.name}\n                className={styles.orderContents__image}\n              />\n            </div>\n            <span className=\"text text_type_main-default ml-4\">\n              {ingredient.name}\n            </span>\n            <div className={`${styles.orderContents__price} mr-6`}>\n              <span className=\"text text text_type_digits-default mr-2 ml-6\">\n                {`${ingredient.count} x ${ingredient.price}`}\n              </span>\n              <CurrencyIcon type=\"primary\" />\n            </div>\n          </li>\n        ))}\n      </ul>\n      <div className={`${styles.orderContents__details}`}>\n        <span\n          className={`${styles.orderContents__createdAt} text text_type_main-default text_color_inactive mt-1`}\n        >\n          {order && getHowLongAgoDate(order.createdAt)}\n        </span>\n        <div className={styles.orderContents__price}>\n          <span className=\"text text text_type_digits-default pr-2\">\n            {orderPrice}\n          </span>\n          <CurrencyIcon type=\"primary\" />\n        </div>\n      </div>\n    </li>\n  );\n};\n\nexport default React.memo(OrderContents);\n// using memo will cause React to skip rendering a component if its props have not changed\n","import React, { useCallback } from 'react';\nimport OrderContents from 'components/order-contents/order-contents';\nimport { selectOrders } from 'services/selectors/orders';\nimport ErrorIndicator from 'components/error-indicator/error-indicator';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { resetOrders } from 'services/slices/orders';\nimport styles from './order-contents.module.css';\n\nconst OrderContentsPage: React.VFC = () => {\n  const orders = useSelector(selectOrders);\n\n  const dispatch = useDispatch();\n\n  const handleErrorModalClose = useCallback(() => {\n    dispatch(resetOrders());\n  }, [dispatch]);\n\n  return (\n    <main className={styles.order__container}>\n      <ErrorIndicator\n        isLoading={false}\n        hasError={false}\n        hasData={Boolean(orders?.length)}\n        errorMessage=\"Пожалуйста, повторите попытку позднее\"\n        onErrorModalClose={handleErrorModalClose}\n      >\n        <OrderContents />\n      </ErrorIndicator>\n    </main>\n  );\n};\n\nexport default OrderContentsPage;\n","/* eslint-disable no-use-before-define */\nimport React, { useCallback, useEffect } from 'react';\nimport { Switch, Route, useLocation, useHistory } from 'react-router-dom';\nimport HomePage from 'pages/home';\nimport LoginPage from 'pages/login';\nimport AppHeader from 'components/app-header/app-header';\nimport RegisterPage from 'pages/register';\nimport ForgotPasswordPage from 'pages/forgot-password';\nimport ResetPasswordPage from 'pages/reset-password';\nimport NotFound404 from 'pages/not-found-404';\nimport ProfilePage from 'pages/profile';\nimport { getUserData } from 'services/thunks/auth';\nimport { useDispatch, useSelector } from 'react-redux';\nimport ProtectedRoute from 'components/protected-route/protected-route';\nimport Modal from 'components/modal/modal';\nimport IngredientDetails from 'components/ingredient-details/ingredient-details';\nimport { resetIngredientToView } from 'services/slices/ingredients';\nimport IngredientPage from 'pages/ingredient';\nimport FeedPage from 'pages/feed';\nimport getIngredientsData from 'services/thunks/ingredients';\nimport OrderContentsPage from 'pages/order-contents';\nimport OrderContents from 'components/order-contents/order-contents';\nimport { selectIngredientToView } from 'services/selectors/ingredients';\nimport { selectOrderToView } from 'services/selectors/orders';\nimport {\n  getAllOrdersWsStart,\n  getOrdersWsClosed,\n  resetOrderToView,\n} from 'services/slices/orders';\n\nexport type TLocationState = {\n  from?: {\n    pathname?: string;\n  };\n  background?: TLocation;\n};\n\nexport type TLocation = {\n  hash: string;\n  key?: string;\n  pathname: string;\n  search: string;\n  state: TLocationState;\n};\n\nconst App: React.VFC = () => {\n  const dispatch = useDispatch();\n\n  const ingredientToView = useSelector(selectIngredientToView);\n\n  const orderToView = useSelector(selectOrderToView);\n\n  const history = useHistory();\n\n  const location: TLocation = useLocation();\n\n  // This piece of state is set when one of the\n  // gallery links is clicked. The `background` state\n  // is the location that we were at when one of\n  // the gallery links was clicked. If it's there,\n  // use it as the location for the <Switch> so\n  // we show the gallery in the background, behind\n  // the modal.\n  // https://v5.reactrouter.com/web/example/modal-gallery\n  const background = location?.state && location.state.background;\n\n  useEffect(() => {\n    dispatch(getUserData());\n    dispatch(getIngredientsData());\n    dispatch(getAllOrdersWsStart());\n    return () => {\n      dispatch(getOrdersWsClosed());\n    };\n  }, [dispatch]);\n\n  const handleIngredientModalClose = useCallback(() => {\n    dispatch(resetIngredientToView());\n    history.replace('/');\n  }, [dispatch, history]);\n\n  const handleOrderModalClose = useCallback(() => {\n    dispatch(resetOrderToView());\n    history.goBack();\n  }, [dispatch, history]);\n\n  return (\n    <>\n      <AppHeader />\n      <Switch location={background || location}>\n        <Route path=\"/\" exact>\n          <HomePage />\n        </Route>\n        <Route path=\"/feed\" exact>\n          <FeedPage />\n        </Route>\n        <Route path=\"/login\" exact>\n          <LoginPage />\n        </Route>\n        <Route path=\"/register\" exact>\n          <RegisterPage />\n        </Route>\n        <Route path=\"/forgot-password\" exact>\n          <ForgotPasswordPage />\n        </Route>\n        <Route path=\"/reset-password\" exact>\n          <ResetPasswordPage />\n        </Route>\n        <ProtectedRoute path=\"/profile/orders/:id\" exact>\n          <OrderContentsPage />\n        </ProtectedRoute>\n        <ProtectedRoute path=\"/profile\">\n          <ProfilePage />\n        </ProtectedRoute>\n        <Route path=\"/ingredients/:id\" exact>\n          <IngredientPage />\n        </Route>\n        <Route path=\"/feed/:id\" exact>\n          <OrderContentsPage />\n        </Route>\n        <Route>\n          <NotFound404 />\n        </Route>\n      </Switch>\n      {ingredientToView && background && (\n        <Route path=\"/ingredients/:id\">\n          <Modal onClose={handleIngredientModalClose}>\n            <IngredientDetails />\n          </Modal>\n        </Route>\n      )}\n      {orderToView && background && (\n        <Route path=\"/profile/orders/:id\">\n          <Modal onClose={handleOrderModalClose}>\n            <OrderContents />\n          </Modal>\n        </Route>\n      )}\n      {orderToView && background && (\n        <Route path=\"/feed/:id\">\n          <Modal onClose={handleOrderModalClose}>\n            <OrderContents />\n          </Modal>\n        </Route>\n      )}\n    </>\n  );\n};\n\nexport default App;\n","import thunk from 'redux-thunk';\nimport { configureStore } from '@reduxjs/toolkit';\nimport { WS_URL_ORDERS } from 'utils/constants';\nimport orderReducer from './slices/order';\nimport ingredientsReducer from './slices/ingredients';\nimport constructorReducer from './slices/constructor';\nimport authReducer from './slices/auth';\nimport ordersReducer, {\n  getAllOrdersWsStart,\n  getOrders,\n  getOrdersWsClosed,\n  getOrdersWsError,\n  getOrdersWsSuccess,\n  getUserOrdersWsStart,\n} from './slices/orders';\nimport { socketMiddleware } from './middleware';\n\nconst wsOrdersActions = {\n  wsAllOrdersInit: getAllOrdersWsStart.type,\n  wsUserOrdersInit: getUserOrdersWsStart.type,\n  onOpen: getOrdersWsSuccess.type,\n  onClose: getOrdersWsClosed.type,\n  onError: getOrdersWsError.type,\n  onMessage: getOrders.type,\n};\n\n/**\n * Инициализируем хранилище с помощью  redux-toolkit,\n * указываем редьюсеры, подключаем Redux Devtools и thunks\n */\nconst store = configureStore({\n  reducer: {\n    order: orderReducer,\n    burgerIngredients: ingredientsReducer,\n    burgerConstructor: constructorReducer,\n    auth: authReducer,\n    orders: ordersReducer,\n  },\n  middleware: [thunk, socketMiddleware(WS_URL_ORDERS, wsOrdersActions)],\n  devTools: process.env.NODE_ENV !== 'production',\n});\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport './index.css';\nimport { HashRouter as Router } from 'react-router-dom';\nimport App from './components/app/app';\nimport store from './services/store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router>\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"constructor__elements\":\"burger-constructor_constructor__elements__cuaLn\",\"constructor__elements_dropArea\":\"burger-constructor_constructor__elements_dropArea__XgeNC\",\"constructor__elements_canDrop\":\"burger-constructor_constructor__elements_canDrop__1Itgz\",\"constructor__elements_canNotDrop\":\"burger-constructor_constructor__elements_canNotDrop__Loy8D\",\"constructor__bunElement\":\"burger-constructor_constructor__bunElement__15ixT\",\"constructor__nonBunElements\":\"burger-constructor_constructor__nonBunElements__3Ni4f\",\"constructor__totalPriceContainer\":\"burger-constructor_constructor__totalPriceContainer__3S0-0\",\"constructor__totalPrice\":\"burger-constructor_constructor__totalPrice__24T16\",\"constructor__text\":\"burger-constructor_constructor__text__29Utu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient\":\"ingredient-details_ingredient__2hFcT\",\"ingredient__name\":\"ingredient-details_ingredient__name__2xadH\",\"ingredient__image\":\"ingredient-details_ingredient__image__3mDBz\",\"ingredient__title\":\"ingredient-details_ingredient__title__2Rwjs\",\"ingredient__compounds\":\"ingredient-details_ingredient__compounds__3fcIW\",\"ingredient__compound\":\"ingredient-details_ingredient__compound__3rw40\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"scroll\":\"app_scroll__1ZMNu\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile__container\":\"profile_profile__container__2NtLF\",\"profile__navigation\":\"profile_profile__navigation__wc-Aa\",\"profile__field\":\"profile_profile__field__2eqec\",\"profile__description\":\"profile_profile__description__49uTk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dashboard\":\"orders-dashboard_dashboard__2Djow\",\"dashboard__list\":\"orders-dashboard_dashboard__list__xzirD\",\"dashboard__list_done\":\"orders-dashboard_dashboard__list_done__3jzeY\",\"dashboard__number\":\"orders-dashboard_dashboard__number__3qR44\",\"dashboard__total\":\"orders-dashboard_dashboard__total__J2Vep\",\"dashboard__totalToday\":\"orders-dashboard_dashboard__totalToday__3LOh3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredient__сard\":\"burger-ingredient_ingredient__сard__zgE2z\",\"ingredient__сard_isDragging\":\"burger-ingredient_ingredient__сard_isDragging__39uQp\",\"ingredient__price\":\"burger-ingredient_ingredient__price__Zb6Pu\",\"ingredient__name\":\"burger-ingredient_ingredient__name__1XA3f\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ingredients__tabContainer\":\"burger-ingredients_ingredients__tabContainer__3aRpQ\",\"ingredients__list\":\"burger-ingredients_ingredients__list__2rRB8\",\"ingredient__category\":\"burger-ingredients_ingredient__category__2v9Jj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"app-header_header__1iHLW\",\"header__container\":\"app-header_header__container__1zQvH\",\"header__navigation\":\"app-header_header__navigation__2N-rI\",\"header__logo\":\"app-header_header__logo__27E10\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"order\":\"order-details_order__12ZdD\",\"order__number\":\"order-details_order__number__g-Ijp\",\"order__image\":\"order-details_order__image__1UwKi\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"modal_modal__1DF1f\",\"modal__closeIcon\":\"modal_modal__closeIcon__2BB1n\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"draggableElement\":\"draggable-item_draggableElement__1G66w\",\"draggableElement_isDragging\":\"draggable-item_draggableElement_isDragging__J3B_G\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation__link\":\"navigation-link_navigation__link__KGGEA\",\"navigation__link_active\":\"navigation-link_navigation__link_active__3She4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"notFound__container\":\"not-found-404_notFound__container__31_Jx\",\"notFound__info\":\"not-found-404_notFound__info__1-tzn\",\"notFound__link\":\"not-found-404_notFound__link__3qQ0l\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form__container\":\"forms_form__container__2-Gp2\",\"form\":\"forms_form__2rK1V\",\"form__field\":\"forms_form__field__2caEc\",\"form__link\":\"forms_form__link___LrY8\"};"],"sourceRoot":""}